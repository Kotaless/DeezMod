"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[9133],{V26n:(t,e,i)=>{i.d(e,{e:()=>n});var s=i("LZ+A");const n=t=>new s._$(t)},"f/uw":(t,e,i)=>{i.d(e,{q:()=>s});class s{constructor(t){this.api=void 0,this.api=t}}},ALjf:(t,e,i)=>{i.r(e),i.d(e,{AppleAuth:()=>y});var s=i("+9dH"),n=i("/0+J"),r=i("MVPB"),o=i("4OMY"),a=i("/YxT"),c=(0,o.A)("sdkLoadingPromise"),p=(0,o.A)("addAppleSDK");class d{get hasInit(){var t;return void 0!==(null==(t=window.AppleID)?void 0:t.auth)}constructor(t){Object.defineProperty(this,c,{writable:!0,value:null}),this.config=void 0,Object.defineProperty(this,p,{writable:!0,value:(t="apple-jssdk")=>(0,r.A)(this,c)[c]?(0,r.A)(this,c)[c]:document.getElementById(t)?Promise.resolve():((0,r.A)(this,c)[c]=new Promise((e=>{const i=document.createElement("script");i.id=t,i.src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",document.head.appendChild(i),i.onload=()=>{e()}})),(0,r.A)(this,c)[c])}),this.signin=t=>AppleID.auth.signIn((0,s.A)({},this.config,t)),this.config={scope:"name email",clientId:"com.deezer.Deezer.client",state:"apple jssdk init state",domain:"",redirectURI:"https://www.deezer.com/applesignin"},t&&this.setConfig(t)}setConfig(t){t.redirectURI||(t.redirectURI=`${location.origin}/applesignin`),this.config=(0,a.z)(this.config,t," ")}init({addScript:t=!0}){var e=this;return(0,n.A)((function*(){t&&(yield(0,r.A)(e,p)[p]()),AppleID.auth.init((0,s.A)({},e.config,{usePopup:!0}))}))()}}var h=i("LZ+A"),l=i("V26n"),u=i("f/uw");let A=function(t){return t.AUTH="apple.auth",t}({});class f extends u.q{constructor(t){var e;super(t),e=this,this.connect=function(){var t=(0,n.A)((function*(t){try{return yield e.api.call({method:A.AUTH,data:t})}catch(t){throw(0,l.e)(t)}}));return function(e){return t.apply(this,arguments)}}()}}var g=(0,o.A)("sdk"),v=(0,o.A)("api"),w=(0,o.A)("tokenCache"),m=(0,o.A)("getToken");class y{constructor(t,e){Object.defineProperty(this,m,{value:b}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),this.setConfig=t=>{(0,r.A)(this,g)[g].setConfig(t)},(0,r.A)(this,v)[v]=new f(t),(0,r.A)(this,g)[g]=new d(e)}assertSDKIsInitialized(t){if(!t.hasInit)throw new h.Pw("apple")}init({host:t,addScript:e=!0}){return(0,r.A)(this,g)[g].init({addScript:e,host:t})}signin({grant_type:t="authorization_code"}={}){var e=this;return(0,n.A)((function*(){e.assertSDKIsInitialized((0,r.A)(e,g)[g]);const i=yield(0,r.A)(e,m)[m]();return(0,r.A)(e,v)[v].connect((0,s.A)({},i,{grant_type:t,domain:(0,r.A)(e,g)[g].config.domain}))}))()}}function b(){return I.apply(this,arguments)}function I(){return(I=(0,n.A)((function*(){return(0,r.A)(this,w)[w]?(0,r.A)(this,w)[w]:(0,r.A)(this,g)[g].signin().then((t=>((0,r.A)(this,w)[w]={identity_token:t.authorization.id_token,code:t.authorization.code},(0,r.A)(this,w)[w])))}))).apply(this,arguments)}},"LZ+A":(t,e,i)=>{i.d(e,{Pw:()=>n,_$:()=>r,fH:()=>o,lR:()=>s});class s extends Error{}class n extends s{constructor(t){super(`You must init ${t} sdk before using it`)}}class r extends s{constructor(t){super(t.message),this.payload=void 0,this.response=void 0,this.name=t.name,this.response=t.response,this.payload=t.payload}}class o extends Error{constructor(...t){super(...t),this.message="popup_closed_by_user"}}},"/YxT":(t,e,i)=>{i.d(e,{z:()=>r});var s=i("+9dH"),n=i("Nlia");const r=(t,e,i=" ")=>{const{scopes:r}=e,o=(0,n.A)(e,["scopes"]),a=r?((t,e=" ")=>"string"==typeof t?t:t.join(e))(r,i):t.scope;return(0,s.A)({},t,o,{scope:a})}}}]);