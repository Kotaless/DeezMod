"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[7960],{i2Ew:(e,t,n)=>{n.d(t,{sx:()=>A,z6:()=>f});var a=n("q1tI"),s=n("IXMZ"),r=n("Ui1H"),i=n("W58G"),l=n("iDsS"),o=n("Q7m9"),c=n("LJ0v"),d=(...e)=>e.filter(Boolean).join(" ");function u(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)&&!Array.isArray(e)}var p=e=>e?"":void 0,h=e=>!!e||void 0;function m(...e){return function(t){e.some((e=>(null==e||e(t),null==t?void 0:t.defaultPrevented)))}}function g(e={}){const{onChange:t,value:n,defaultValue:s,name:r,isDisabled:i,isFocusable:o,isNative:c,...d}=e,[p,h]=(0,a.useState)(s||""),m=void 0!==n,g=m?n:p,_=(0,a.useRef)(null),b=(0,a.useCallback)((()=>{const e=_.current;if(!e)return;let t="input:not(:disabled):checked";const n=e.querySelector(t);if(n)return void n.focus();t="input:not(:disabled)";const a=e.querySelector(t);null==a||a.focus()}),[]),f=(0,a.useId)(),E=r||`radio-${f}`,v=(0,a.useCallback)((e=>{const n=function(e){return e&&u(e)&&u(e.target)}(e)?e.target.value:e;m||h(n),null==t||t(String(n))}),[t,m]);return{getRootProps:(0,a.useCallback)(((e={},t=null)=>({...e,ref:(0,l.Px)(t,_),role:"radiogroup"})),[]),getRadioProps:(0,a.useCallback)(((e={},t=null)=>{const n=c?"checked":"isChecked";return{...e,ref:t,name:E,[n]:null!=g?e.value===g:void 0,onChange(e){v(e)},"data-radiogroup":!0}}),[c,E,v,g]),name:E,ref:_,focus:b,setValue:h,value:g,onChange:v,isDisabled:i,isFocusable:o,htmlProps:d}}var[_,b]=(0,i.q)({name:"RadioGroupContext",strict:!1}),f=(0,s.Rf)(((e,t)=>{const{colorScheme:n,size:r,variant:i,children:l,className:o,isDisabled:c,isFocusable:u,...p}=e,{value:h,onChange:m,getRootProps:b,name:f,htmlProps:E}=g(p),v=(0,a.useMemo)((()=>({name:f,size:r,onChange:m,colorScheme:n,value:h,variant:i,isDisabled:c,isFocusable:u})),[f,r,m,n,h,i,c,u]);return a.createElement(_,{value:v},a.createElement(s.Bv.div,{...b(E,t),className:d("chakra-radio-group",o)},l))}));f.displayName="RadioGroup";var E={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function v(e){e.preventDefault(),e.stopPropagation()}var A=(0,s.Rf)(((e,t)=>{const n=b(),{onChange:i,value:l}=e,d=(0,s.o5)("Radio",{...n,...e}),u=(0,r.MN)(e),{spacing:g="0.5rem",children:_,isDisabled:f=(null==n?void 0:n.isDisabled),isFocusable:A=(null==n?void 0:n.isFocusable),inputProps:y,...S}=u;let w=e.isChecked;null!=(null==n?void 0:n.value)&&null!=l&&(w=n.value===l);let C=i;(null==n?void 0:n.onChange)&&null!=l&&(C=function(...e){return function(t){e.forEach((e=>{null==e||e(t)}))}}(n.onChange,i));const P=(null==e?void 0:e.name)??(null==n?void 0:n.name),{getInputProps:x,getCheckboxProps:k,getLabelProps:D,getRootProps:I,htmlProps:N}=function(e={}){const{defaultChecked:t,isChecked:n,isFocusable:s,isDisabled:r,isReadOnly:i,isRequired:l,onChange:d,isInvalid:u,name:g,value:_,id:f,"data-radiogroup":A,"aria-describedby":y,...S}=e,w=`radio-${(0,a.useId)()}`,C=(0,o.Uc)(),P=b();let x=!C||P||A?w:C.id;x=f??x;const k=r??(null==C?void 0:C.isDisabled),D=i??(null==C?void 0:C.isReadOnly),I=l??(null==C?void 0:C.isRequired),N=u??(null==C?void 0:C.isInvalid),[M,T]=(0,a.useState)(!1),[L,R]=(0,a.useState)(!1),[O,U]=(0,a.useState)(!1),[F,z]=(0,a.useState)(!1),[j,B]=(0,a.useState)(Boolean(t)),q=void 0!==n,G=q?n:j;(0,a.useEffect)((()=>(0,c.Y)(T)),[]);const V=(0,a.useCallback)((e=>{D||k?e.preventDefault():(q||B(e.target.checked),null==d||d(e))}),[q,k,D,d]),J=(0,a.useCallback)((e=>{" "===e.key&&z(!0)}),[z]),H=(0,a.useCallback)((e=>{" "===e.key&&z(!1)}),[z]),K=(0,a.useCallback)(((e={},t=null)=>({...e,ref:t,"data-active":p(F),"data-hover":p(O),"data-disabled":p(k),"data-invalid":p(N),"data-checked":p(G),"data-focus":p(L),"data-focus-visible":p(L&&M),"data-readonly":p(D),"aria-hidden":!0,onMouseDown:m(e.onMouseDown,(()=>z(!0))),onMouseUp:m(e.onMouseUp,(()=>z(!1))),onMouseEnter:m(e.onMouseEnter,(()=>U(!0))),onMouseLeave:m(e.onMouseLeave,(()=>U(!1)))})),[F,O,k,N,G,L,D,M]),{onFocus:$,onBlur:Y}=C??{},W=(0,a.useCallback)(((e={},t=null)=>{const n=k&&!s;return{...e,id:x,ref:t,type:"radio",name:g,value:_,onChange:m(e.onChange,V),onBlur:m(Y,e.onBlur,(()=>R(!1))),onFocus:m($,e.onFocus,(()=>R(!0))),onKeyDown:m(e.onKeyDown,J),onKeyUp:m(e.onKeyUp,H),checked:G,disabled:n,readOnly:D,required:I,"aria-invalid":h(N),"aria-disabled":h(n),"aria-required":h(I),"data-readonly":p(D),"aria-describedby":y,style:E}}),[k,s,x,g,_,V,Y,$,J,H,G,D,I,N,y]);return{state:{isInvalid:N,isFocused:L,isChecked:G,isActive:F,isHovered:O,isDisabled:k,isReadOnly:D,isRequired:I},getCheckboxProps:K,getInputProps:W,getLabelProps:(e={},t=null)=>({...e,ref:t,onMouseDown:m(e.onMouseDown,v),onTouchStart:m(e.onTouchStart,v),"data-disabled":p(k),"data-checked":p(G),"data-invalid":p(N)}),getRootProps:(e,t=null)=>({...e,ref:t,"data-disabled":p(k),"data-checked":p(G),"data-invalid":p(N)}),htmlProps:S}}({...S,isChecked:w,isFocusable:A,isDisabled:f,onChange:C,name:P}),[M,T]=function(e,t){const n={},a={};for(const[s,r]of Object.entries(e))t.includes(s)?n[s]=r:a[s]=r;return[n,a]}(N,r.GF),L=k(T),R=x(y,t),O=D(),U=Object.assign({},M,I()),F={display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer",position:"relative",...d.container},z={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,...d.control},j={userSelect:"none",marginStart:g,...d.label};return a.createElement(s.Bv.label,{className:"chakra-radio",...U,__css:F},a.createElement("input",{className:"chakra-radio__input",...R}),a.createElement(s.Bv.span,{className:"chakra-radio__control",...L,__css:z}),_&&a.createElement(s.Bv.span,{className:"chakra-radio__label",...O,__css:j},_))}));A.displayName="Radio"},GFLz:(e,t,n)=>{n.d(t,{l6:()=>c});var a=n("q1tI"),s=n("Q7m9"),r=n("IXMZ"),i=n("Ui1H"),l=(...e)=>e.filter(Boolean).join(" "),o=(0,r.Rf)((function(e,t){const{children:n,placeholder:s,className:i,...o}=e;return a.createElement(r.Bv.select,{...o,ref:t,className:l("chakra-select",i)},s&&a.createElement("option",{value:""},s),n)}));o.displayName="SelectField";var c=(0,r.Rf)(((e,t)=>{var n;const l=(0,r.o5)("Select",e),{rootProps:c,placeholder:d,icon:u,color:h,height:m,h:g,minH:_,minHeight:b,iconColor:f,iconSize:E,...v}=(0,i.MN)(e),[A,y]=function(e,t){const n={},a={};for(const[s,r]of Object.entries(e))t.includes(s)?n[s]=r:a[s]=r;return[n,a]}(v,i.GF),S=(0,s.tJ)(y),w={width:"100%",height:"fit-content",position:"relative",color:h},C={paddingEnd:"2rem",...l.field,_focus:{zIndex:"unset",...null==(n=l.field)?void 0:n._focus}};return a.createElement(r.Bv.div,{className:"chakra-select__wrapper",__css:w,...A,...c},a.createElement(o,{ref:t,height:g??m,minH:_??b,placeholder:d,...S,__css:C},e.children),a.createElement(p,{"data-disabled":(P=S.disabled,P?"":void 0),...(f||h)&&{color:f||h},__css:l.icon,...E&&{fontSize:E}},u));var P}));c.displayName="Select";var d=e=>a.createElement("svg",{viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})),u=(0,r.Bv)("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),p=e=>{const{children:t=a.createElement(d,null),...n}=e,s=(0,a.cloneElement)(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return a.createElement(u,{...n,className:"chakra-select__icon-wrapper"},(0,a.isValidElement)(t)?s:null)};p.displayName="SelectIcon"},eh3h:(e,t,n)=>{n.d(t,{d:()=>c});var a=n("q1tI"),s=n("pgtK"),r=n("IXMZ"),i=n("Ui1H"),l=(...e)=>e.filter(Boolean).join(" "),o=e=>e?"":void 0,c=(0,r.Rf)((function(e,t){const n=(0,r.o5)("Switch",e),{spacing:c="0.5rem",children:d,...u}=(0,i.MN)(e),{state:p,getInputProps:h,getCheckboxProps:m,getRootProps:g,getLabelProps:_}=(0,s.vp)(u),b=(0,a.useMemo)((()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...n.container})),[n.container]),f=(0,a.useMemo)((()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...n.track})),[n.track]),E=(0,a.useMemo)((()=>({userSelect:"none",marginStart:c,...n.label})),[c,n.label]);return a.createElement(r.Bv.label,{...g(),className:l("chakra-switch",e.className),__css:b},a.createElement("input",{className:"chakra-switch__input",...h({},t)}),a.createElement(r.Bv.span,{...m(),className:"chakra-switch__track",__css:f},a.createElement(r.Bv.span,{__css:n.thumb,className:"chakra-switch__thumb","data-checked":o(p.isChecked),"data-hover":o(p.isHovered)})),d&&a.createElement(r.Bv.span,{className:"chakra-switch__label",..._(),__css:E},d))}));c.displayName="Switch"},DLZI:(e,t,n)=>{n.d(t,{A:()=>o});var a=n("/0+J"),s=n("MVPB"),r=n("4OMY"),i=(0,r.A)("api"),l=(0,r.A)("env");class o{constructor(e,t){Object.defineProperty(this,i,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.facebook=void 0,this.google=void 0,this.apple=void 0,(0,s.A)(this,i)[i]=e,(0,s.A)(this,l)[l]=t}init(e,t){var r=this;return(0,a.A)((function*(){const o=[];return(e=Array.isArray(e)?e:[e]).forEach((e=>{switch(e){case"facebook":const e=function(){var e=(0,a.A)((function*(){const{FacebookAuth:e}=yield n.e(3537).then(n.bind(n,"T53H"));r.facebook||(r.facebook=new e((0,s.A)(r,i)[i],null==t?void 0:t.facebook)),yield r.facebook.init({env:(0,s.A)(r,l)[l]})}));return function(){return e.apply(this,arguments)}}();o.push(e());break;case"google":const c=function(){var e=(0,a.A)((function*(){const{GoogleAuth:e}=yield n.e(5404).then(n.bind(n,"JtTf"));r.google||(r.google=new e((0,s.A)(r,i)[i],null==t?void 0:t.google)),yield r.google.init({})}));return function(){return e.apply(this,arguments)}}();o.push(c());break;case"apple":const d=function(){var e=(0,a.A)((function*(){const{AppleAuth:e}=yield n.e(9133).then(n.bind(n,"ALjf"));r.apple||(r.apple=new e((0,s.A)(r,i)[i],null==t?void 0:t.apple)),yield r.apple.init({})}));return function(){return e.apply(this,arguments)}}();o.push(d());break;default:return}})),Promise.allSettled(o)}))()}}},bDF2:(e,t,n)=>{n.d(t,{R2:()=>i,Fj:()=>r});var a=n("+9dH");let s=function(e){return e.CLICK="click",e.PAGE="updatepage",e}({});function r(e){var t;Object.keys(e).length&&((t=window).dataLayer||(t.dataLayer=[]),window.dataLayer.push(e))}function i(e){if(void 0===(t=e).eventcategory||void 0===t.eventaction)throw new Error("The following fields are missing or undefined: eventcategory, eventaction");var t;r((0,a.A)({event:s.CLICK},e))}},XkdG:(e,t,n)=>{n.d(t,{p:()=>u});var a=n("nKUr"),s=n("Q7m9"),r=n("IXMZ"),i=n("Ui1H"),l=n("AdN8");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=(0,r.Rf)((function(e,t){const{htmlSize:n}=e,u=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,["htmlSize"]),p=(0,r.o5)("Input",u),h=(0,i.MN)(u),m=(0,s.tJ)(h),g=(0,l.cx)("chakra-input",e.className);return(0,a.jsx)(r.Bv.input,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){o(e,t,n[t])}))}return e}({size:n},m),{__css:p.field,ref:t,className:g}))}));u.displayName="Input",u.id="Input"},G3sm:(e,t,n)=>{n.d(t,{e:()=>l});var a=n("nKUr"),s=n("IXMZ"),r=n("Q7m9");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=(0,s.Rf)(((e,t)=>(0,a.jsx)(r.eK,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i(e,t,n[t])}))}return e}({color:"text.secondary",ref:t},e))))},"2Av+":(e,t,n)=>{n.d(t,{i:()=>s});var a=n("nKUr");const s=(0,n("AGAM").w)({displayName:"FacebookIcon",viewBox:"0 0 24 24",pathSmall:[(0,a.jsx)("circle",{cx:"12",cy:"12",fill:"#fff",r:"8"}),(0,a.jsx)("path",{d:"m20 12c0-4.41824-3.5818-8-8-8-4.41824 0-8 3.58176-8 8 0 3.7517 2.58304 6.8998 6.0675 7.7645v-5.3197h-1.64958v-2.4448h1.64958v-1.0534c0-2.72292 1.2323-3.985 3.9056-3.985.5069 0 1.3815.09952 1.7392.19872v2.216c-.1888-.01984-.5168-.02976-.9241-.02976-1.3117 0-1.8186.49696-1.8186 1.78884v.8646h2.6131l-.4489 2.4448h-2.1642v5.4966c3.9613-.4784 7.0307-3.8512 7.0307-7.9414z",fill:"#0866ff"})],pathMedium:[(0,a.jsx)("circle",{cx:"12",cy:"12",fill:"#fff",r:"11"}),(0,a.jsx)("path",{d:"m23 12c0-6.07508-4.9249-11-11-11-6.07508 0-11 4.92492-11 11 0 5.1586 3.55168 9.4873 8.34284 10.6762v-7.3146h-2.2682v-3.3616h2.2682v-1.4485c0-3.74394 1.69446-5.4793 5.37016-5.4793.697 0 1.8995.13684 2.3914.27324v3.047c-.2596-.02728-.7106-.04092-1.2707-.04092-1.8035 0-2.5005.68332-2.5005 2.45958v1.1889h3.593l-.6173 3.3616h-2.9757v7.5579c5.4468-.6578 9.6672-5.2954 9.6672-10.9195z",fill:"#0866ff"})]});s.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"FacebookIcon"}},"tU3/":(e,t,n)=>{n.d(t,{A:()=>E}),n("J7II");var a,s,r=n("q1tI"),i=n("TRpf"),l=n("X6oL"),o=n("RGaU"),c=n("HmE0"),d=n("Wp0Y"),u=n("aHAS"),p=n("MbwU"),h=n("Zy2V"),m=n("qPkO"),g=n("puIx"),_=n("Yrjs"),b=n("h6Gj");let f=(0,l.Ay)()(a=class extends r.Component{constructor(e){super(e),this.state={displayMessage:null,unsubscribedChannels:[],userShowOptinList:[],nextShowsIndex:null,loadingShows:!0},this.displayedMessageTimeout=void 0,this.getSelectedOptinsForChannel=e=>this.props.optinList.filter((t=>void 0!==t.channel[e]&&t.channel[e])).length+this.state.userShowOptinList.filter((t=>void 0!==t.channel[e]&&t.channel[e])).length,this.displayMessage=e=>{this.displayedMessageTimeout&&clearTimeout(this.displayedMessageTimeout),this.setState({displayMessage:e}),this.displayedMessageTimeout=setTimeout((()=>{this.setState({displayMessage:null}),this.displayedMessageTimeout=null}),5e3)},this.onOptinValueChange=(e,t)=>{const{unsubscribedChannels:n}=this.state;this.setState({displayMessage:null,unsubscribedChannels:n.filter((e=>e!==t))});const a=this.props.optinList.find((t=>t.name===e));void 0!==a?this.props.toggleOptin(e,t).then((()=>this.displayMessage(!1===a.channel[t]&&void 0!==a.channels_requiring_validation&&a.channels_requiring_validation.includes(t)?g.l.EMAIL_SENT:g.l.OPTIN_UPDATED))).catch((()=>this.displayMessage(g.l.SAVE_FAILED))):this.setState({displayMessage:g.l.SAVE_FAILED})},this.onUnsubscribeAll=(e,t)=>{const{unsubscribedChannels:n}=this.state;n.includes(t)?this.setState({unsubscribedChannels:n.filter((e=>e!==t))}):(this.setState({displayMessage:null,unsubscribedChannels:[...n,t]}),0!==this.getSelectedOptinsForChannel(t)&&this.props.unselectAllOptins(t).then((()=>(0,b.J8)())).then((()=>{this.setState({userShowOptinList:[],nextShowsIndex:null}),this.displayMessage(g.l.OPTIN_UPDATED)})).catch((()=>this.displayMessage(g.l.SAVE_FAILED))))},this.onUserShowOptinValueChange=(e,t,n)=>{const{unsubscribedChannels:a,userShowOptinList:s}=this.state;this.setState({displayMessage:null,unsubscribedChannels:a.filter((e=>e!==t)),userShowOptinList:s.map((a=>(a.id===e&&(a.channel[t]=n),a)))});const r=()=>this.displayMessage(g.l.OPTIN_UPDATED),i=()=>this.displayMessage(g.l.SAVE_FAILED);n?(0,b.r8)(e).then(r).catch(i):(0,b.Xg)(e).then(r).catch(i)},this.onViewMoreShowsClick=()=>{const{nextShowsIndex:e}=this.state;null!==e&&(this.setState({loadingShows:!0}),(0,b.hw)(e,_.fp).then((e=>{this.setState({userShowOptinList:[...this.state.userShowOptinList,...e.userShowOptinList],nextShowsIndex:e.nextShowsIndex,loadingShows:!1})})).catch((()=>this.setState({loadingShows:!1}))),this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"podcast",eventaction:"view-more",eventcategory:"notification-preferences_notifications"}))},this.renderUnsubscribeAllGroup=()=>{const{displayChannelHeader:e}=this.props,{unsubscribedChannels:t}=this.state,n=this.channelList,a={name:"unsubscribe_all",label:(0,d.AP)("optinpreferences_text_unsubscribealldzremails_web"),description:(0,d.AP)("optinpreferences_text_inclmusicrlsespodcastslistendata_web"),group:"unsubscribe_all",channel:Object.fromEntries(n.map((e=>[e.name,t.includes(e.name)])))};return r.createElement(p.A,{key:"grp-all",group:{name:"unsubscribe_all",label:(0,d.AP)("optinpreferences_title_unsubscribeall_web"),description:""},optinList:[a],channelList:n,onOptinValueChange:this.onUnsubscribeAll,displayChannelHeader:e})},this.displayedMessageTimeout=null}componentDidMount(){this.displayShows&&(0,b.hw)(0,_.fp).then((e=>{this.setState({...e,loadingShows:!1}),this.props.tracking&&this.props.tracking.trackEvent({event:"onDisplay",eventvalue:e.userShowOptinList.length,eventlabel:"podcast",eventaction:"list-display",eventcategory:"notification-preferences_notifications"})})).catch((()=>this.setState({loadingShows:!1})))}componentWillUnmount(){this.displayedMessageTimeout&&clearTimeout(this.displayedMessageTimeout)}get channelList(){const{channelList:e,channelFilter:t}=this.props;return void 0===t?e:e.filter((e=>t.includes(e.name)))}get displayShows(){return-1!==this.channelList.findIndex((e=>e.name===_.Tn))}renderShowOptinGroup(){const{userShowOptinList:e,nextShowsIndex:t,loadingShows:n}=this.state,a=this.channelList;return r.createElement(r.Fragment,null,e.length?r.createElement(h.A,{userShowOptinList:e,channelList:a,onUserShowOptinValueChange:this.onUserShowOptinValueChange}):null,n?s||(s=r.createElement(o.k,null)):null,n||null===t?null:r.createElement(c.$n,{onClick:this.onViewMoreShowsClick,size:"small",variant:"outline","data-testid":"show-more-btn"},(0,d.AP)("Plus")))}render(){const{displayMessage:e}=this.state,{optinList:t,groupList:n,displayChannelHeader:a,displayUnsubscribeAllFooter:s}=this.props,i=this.channelList;return 0===i.length||0===t.length||0===n.length?null:r.createElement(r.Fragment,null,n.map((e=>r.createElement(r.Fragment,{key:`grp-${e.name}`},r.createElement(p.A,{key:`grp-${e.name}`,group:e,optinList:t.filter((t=>t.group===e.name)),channelList:i,onOptinValueChange:this.onOptinValueChange,displayChannelHeader:a},e.name===_.ko&&this.displayShows?this.renderShowOptinGroup():null)))),s?this.renderUnsubscribeAllGroup():null,null!==e?r.createElement(m.A,{messageType:e}):null)}})||a;const E=(0,i.Ng)((e=>({channelList:e.user.USER.OPTINS.channel,groupList:e.user.USER.OPTINS.group,optinList:e.user.USER.OPTINS.optin})),{toggleOptin:u.XD,unselectAllOptins:u.Cn})(f)},"hAh+":(e,t,n)=>{n.r(t),n.d(t,{default:()=>_t});var a,s,r=n("q1tI"),i=n("nrKQ"),l=n("X6oL"),o=n("TRpf"),c=n("Ty5D"),d=n("Wp0Y"),u=n("Vd8Q"),p=n("xobL"),h=n("FSqQ"),m=n("MTsA"),g=n("y8BT"),_=(n("/eM8"),n("IXMZ")),b=n("NSet"),f=n("HmE0"),E=n("Q7m9"),v=n("XkdG"),A=n("/o+9"),y=n("i2Ew"),S=n("YIja"),w=n("GFLz");const C=({title:e,children:t,...n})=>r.createElement(b.az,n,r.createElement(b.DZ,{as:"h2",variant:"heading.l"},e),a||(a=r.createElement(b.cG,{mt:"spacing.m",mb:"spacing.l"})),t),P=({title:e,children:t,...n})=>r.createElement(b.az,n,r.createElement(b.DZ,{as:"h3",variant:"heading.m"},e),s||(s=r.createElement(b.cG,{mt:"spacing.m",mb:"spacing.l"})),t);P.defaultProps={maxW:"container.sm",mx:"auto",w:"100%"};var x=n("TqF5");const k=({requestStatus:e,email:t,onUpdateStatus:n})=>{const a=(0,o.wA)(),s=e=>e?e.available&&null!=e&&e.requested?(0,d.AP)("requestmydatamessage_text_alreadyrequestedwaitXdays_web",{sprintf:[30],count:30}):null!=e&&e.requested&&!e.available?(0,d.AP)("requestmydatamessage_text_alreadysentandbeingprocessed_web"):void 0:"";return r.createElement(A.m,{label:s(e),"aria-label":s(e)},r.createElement(f.$n,{variant:"outline",onClick:()=>a((0,x.qf)({name:"REQUEST_MY_DATA",props:{email:t,cb:n}})),isDisabled:Boolean(e&&e.requested)},(0,d.AP)("settingspage_title_mypersonaldata_web")))};var D=n("H/eQ"),I=n("tZCQ"),N=n("pxP/"),M=n("Vsul"),T=n("Jpjb"),L=n("exUT"),R=n("fkXJ"),O=n("aHAS"),U=n("0CJU"),F=n("K5vB"),z=n("ZUSG"),j=n("2Av+"),B=n("nKUr");const q=(0,n("AGAM").w)({displayName:"GoogleIcon",viewBox:"0 0 24 24",pathSmall:[(0,B.jsx)("path",{fill:"#EA4335",d:"M12 7.167c1.18 0 2.237.406 3.07 1.2l2.283-2.284C15.967 4.793 14.157 4 12 4a7.996 7.996 0 0 0-7.147 4.407l2.66 2.063c.63-1.897 2.4-3.303 4.487-3.303Z"}),(0,B.jsx)("path",{fill:"#4285F4",d:"M19.66 12.183c0-.523-.05-1.03-.127-1.516H12v3.006h4.313a3.718 3.718 0 0 1-1.593 2.394l2.577 2c1.503-1.394 2.363-3.454 2.363-5.884Z"}),(0,B.jsx)("path",{fill:"#FBBC05",d:"M7.51 13.53A4.86 4.86 0 0 1 7.257 12c0-.533.09-1.047.253-1.53L4.85 8.407A7.971 7.971 0 0 0 4 12a7.93 7.93 0 0 0 .853 3.593L7.51 13.53Z"}),(0,B.jsx)("path",{fill:"#34A853",d:"M12 20c2.16 0 3.977-.71 5.297-1.937l-2.577-2c-.717.484-1.64.767-2.72.767-2.087 0-3.857-1.407-4.49-3.303L4.85 15.59A8.002 8.002 0 0 0 12 20Z"})],pathMedium:[(0,B.jsx)("path",{fill:"#EA4335",d:"M12 5.354c1.623 0 3.075.56 4.221 1.65l3.14-3.14C17.454 2.092 14.965 1 12 1 7.7 1 3.984 3.466 2.173 7.06l3.658 2.836C6.697 7.288 9.13 5.354 12 5.354Z"}),(0,B.jsx)("path",{fill:"#4285F4",d:"M22.532 12.252c0-.72-.068-1.416-.174-2.085H12V14.3h5.93a5.113 5.113 0 0 1-2.19 3.29l3.543 2.75c2.067-1.915 3.25-4.748 3.25-8.089Z"}),(0,B.jsx)("path",{fill:"#FBBC05",d:"M5.826 14.104A6.682 6.682 0 0 1 5.478 12c0-.733.124-1.44.348-2.104L2.17 7.06A10.96 10.96 0 0 0 1 12c0 1.778.422 3.456 1.173 4.94l3.653-2.836Z"}),(0,B.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.468-.976 7.283-2.663l-3.543-2.75c-.985.665-2.255 1.054-3.74 1.054-2.87 0-5.303-1.934-6.174-4.542L2.17 16.936C3.984 20.534 7.7 23 12 23Z"})]});q.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"GoogleIcon"};var G=n("+9dH");const V=({children:e})=>{const t=I.A.isAllowed("revamp2023")?{border:"solid 1px",borderColor:"border.neutral.primary.default"}:{shadow:"lg"};return r.createElement(b.ov,{w:"100%",h:"100%",p:"spacing.xl"},r.createElement(b.mc,(0,G.A)({background:"background.neutral.secondary.default",borderRadius:"lg",maxW:"container.lg",padding:"spacing.xl"},t),e))},J=({range:e,start:t=1,type:n,onChange:a,value:s})=>r.createElement(w.l6,{id:`birthday-${n}`,w:"100%",onChange:a,value:s},Array.from(Array(e).keys()).map((e=>(e+=t,r.createElement("option",{key:`${n}-${e}`,value:e},e))))),H=(e,t)=>new Date(e,t,0).getDate(),K=({initialDate:e,onChange:t})=>{var n,a,s;const[i,l,o]=e?e.split("-"):[],[c,u]=(0,r.useState)(null!==(n=parseInt(o,10))&&void 0!==n?n:1),[p,h]=(0,r.useState)(null!==(a=parseInt(l,10))&&void 0!==a?a:1),[m,g]=(0,r.useState)(null!==(s=parseInt(i,10))&&void 0!==s?s:1900),_=e=>n=>{const a={day:c,month:p,year:m};a[e]=parseInt(n.target.value,10);const s=H(a.year,a.month);a.day>s&&(a.day=s),u(a.day),h(a.month),g(a.year);const r=`${a.year}-${a.month}-${a.day}`;t(r)};return r.createElement(b.BJ,{direction:"row",alignItems:"center",w:"100%"},r.createElement(E.MJ,null,r.createElement(E.lR,{htmlFor:"birthday-day"},(0,d.AP)("Date de naissance")),r.createElement(b.BJ,{direction:"row",alignItems:"center",w:"100%"},r.createElement(J,{type:"day",range:H(m,p),onChange:_("day"),value:c}),r.createElement(J,{type:"month",range:12,onChange:_("month"),value:p}),r.createElement(J,{type:"year",start:1900,range:(new Date).getFullYear()-1900,onChange:_("year"),value:m}))))};var $,Y,W,X,Z,Q,ee,te=n("hz5U"),ne=n("QKMO"),ae=n("1EyH"),se=n("wE9P");const re=(0,_.Bv)(b.BJ);re.defaultProps={alignItems:"center",direction:"column",mx:"auto",spacing:"spacing.xl",w:"100%"};let ie=(0,l.Ay)()($=class extends r.Component{constructor(e){super(e),this.state={mail:e.userEmail,picture:e.data.USER_DATA.USER_PICTURE,confirmUpdate:!1,errorPayload:null,requestStatus:null},this._dayRef=r.createRef(),this._monthRef=r.createRef(),this._yearRef=r.createRef(),this._blogNameRef=r.createRef(),this._languageRef=r.createRef(),this._onSave=this._onSave.bind(this),this._onChangePicture=this._onChangePicture.bind(this),this._openConsentModal=this._openConsentModal.bind(this),this._onToggleFacebook=this._onToggleFacebook.bind(this),this._onToggleGoogle=this._onToggleGoogle.bind(this),this._onUserRequestData=this._onUserRequestData.bind(this),this._onRequestData=this._onRequestData.bind(this)}componentDidMount(){D.A.subscribe(D.A.user.updatePicture,this._onChangePicture),i.A.call({method:"user.getDataExportStatus",data:{USER_ID:this.props.userID},success:e=>{this.setState({requestStatus:e})},catch:()=>{this.setState({requestStatus:{requested:!1,available:!1}})}})}componentWillUnmount(){i.A.cancel(this._fetchApiRef),D.A.unsubscribe(D.A.user.updatePicture,this._onChangePicture)}render(){return r.createElement(V,null,r.createElement(C,{title:(0,d.AP)("Mes informations")},r.createElement(b.BJ,{direction:"column",maxW:"container.sm",mx:"auto",spacing:"spacing.xl",w:"100%"},this._renderSubscription(),this._renderCredentials(),this._renderProfileMigration(),this._renderLinkAccount(),this._renderPublicInformations(),this._renderPrivateInformations(),this._renderMessage())),!this.props.isSubProfile&&(Y||(Y=r.createElement(b.cG,{mt:"spacing.m",mb:"spacing.l"}))),!1)}_renderSubscription(){const{MANAGE_SUBSCRIPTION:e,OFFER_NAME:t}=this.props.data;let n;if(this.props.hasParent){const e=this.props.isSubAccount?(0,d.AP)("deezerfamilyprofilemigration_text_yourindependentaccountpartofuserXplanX_web",{sprintf:[t,this._getParentName()]}):(0,d.AP)("Votre profil est rattaché au compte de %s.",{sprintf:[this._getParentName()]});n=r.createElement(b.az,{color:"text.neutral.secondary.default",fontSize:"sm"},r.createElement(b.EY,{"data-testid":"offer-name",textAlign:"center"},t),r.createElement(b.EY,{textAlign:"center"},e))}else{const e=(0,d.AP)("planrenaming_text_youreenjoyingplanX_web",{sprintf:["free"===t?(0,d.AP)("deezerplans_title_deezerfree_web"):t]});n=r.createElement(b.EY,{fontSize:"sm",textAlign:"center",color:"text.neutral.secondary.default","data-testid":"offer-name"},e)}return r.createElement(b.BJ,{direction:"column",spacing:"spacing.xl",alignItems:"center"},r.createElement(b.az,{borderRadius:"full",overflow:"hidden",flex:"none"},r.createElement(F.AG,{value:{onSuccess:this._onChangePicture,onError:this._onChangePictureError}},r.createElement(U.A,{id:this.props.userID,type:"user",imgSrc:te.A.getImageSrc("user",this.state.picture,125,125),bordered:!1,forceImmediateUpload:!0,width:125,height:125,uploadCover:"on",coverLink:!1,alt:this.props.userName}))),r.createElement(b.BJ,{direction:"column"},r.createElement(b.DZ,{as:"h3",variant:"heading.l",textAlign:"center"},this.props.data.USER_DATA.BLOG_NAME),n),!this.props.hasParent&&e&&r.createElement(f.$n,{variant:"outline",onClick:this._onOpenSubscription},(0,d.AP)("Gérer mon abonnement")))}_renderCredentials(){return this.props.hasParent&&!this.props.isSubAccount?null:r.createElement(P,{title:(0,d.AP)("Connexion"),className:"account-credentials"},r.createElement(re,null,r.createElement(E.MJ,null,r.createElement(E.lR,null,(0,d.AP)("Votre E-mail :")),r.createElement(b.BJ,{direction:"row",alignItems:"center"},r.createElement(v.p,{value:this.state.mail,isDisabled:!0,w:"100%"}),!I.A.isAllowed("disable_change_email")&&r.createElement(A.m,{label:(0,d.AP)("Modifier"),"aria-label":(0,d.AP)("Modifier")},r.createElement(f.K0,{variant:"outline","aria-label":(0,d.AP)("Modifier"),onClick:this._onOpenModal.bind(this,"mail"),icon:W||(W=r.createElement(z.r,null))})))),r.createElement(E.MJ,null,r.createElement(E.lR,null,(0,d.AP)("Votre mot de passe :")),r.createElement(b.BJ,{direction:"row",alignItems:"center"},X||(X=r.createElement(v.p,{isDisabled:!0,w:"100%",value:"*****"})),!I.A.isAllowed("disable_change_password")&&r.createElement(A.m,{label:(0,d.AP)("Modifier"),"aria-label":(0,d.AP)("Modifier")},r.createElement(f.K0,{variant:"outline","aria-label":(0,d.AP)("Modifier"),onClick:this._onOpenModal.bind(this,"pwd"),icon:Z||(Z=r.createElement(z.r,null))}))))))}_renderLinkAccount(){return this.props.isSubProfile,null}_renderProfileMigration(){return this.props.isSubProfileMigrationAllowed,null}_renderConnectAction(){const{userFacebookId:e,userGoogleId:t}=this.props,n=e?(0,d.AP)("generic_action_unlinksocialaccountX_web",{sprintf:["Facebook"]}):(0,d.AP)("generic_action_connectwithsocialaccountX_web",{sprintf:["Facebook"]}),a=t?(0,d.AP)("generic_action_unlinksocialaccountX_web",{sprintf:["Google"]}):(0,d.AP)("generic_action_connectwithsocialaccountX_web",{sprintf:["Google"]});return r.createElement(b.BJ,{alignItems:"center",direction:"row",mx:"auto",spacing:"spacing.xl"},r.createElement(b.BJ,{direction:"column",spacing:"spacing.m",alignItems:"center"},r.createElement(b.EY,{variant:"body.m.default"},n),r.createElement(f.K0,{variant:"outline","aria-label":n,icon:Q||(Q=r.createElement(j.i,null)),onClick:this._onToggleFacebook})),r.createElement(b.BJ,{direction:"column",spacing:"spacing.m",alignItems:"center"},r.createElement(b.EY,{variant:"body.m.default"},a),r.createElement(f.K0,{variant:"outline","aria-label":a,icon:ee||(ee=r.createElement(q,null)),onClick:this._onToggleGoogle})))}_renderPublicInformations(){return r.createElement(P,{title:(0,d.AP)("Informations Deezer visibles par les internautes"),className:"account-public"},r.createElement(re,null,r.createElement(E.MJ,null,r.createElement(E.lR,{htmlFor:"sexe_m",mb:"3"},I.A.isAllowed("gender_nonbinary")?(0,d.AP)("genderscreen_title_iidentifyas_web"):(0,d.AP)("Genre")),r.createElement(y.z6,{defaultValue:this.props.data.USER_DATA.SEX},r.createElement(b.BJ,{direction:"row",alignItems:"center",spacing:"6"},r.createElement("label",{htmlFor:"sexe_m"},r.createElement(y.sx,{id:"sexe_m",name:"sex",value:"M",type:"radio"},(0,d.AP)("genderoption_text_male_web"))),r.createElement("label",{htmlFor:"sexe_f"},r.createElement(y.sx,{id:"sexe_f",name:"sex",value:"F",type:"radio"},(0,d.AP)("genderoption_text_female_web"))),I.A.isAllowed("gender_nonbinary")&&r.createElement("label",{htmlFor:"sexe_nb"},r.createElement(y.sx,{id:"sexe_nb",name:"sex",value:"NonBinary",type:"radio"},(0,d.AP)("genderoption_text_nonbinary_web")))))),r.createElement(E.MJ,null,r.createElement(E.lR,{htmlFor:"blog_name"},(0,d.AP)("Pseudo")),r.createElement(v.p,{id:"blog_name",name:"blog_name",ref:this._blogNameRef,type:"text",defaultValue:this.props.data.USER_DATA.BLOG_NAME,w:"100%"}))))}_renderPrivateInformations(){var e;return r.createElement(r.Fragment,null,r.createElement(P,{title:(0,d.AP)("Informations privées"),className:"account-private"},r.createElement(re,null,r.createElement(b.BJ,{direction:"row"},!this.props.isKid&&r.createElement(f.$n,{variant:"outline",onClick:this._openConsentModal},(0,d.AP)("trackingconsent_action_opensettings_web")),I.A.isAllowed("request_my_data")&&r.createElement(k,{requestStatus:this.state.requestStatus,email:this.state.mail,onUpdateStatus:this._onUserRequestData})),r.createElement(K,{initialDate:this.props.data.USER_DATA.BIRTHDAY,onChange:e=>this.setState({date:e})}),null,r.createElement(b.az,null,r.createElement(f.$n,{onClick:this._onSave},(0,d.AP)("Enregistrer"))))),(null===(e=this.state.requestStatus)||void 0===e?void 0:e.available)&&!1,this.props.data.hasExtractData&&!1)}_renderMessage(){if(!this.state.confirmUpdate)return null;let e,t;switch(this.state.confirmUpdate){case"success":t="success",e=(0,d.AP)("Vos données ont été mises à jour.");break;case"min_legal_age":t="error",e=(0,d.WI)("formerrormessage_text_accountcreationagerestriction_web","formerrormessage_text_accountcreationagerestriction_web",{sprintf:[this.state.errorPayload.age],count:this.state.errorPayload.age});break;case"blogname_not_valid":case"no_emoji_blogname":t="error",e=(0,d.AP)("errormessage_text_usernamecannotcontainsemojis_web");break;case"pwd_updated":t="success",e=(0,d.AP)("Votre mot de passe a été modifié avec succès.");break;case"email_updated":t="success",e=(0,d.AP)("Votre adresse email a été mise à jour.");break;default:t="error",e=(0,d.AP)("Vos données n'ont pas été mises à jour.")}return r.createElement(S.N,{status:t},e)}_renderSelectLanguage(){for(var e=[],t=this.props.data.LANGUAGES,n=0,a=t.length;n<a;n++)e.push(r.createElement("option",{key:n,value:t[n].code},t[n].label));return r.createElement(w.l6,{id:"language",ref:this._languageRef,defaultValue:this.props.userLang,w:"100%"},e)}_renderSelectDate(e){const t=this._yearRef.current?this._yearRef.current.value:1900,n=this._monthRef.current?this._monthRef.current.value:1;for(var a={day:{start:1,end:new Date(t,n,0).getDate()},month:{start:1,end:12},year:{start:1900,end:(new Date).getFullYear()-1}},[s,i,l]=this.props.data.USER_DATA.BIRTHDAY.split("-"),o={year:s,month:i,day:l},c=[],d=a[e].start,u=a[e].end;d<=u;d++)c.push(r.createElement("option",{key:d,value:(0,ne.A)(d,2)},(0,ne.A)(d,2)));return r.createElement(w.l6,{id:"birthday",ref:this[`_${e}Ref`],defaultValue:o[e],w:"100%"},c)}_onSave(){const{valid:e,errorCode:t}=this._verifyFormFields();if(!e)return void this.setState({confirmUpdate:t,errorPayload:t});const n=document.querySelector('input[name="sex"]:checked')?document.querySelector('input[name="sex"]:checked').value:"",a=this._languageRef.current?this._languageRef.current.value.trim():"",s=a&&a!==this.props.userLang,r={USER_DATA:{}};this.state.date&&(r.USER_DATA.BIRTHDAY=this.state.date),n.length>0&&n!==this.props.data.USER_DATA.SEX&&(r.USER_DATA.SEX=n),this._blogNameRef.current.value.trim()&&this._blogNameRef.current.value.trim()!==this.props.userName&&(r.USER_DATA.BLOG_NAME=this._blogNameRef.current.value.trim()),s&&(r.LANG=a),this._fetchApiRef=i.A.call({method:"user.update",data:r,success:e=>{s&&(N.A.href=`/lang?lang=${a}&redirect=/account`),this.props.updateUserName(this._blogNameRef.current.value.trim()),this.setState({confirmUpdate:e?"success":"error"})},error:e=>{this.setState({confirmUpdate:e.message||"error",errorPayload:e.payload||null})}})}_onToggleFacebook(){if(!this.props.userFacebookId)return L.A.linkAccount({profile_migration:this.props.isSubProfile}),void this._onLogMigration("facebook");L.A.unlinkAccount({profile_migration:this.props.isSubProfile})}_onToggleGoogle(){if(!this.props.userGoogleId)return this._onLogMigration("google"),void T.A.linkAccount({profile_migration:this.props.isSubProfile});T.A.unlinkAccount()}_onLogMigration(e){this.props.isSubProfileMigrationAllowed&&this.props.tracking.trackEvent({eventaction:"convert-independent-account",eventcategory:"family-account-management",event:"click",eventlabel:e})}_onOpenSubscription(){(0,M.A)("/account/subscription")}async _onOpenModal(e){const t=await this._getIsSecuredSessionRequired();(null==t?void 0:t.change_email)||(null==t?void 0:t.change_password)?this._openCodeRequest(e):this._openCredentialsUpdate(e),"mail"===e&&D.A.subscribeOnce(D.A.user.updateEmail,((e,t)=>{this.setState({mail:t.email,confirmUpdate:"email_updated"}),(0,se.u)().identify({email:t.email})})),"pwd"===e&&D.A.subscribeOnce(D.A.user.updatePassword,(()=>{this.setState({confirmUpdate:"pwd_updated"})}))}_getIsSecuredSessionRequired(){return new Promise(((e,t)=>{i.A.call({method:"user.isSecuredSessionRequired",data:{USER_ID:this.props.userID},success:t=>{e(t)},error:e=>{t(e)}})}))}_downloadData(){i.A.call({method:"user.getDataExportLink",success:e=>{e.link&&(N.A.href=e.link)},catch:()=>{(0,R.A)({body:(0,d.AP)("errormessage_text_anerroroccurredpleasetryagain_web")})}})}async _onRequestData(){const e=await this._getIsSecuredSessionRequired();null!=e&&e.data_request?this._openCodeRequest("dl_data",this._downloadData):this._downloadData()}_onUserRequestData(){this.setState({requestStatus:{requested:!0,available:!1}})}_onChangePicture(e){this.setState({picture:e}),this.props.updateUserPicture(e)}_onChangePictureError(){(0,R.A)({body:(0,d.AP)("Une erreur est survenue, merci de réessayer plus tard.")})}_verifyFormFields(){let e,t=!0;const n=this._blogNameRef.current.value.trim();return((0,ae.Sx)(n)||(0,ae.BB)(n))&&(t=!1,e="no_emoji_blogname"),{valid:t,errorCode:e}}_openCodeRequest(e,t){this.props.openModal({name:"CODE_REQUEST",props:{email:this.state.mail,requestType:e,...t&&{cb:t}},size:"small"})}_openCredentialsUpdate(e){this.props.openModal({name:"mail"===e?"UPDATE_EMAIL":"UPDATE_PASSWORD",size:"small"})}_getParentName(){return""===this.props.data.PARENT_USER_DATA.FIRSTNAME&&""===this.props.data.PARENT_USER_DATA.LASTNAME?this.props.data.PARENT_USER_DATA.BLOG_NAME:`${this.props.data.PARENT_USER_DATA.FIRSTNAME} ${this.props.data.PARENT_USER_DATA.LASTNAME}`}_openConsentModal(){window.consentScreenApi&&window.consentScreenApi.openPreferences(3,"purposes")}})||$;const le=(0,o.Ng)((({user:e})=>({userEmail:(0,p.hS)(e),userID:e.id,userLang:e.SETTING_LANG,userName:(0,p.Mn)(e),userFacebookId:(0,p.$u)(e),userGoogleId:(0,p.md)(e),isKid:(0,p.zI)(e),hasParent:(0,p.p7)(e),isSubAccount:(0,p.m0)(e),isSubProfile:(0,p.W$)(e),isSubProfileMigrationAllowed:(0,p.Q6)(e)})),{openModal:x.qf,closeModal:x.Oo,updateUserPicture:O.Ff,updateUserName:O.Km})(ie);var oe=n("8tvI");class ce extends r.Component{constructor(...e){super(...e),this.state={updatedOptin:null,showNotif:!1}}render(){return r.createElement(V,null,r.createElement(b.BJ,{direction:"column",spacing:"spacing.xl",className:"account-wrapper"},this._renderSocial(),this._renderSettings()))}_renderSocial(){return null}_renderSettings(){return r.createElement(C,{title:(0,d.AP)("Je souhaite :")},r.createElement(b.BJ,{as:"form",direction:"column",className:"form-horizontal"},r.createElement(oe.Sc,{isChecked:!this.props.userSettings.global.social,onChange:this._onChangeSetting.bind(this,"global","social"),isDisabled:this.props.isKid,size:"sm"},this.props.data.USER_SETTINGS_LABEL.global.social),this._renderPopupUnload()))}_renderPopupUnload(){return null}async _onChangeSetting(e,t,n){n.preventDefault();const a=!this.props.userSettings[e][t];await this.props.updateSettings({[e]:{[t]:Number(a)}})}}const de=(0,o.Ng)((({user:e})=>({userSettings:e.USER.SETTING,isKid:(0,p.zI)(e)})),{updateSettings:O.Xx})(ce);var ge,ue=n("wm29"),pe=n("Qx5r"),he=n("g1Fm"),me=n("Caim");const _e={"device_android_mobile.png":n.p+"images/device/device_android_mobile.ab12a24585dea551e56d.png","device_android_tablet.png":n.p+"images/device/device_android_tablet.20bf3a3be0d8bd4ce72d.png","device_ipad.png":n.p+"images/device/device_ipad.0e255db9c2d9a4aeba29.png","device_iphone.png":n.p+"images/device/device_iphone.0df04eb92efd7e29338c.png"};class be extends r.Component{constructor(...e){super(...e),this.state={deletedDevices:[]}}componentWillUnmount(){i.A.cancel(this._fetchApiRef)}get devices(){return(this.props.data.USER_DEVICE_SERIALS?this.props.data.USER_DEVICE_SERIALS.data:[]).filter((e=>!this.state.deletedDevices.includes(e.USER_DEVICE_SERIAL_ID)))}render(){return r.createElement(V,null,0===this.devices.length?this._renderPlaceholder():this._renderDevice())}_renderPlaceholder(){return r.createElement(b.BJ,{direction:"column"},r.createElement(b.EY,{fontSize:"sm"},(0,d.AP)("Vous n'avez actuellement aucun appareil connecté à ce compte.")),r.createElement(b.EY,{color:"text.secondary",fontSize:"xs"},(0,d.AP)("Pour en ajouter un, connectez-vous avec votre appareil sur l'application Deezer.")))}_renderDevice(){return r.createElement("div",null,r.createElement(C,{title:(0,d.AP)("Votre compte Deezer est actuellement relié aux appareils suivants :")},r.createElement(ue.XI,null,r.createElement(ue.NN,null,this.devices.map(((e,t)=>{if(t>=this.props.data.MAX_NB_DEVICES)return null;let n=e.DEVICE_NAME?(0,he.A)(e.DEVICE_NAME):(0,he.A)(e.NAME);e.DEVICE_OS&&(n+=` - ${e.DEVICE_OS}`);const a=(0,me.A)(new Date(e.DATE.replace(" ","T")).getTime()/1e3,!0,"/",!1),s=e.LAST_CONNECTION?`${(0,d.AP)("Dernière connexion")} ${(0,me.A)(new Date(e.LAST_CONNECTION.replace(" ","T")).getTime()/1e3,!0,"/",!1)}`:"";return r.createElement(ue.Tr,{key:e.DEVICE_SERIAL},r.createElement(ue.Td,null,r.createElement("img",{src:_e[e.PICTURE],alt:e.DEVICE_OS})),r.createElement(ue.Td,null,r.createElement(b.EY,{variant:"body.2xs.default"},n),r.createElement(b.EY,{variant:"body.2xs.default"},(0,d.AP)("Ajouté le %s",{sprintf:[a]})),r.createElement(b.EY,{variant:"body.2xs.default"},s)),r.createElement(ue.Td,null,r.createElement(A.m,{label:(0,d.AP)("Supprimer l'appareil"),"aria-label":(0,d.AP)("Supprimer l'appareil")},r.createElement(f.K0,{variant:"outline","aria-label":(0,d.AP)("Supprimer l'appareil"),onClick:this._onRemoveDevice.bind(this,e.USER_DEVICE_SERIAL_ID),icon:ge||(ge=r.createElement(pe.u,null))}))))}))))),r.createElement(b.EY,{pt:"spacing.m",variant:"body.2xs.default",className:"device-limit",dangerouslySetInnerHTML:{__html:(0,d.WI)("Votre compte Deezer ne peut être relié qu'à un seul appareil.","Votre compte Deezer peut être relié à %s appareils maximum.",{sprintf:['<strong class="nb-device-limit">'+this.props.data.MAX_NB_DEVICES+"</strong>"],count:this.props.data.MAX_NB_DEVICES})}}))}_onRemoveDevice(e){confirm((0,d.AP)("Voulez-vous réellement supprimer cet appareil ?"))&&(this._fetchApiRef=i.A.call({method:"device.deleteSerial",data:{serial:e},success:t=>{if(t){const{deletedDevices:t}=this.state;this.setState({deletedDevices:[...t,e]})}}}))}}const fe=be;var Ee=n("WKgy"),ve=n("LjZa"),Ae=n("7sx+"),ye=n("r2u9");const Se="UPDATED_IS_OPEN_AT_LOGIN",we={isOpenAtLogin:!0,isOpenAsHidden:!1};var Ce=n("shsj"),Pe=n("eh3h"),xe=n("G3sm");const ke={updateSetting:O.bB},De=(0,o.Ng)((({user:e})=>({active:(0,p.AU)(e)})),ke)((e=>{const{active:t,updateSetting:n}=e;return r.createElement("div",{className:"explicit-settings-container"},r.createElement(E.MJ,null,r.createElement(b.so,{alignItems:"center"},r.createElement(E.lR,{mb:"0",color:"text.main"},(0,d.AP)("Notifications de bureau")),r.createElement(Pe.d,{className:"setting-input-item",isChecked:t,onChange:()=>n(!t)})),r.createElement(xe.e,{fontSize:"xs",mt:0},(0,d.AP)("Afficher une notification sur le bureau lorsqu'un nouveau titre commence."))))}));var Ie,Ne=n("CyAC"),Me=n("sAMA"),Te=n("0+YM");class Le extends r.Component{constructor(e){super(e),this.handleChangeFirstLevel=this.handleChangeFirstLevel.bind(this),this.handleChangeSecondLevel=this.handleChangeSecondLevel.bind(this),this.setExplicitLevel=this.setExplicitLevel.bind(this),this.state={isExplicitToggle:!1}}setExplicitLevel(e,t,n){return{EXPLICIT_CONTENT_LEVEL:e?t:n}}handleChangeFirstLevel(e){this.props.updateUserExplicitLevel(this.setExplicitLevel(e,Me.Nq,Me.Mt)),this.setState({isExplicitToggle:!0})}handleChangeSecondLevel(e){this.props.updateUserExplicitLevel(this.setExplicitLevel(e,Me.g,Me.Nq)),this.setState({isExplicitToggle:!0})}render(){return r.createElement(r.Fragment,null,this._renderFirstLevel(),this._renderSecondLevel(),this._renderToggleInformation())}_renderFirstLevel(){const{userLevel:e,availableLevels:t}=this.props;if(!(0,Ne.ek)(Me.Mt,t))return null;const n=e!==Me.Mt;return r.createElement("div",{className:"explicit-settings-container"},r.createElement(E.MJ,null,r.createElement(b.so,{alignItems:"center"},r.createElement(E.lR,{mb:"0",color:"text.main"},(0,d.AP)("settingspage_title_donotrecommendexplicitcontent_web")),this._renderCheckbox(n,this.handleChangeFirstLevel)),r.createElement(xe.e,{fontSize:"xs",mt:0},(0,d.AP)("settingspage_subtitle_explicitcontentexcludedfromreco_web"))))}_renderSecondLevel(){const{userLevel:e}=this.props;if(e===Me.Mt)return null;const t=e===Me.g;return r.createElement("div",{className:"explicit-settings-container"},r.createElement(E.MJ,null,r.createElement(b.so,{alignItems:"center"},r.createElement(E.lR,{mb:"0",color:"text.main"},(0,d.AP)("settingspage_title_hideexplicitcontent_web")),this._renderCheckbox(t,this.handleChangeSecondLevel)),r.createElement(xe.e,{fontSize:"xs",mt:0},(0,d.AP)("settingspage_subtitle_explicitcontentnotrecoplayablesearchable_web"))))}_renderToggleInformation(){const{isExplicitToggle:e}=this.state;return e?r.createElement(Te.Fc,{mt:4,"data-testid":"explicit-update-delay-info"},Ie||(Ie=r.createElement(Te._0,null)),r.createElement(Te.TN,null,(0,d.AP)("warningmessage_text_updatemighttakeafewhours_web"))):null}_renderCheckbox(e,t){const{isEditableExplicitLevel:n}=this.props,a=r.createElement(Pe.d,{isChecked:e||!n,isDisabled:!n,onChange:e=>{var n;return t(null==e||null===(n=e.target)||void 0===n?void 0:n.checked)}});return n?a:r.createElement(A.m,{label:(0,d.AP)("infomessage_text_explicitcontentturnedoffbyadmin_web",{sprintf:[(0,d.AP)("deezerplans_title_deezerfamily_web")]})},a)}}const Re={updateUserExplicitLevel:O.xf},Oe=(0,o.Ng)((e=>({userLevel:(0,p.Uw)(e.user),availableLevels:(0,p.n3)(e.user),isEditableExplicitLevel:(0,p.Kw)(e.user)})),Re)(Le);var Ue,Fe;const ze=(0,o.Ng)((function(e){return{availableExplicitLevels:(0,p.n3)(e.user)}}))((({availableExplicitLevels:e})=>r.createElement(C,{title:(0,d.AP)("settingspage_title_displaysettings_web")},e.length>0?Ue||(Ue=r.createElement(Oe,null)):null,Fe||(Fe=r.createElement(De,null)))));function je(e,t=2){if(0===e)return"0 Bytes";const n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}var Be,qe,Ge,Ve;class Je extends r.Component{constructor(e){super(e),this._clearAll=()=>{Ae.default.clear().then((()=>this.getStorageStats()))},this.props.updateData(),this.state={quota:0,usageCache:0,usageDownloaded:0}}async componentDidMount(){await this.getStorageStats()}async getStorageStats(){const{user:e,ua:t}=await Ae.default.estimate();this.setState({usageCache:e.usage.cached,usageDownloaded:e.usage.persisted,quota:t?t.quota:e.quota})}render(){return r.createElement(V,null,r.createElement(b.Tk,{spacing:"spacing.xl",alignItems:"flex-start"},this._renderCache(),Be||(Be=r.createElement(ze,null)),this._renderOtherSettings()))}_renderCache(){const e=Math.max(Math.round(this.state.usageCache/this.state.quota*100)||0,0),t=Math.max(Math.round(this.state.usageDownloaded/this.state.quota*100)||0,0);return r.createElement(C,{title:(0,d.AP)("settings_title_diskusage_web")},r.createElement(b.Tk,{spacing:"spacing.l"},r.createElement("div",{className:"progress progress-bar-origin"},r.createElement("div",{className:"progress-bar progress-bar-cache",role:"progressbar",style:{width:e+"%"},"aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"100"}),r.createElement("div",{className:"progress-bar progress-bar-downloads",role:"progressbar",style:{width:t+"%"},"aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100"})),r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,qe||(qe=r.createElement("td",{className:"setting-legend-cell"},r.createElement("div",{className:"progress-bar-cache progress-bar-legend"}))),r.createElement("td",{className:"setting-legend-cell"},r.createElement("span",{className:"setting-cache-label"},(0,d.AP)("Smart Cache"))),r.createElement("td",{className:"setting-legend-cell"},r.createElement("span",{className:"setting-cache-used setting-input"},je(Math.max(this.state.usageCache||0,0))))),r.createElement("tr",null,Ge||(Ge=r.createElement("td",{className:"setting-legend-cell"},r.createElement("div",{className:"progress-bar-downloads progress-bar-legend"}))),r.createElement("td",{className:"setting-legend-cell"},r.createElement("span",{className:"setting-cache-label"},(0,d.AP)("desktopapp_title_downloads_web"))),r.createElement("td",{className:"setting-legend-cell"},r.createElement("span",{className:"setting-cache-used setting-input"},je(Math.max(this.state.usageDownloaded||0,0))))),r.createElement("tr",null,Ve||(Ve=r.createElement("td",{className:"setting-legend-cell"},r.createElement("div",{className:"progress-bar-origin progress-bar-legend"}))),r.createElement("td",{className:"setting-legend-cell"},r.createElement("span",{className:"setting-cache-label"},(0,d.AP)("diskusage_title_available_web"))),r.createElement("td",{className:"setting-legend-cell"},r.createElement("span",{className:"setting-cache-used setting-input"},je(Math.max(this.state.quota-(this.state.usageCache+this.state.usageDownloaded)||0,0))))))),r.createElement("div",{className:"setting-action"},r.createElement("div",{className:"setting-action-item"},r.createElement(f.$n,{onClick:this._clearAll},(0,d.AP)("diskusage_action_clearall_web"))))))}_renderOtherSettings(){const{isOpenAtLogin:e}=this.props;return r.createElement(C,{title:(0,d.AP)("Autre")},r.createElement(E.MJ,null,r.createElement(b.so,{alignItems:"center"},r.createElement(E.lR,null,(0,d.AP)("Lancer Deezer au démarrage")),r.createElement(Pe.d,{className:"setting-input-item",isChecked:e,onChange:()=>this.props.setOpenAtLogin(!e)}))))}}Je.defaultProps={cachePath:null,setCachePath:ve.A},Ee.A.addReducers({electronSettings:function(e=we,t={}){switch(t.type){case Se:return{...e,isOpenAtLogin:t.isOpenAtLogin};case"UPDATED_IS_OPEN_AS_HIDDEN":return{...e,isOpenAsHidden:t.isOpenAsHidden};default:return e}}});const He={setOpenAtLogin:e=>t=>{ye.Ay.setAutoStart(e),t({type:Se,isOpenAtLogin:e})},updateData:()=>e=>{e({type:Se,isOpenAtLogin:ye.Ay.isOpenAtLogin()})}},Ke=(0,o.Ng)((({electronSettings:e,cache:t})=>({cached:(0,Ce.oC)(t),isOpenAtLogin:e.isOpenAtLogin,isOpenAsHidden:e.isOpenAsHidden})),He)(Je);var $e;const Ye=()=>$e||($e=r.createElement(V,null,r.createElement(ze,null)));var We,Xe=n("tU3/");const Ze=()=>We||(We=r.createElement(V,null,r.createElement(Xe.A,null)));n("W8Tb");var Qe=n("6EMc"),et=n("70bL");class tt extends r.Component{constructor(e){super(e),this.state={currentCountry:e.userRecoCountry},this._handleChange=this._handleChange.bind(this)}render(){return r.createElement(V,null,r.createElement(C,{title:(0,d.AP)("countryselector_title_countryselector_web")},r.createElement(E.MJ,null,r.createElement(E.lR,{htmlFor:"recommendation-country"},(0,d.AP)("countryselector_title_chooseyourcountry_web")),this._renderSelectCountry(),r.createElement(xe.e,{fontSize:"xs",mt:4},(0,d.AP)("countryselector_text_chgecountryasoftenasyouwant_web")),r.createElement(xe.e,{fontSize:"xs",mt:"0"},(0,d.AP)("countryselector_text_fewhourstoapplychanges_web")))))}_renderSelectCountry(){const{data:e}=this.props,t=e.COUNTRIES||null;if(!Array.isArray(t))return null;t.sort((function(e,t){return(0,Qe.A)(e.label.toLowerCase(),t.label.toLowerCase())}));const n=t.map((e=>r.createElement("option",{key:e.code,value:e.code},e.label)));return r.createElement(w.l6,{id:"recommendation-country",value:this.state.currentCountry,onChange:this._handleChange,isDisabled:!this.props.isOnline,maxW:"300px"},n)}_handleChange(e){this.setState({currentCountry:e.target.value}),this.props.setRecoCountry(e.target.value).catch((()=>{(0,R.A)({body:(0,d.AP)("Une erreur est survenue, merci de réessayer plus tard.")}),this._resetCurrentCountry()}))}_resetCurrentCountry(){this.setState({currentCountry:this.props.userRecoCountry})}}const nt=(0,o.Ng)((e=>({isOnline:(0,et.sc)(e),userRecoCountry:(0,p.kY)(e)})),{setRecoCountry:O.Iy})(tt);var at=n("6vRd");const st=()=>{const e=(0,o.d4)(et.sc),[t,n]=r.useState(!1),[a,s]=(0,o.d4)((e=>[(0,p.F6)(e.user),(0,p.Mn)(e.user)]));return r.createElement(V,null,r.createElement(C,{title:(0,d.AP)("libraryimporter_title_transferyourfavorites_web")},r.createElement(b.so,{justifyContent:"space-between",width:"100%"},r.createElement(b.EY,{fontSize:"md"},(0,d.AP)("libraryimporter_text_moveplaylistsandfavoritestodzr_web")),r.createElement(f.$n,{onClick:async()=>{n(!0);const e=await(0,at.r)(a,s,!0).catch((()=>(0,R.A)({body:(0,d.AP)("Une erreur est survenue, merci de réessayer plus tard.")})));e&&open(e),n(!1)},isDisabled:t||!e},(0,he.A)((0,d.AP)("libraryimporter_action_selectaserviceUPP_web"),!0)))))},rt={apps:"apps",countrySelector:"country_selector",devices:"devices",display:"display",home:"home",notifications:"notifications",settings:"settings",share:"share",libraryTransfer:"transfer"},it=[rt.share,rt.devices,rt.apps,rt.countrySelector,rt.home];var lt,ot,ct,dt,ut;class pt extends r.Component{constructor(e){super(e),this._onTabClick=this._onTabClick.bind(this)}render(){return r.createElement("div",{id:"page_account"},r.createElement(m.A,{items:this._getTabList(),active:this.props.tab}),this._renderTabContent())}_renderTabContent(){const{data:e,isFetching:t,tab:n}=this.props;if(t)return lt||(lt=r.createElement(h.A,null));switch(n){case rt.countrySelector:return r.createElement(nt,{data:e});case rt.devices:return r.createElement(fe,{data:e});case rt.display:return ot||(ot=r.createElement(Ye,null));case rt.home:return r.createElement(le,{data:e});case rt.notifications:return r.createElement(Ze,{data:e});case rt.share:return r.createElement(de,{data:e});case rt.settings:return ct||(ct=r.createElement(Ke,null));case rt.libraryTransfer:return dt||(dt=r.createElement(st,null));default:return ut||(ut=r.createElement(g.A,null))}}_onTabClick(e){if(e.id===rt.apps)window.open(`https://${u.default.get("host_account")}/apps/`,"_blank");else{const t=e.id===rt.home?"":"/"+e.id;this.props.history.push("/account"+t)}}_getTabList(){const{userIsKid:e,userOptins:t}=this.props;return[{id:rt.home,label:(0,d.AP)("Mes informations"),action:this._onTabClick},{id:rt.notifications,label:(0,d.AP)("optinpreferences_title_notificationpreferences_web"),action:this._onTabClick,disabled:0===t.channel.length||0===t.optin.length},{id:rt.devices,label:(0,d.AP)("Mes appareils connectés"),action:this._onTabClick},{id:rt.apps,label:(0,d.AP)("Mes Applications"),action:this._onTabClick,disabled:!0},{id:rt.display,label:(0,d.AP)("settingspage_title_displaysettings_web"),action:this._onTabClick,disabled:!0},{id:rt.settings,label:(0,d.AP)("Paramètres de l'application"),action:this._onTabClick,disabled:!1},{id:rt.share,label:(0,d.AP)("optinpreferences_title_sharingpreferences_web"),action:this._onTabClick},{id:rt.countrySelector,label:(0,d.AP)("countryselector_title_countryselector_web"),action:this._onTabClick},{id:rt.libraryTransfer,label:(0,d.AP)("libraryimporter_title_transferyourfavorites_web"),action:this._onTabClick,disabled:e}]}}pt.defaultProps={data:null};const ht=(0,c.y)((0,o.Ng)((e=>({userIsKid:(0,p.zI)(e.user),userOptins:e.user.USER.OPTINS})))(pt));var mt,gt;let _t=(0,l.Ay)({event:"updatepage",pagename:"account_management",pagecategory:"account_management"})(((gt=class extends r.Component{constructor(e){super(e),this.state={isFetching:!1,data:e.appState||null,error:null,tab:e.match.params.tab||rt.home}}static getDerivedStateFromProps(e,t){const n=e.match.params.tab||rt.home;return n!==t.tab?{data:null,tab:n}:null}componentDidMount(){this.state.data||this._fetchData(this.state.tab)}componentDidUpdate(){this.state.data||this.state.isFetching||this._fetchData(this.state.tab)}componentWillUnmount(){i.A.cancel(this._fetchPageApiRef)}render(){const{data:e,error:t,isFetching:n,tab:a}=this.state;if(t)throw t;return r.createElement(ht,{data:e,tab:a,isFetching:null===e||n})}_fetchData(e){this._isTabAllowed(e)&&(it.includes(e)?(this.setState({isFetching:!0}),this._fetchPageApiRef=i.A.call({method:"deezer.pageAccount",data:{tab:e},success:e=>{this.setState({isFetching:!1,data:e})},error:e=>{this.setState({isFetching:!1,error:e})}})):this.setState({data:{}}))}_isTabAllowed(e){return Object.values(rt).includes(e)}}).displayName="account",gt.defaultProps={appState:null},mt=gt))||mt},y8BT:(e,t,n)=>{n.d(t,{A:()=>u});var a,s=n("q1tI"),r=n("TRpf"),i=n("GkjM"),l=n("Wp0Y"),o=n("WmA5"),c=n("HmE0");class d extends s.Component{constructor(e){super(e),this._onClick=this._onClick.bind(this)}render(){const{userID:e,userLang:t}=this.props,n=(0,l.AP)("Pour profiter du meilleur de Deezer, jetez un œil à nos <a %1$s>Univers</a> ou à <a %2$s>vos Coups de cœur</a>.",{sprintf:[`href="/${t}/channels/explore"`,`href="/${t}/profile/${e}/loved"`]});return s.createElement("div",{className:"naboo-not-found"},a||(a=s.createElement("div",{className:"title"},"404")),s.createElement("div",{className:"unavailable"},(0,l.AP)("Désolé, nous ne trouvons pas la page que vous recherchez")),s.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:n},onClick:this._onClick}),s.createElement(c.$n,{as:i.A,to:`/${this.props.userLang}/`},(0,l.AP)("Explorer")))}_onClick(e){const t=e.target;"a"===t.tagName.toLowerCase()&&(o.A.replace(t.getAttribute("href")),e.preventDefault())}}const u=(0,r.Ng)((({user:e})=>({userID:e.id,userLang:e.SETTING_LANG})))(d)},FSqQ:(e,t,n)=>{n.d(t,{A:()=>i});var a,s=n("q1tI"),r=n("juqV");class i extends s.Component{render(){const{className:e}=this.props;let t=(0,r.A)("loader-container",e);return s.createElement("div",{className:t,"data-testid":"loader"},a||(a=s.createElement("div",{className:"loader animate-spin"})))}}},MTsA:(e,t,n)=>{n.d(t,{A:()=>h});var a,s,r=n("q1tI"),i=n("juqV"),l=n("Wp0Y"),o=n("H/eQ"),c=n("GPus"),d=n("yCtO"),u=n("NSet");class p extends r.Component{constructor(e){super(e),this._onResize=this._onResize.bind(this),this._onToggleDropDown=this._onToggleDropDown.bind(this),this.state={items:e.items,lastVisibleElementIndex:1/0,isOpenDropDown:!1}}componentDidMount(){this._getTabWidth(),o.A.subscribe(o.A.layout.resize,this._onResize),o.A.subscribe(o.A.layout.adsBackground,this._onResize),o.A.trigger(o.A.navigation.tab_displayed,{type:this.props.active})}UNSAFE_componentWillReceiveProps(e){this.setState({lastVisibleElementIndex:1/0,items:e.items},this._getTabWidth)}componentWillUnmount(){o.A.unsubscribe(o.A.layout.resize,this._onResize),o.A.unsubscribe(o.A.layout.adsBackground,this._onResize)}render(){const e=(0,i.A)({navbar:!0,"navbar-center":"center"===this.props.align});return r.createElement("nav",{className:e},r.createElement("div",{style:this.props.style,className:"container"},r.createElement("ul",{className:"navbar-nav",ref:e=>this._navbarLinks=e,role:"tablist"},this._renderList())))}_renderList(){const e=[],{items:t,lastVisibleElementIndex:n}=this.state;for(let a=0,s=t.length;a<s;a++)if(!t[a].disabled){if(!(a<n)){e.push(this._renderViewMore(a));break}e.push(this._renderItem(a))}return e}_renderItem(e,t=!1){const{active:n,textSize:a}=this.props,s=this.state.items[e],l=(0,i.A)({"navbar-item":!t,"dropdown-item":t,active:n===s.id}),o=s.isButton&&n!==s.id,c=(0,i.A)({"navbar-link":!t,"navbar-button":o}),d=n===s.id?void 0:this._onItemClick.bind(this,s);return r.createElement("li",{key:s.id,className:l},r.createElement(u.EY,{as:"a",color:o?"white":"text.secondary",fontWeight:n===s.id?"semibold":"normal",_hover:{color:o?"white":"text.main"},className:c,role:"tab",tabIndex:"0","aria-selected":n===s.id,onClick:d,onKeyDown:d,"data-testid":`${s.id}-tab`,variant:{large:"body.l.default",medium:"body.m.default"}[a]},s.label))}_renderViewMore(e){const{isOpenDropDown:t,items:n,lastVisibleElementIndex:o}=this.state,p=(0,i.A)("navbar-item","navbar-dropdown",{"dropdown-active":t}),h=[];for(let t=e,a=n.length;t<a;t++)n[t].disabled||h.push(this._renderItem(t,!0));return r.createElement("li",{className:p,key:"viewmore_"+o},r.createElement(u.EY,{as:"button",color:"text.secondary",_hover:{color:"text.main"},className:"navbar-link",type:"button","data-testid":"more_button",onClick:this._onToggleDropDown},(0,l.AP)("Plus"),t?a||(a=r.createElement(c.o,{marginStart:"5px",marginTop:"3px"})):s||(s=r.createElement(d.e,{marginStart:"5px",marginTop:"3px"}))),r.createElement("ul",{className:"dropdown-menu is-right"},h))}_onToggleDropDown(e){if(e.stopPropagation(),void 0!==e.keyCode&&13!==e.keyCode)return;const t=!this.state.isOpenDropDown;this.setState({isOpenDropDown:t}),t?document.addEventListener("click",this._onToggleDropDown):document.removeEventListener("click",this._onToggleDropDown)}_onItemClick(e,t){void 0!==t.keyCode&&13!==t.keyCode||(e.action&&e.action(e),o.A.trigger(o.A.navigation.tab_displayed,{type:e.id}))}_onResize(){let e=1/0,t=0,n=0;const a=this._navbarLinks.offsetWidth,s=this._linksWidth.entries();for(const[r,i]of s){if(t+=i,t>a){e=n;break}n=r}this.state.lastVisibleElementIndex!==e&&this.setState({lastVisibleElementIndex:e})}_getTabWidth(){this._linksWidth=[],Array.from(this._navbarLinks.childNodes).forEach(((e,t)=>{this._linksWidth[t]=e.getBoundingClientRect().width})),this._onResize()}}p.defaultProps={align:"left",textSize:"large"};const h=p},"6vRd":(e,t,n)=>{n.d(t,{K:()=>c,r:()=>o}),n("/eM8"),n("EV0h"),n("gS5K");var a=n("nrKQ"),s=n("Vd8Q"),r=n("Wp0Y"),i=n("fkXJ");const l=`//${s.default.get("host_website_ssl")}/profile/me`,o=async(e,t,n)=>{const s=await a.A.callAsync({method:"libraryimport.getTMMAccessToken",data:{}}).catch((e=>{throw e})),r=await fetch("https://www.tunemymusic.com/api/AuthenticateUser.php",{method:"POST",cache:"default",body:JSON.stringify({deezer_access_token:s,deezer_user_id:e,deezer_user_name:t,deezer_redirect_url:n?"deezer://reload":l})}).catch((e=>{throw e}));if(!r.ok||200!==r.status)throw new Error("TMM: response error");const i=await r.json().catch((e=>{throw e}));try{const e=new URL(i.migration_url);return e.searchParams.append("mode","deezer"),e.href}catch(e){throw new Error("TMM: migration url not valid")}},c=()=>{(0,i.A)({body:(0,r.AP)("libraryimporterdismiss_text_transferstillavailableinsettings_web")}),a.A.callAsync({method:"libraryimport.flagTMMAsDismissed"}).catch((e=>{throw e}))}},Jpjb:(e,t,n)=>{n.d(t,{A:()=>g}),n("/eM8");var a=n("WLHJ"),s=n("p1TQ"),r=n("PbG0");const i=e=>({method:a.K.GOOGLE,...e});var l=n("WrS5"),o=n("TqF5"),c=n("WKgy"),d=n("rVxF"),u=n("dgkV");const p=(0,s.e7)("google"),h=()=>{if(!p.google)throw new Error("LegacyAuth - Google not found, have you called init with google as a param?");return p.google},m=async()=>{try{const e=await h().unlinkAccount();(0,s.s5)(e)}catch(e){(0,s.kL)(e,i({intent:r.d6.Link}))}},g={login:async(e,t)=>{try{const t=await h().signin(e);(0,s.oj)(t,{redirect:(0,s.Ae)(null==e?void 0:e.redirect),method:r.qR.Google})}catch(l){var n,a;if((0,d.O)(l))new u.A({error:null!==(n=l.message)&&void 0!==n?n:null===(a=l.payload)||void 0===a?void 0:a.status,journey_type:"google",error_message:l.message,gateway_method:"google.auth"}).send(),(0,s.kL)(new d.A(l),i({intent:r.d6.Login,redirect:null==e?void 0:e.redirect}));null==t||t(l)}},signup:async(e,t)=>{try{const t=await h().signin(e);(0,s.oj)(t,{redirect:(0,s.Ae)(null==e?void 0:e.redirect),method:r.qR.Google})}catch(l){var n,a;if((0,d.O)(l))new u.A({error:null!==(n=null===(a=l.payload)||void 0===a?void 0:a.status)&&void 0!==n?n:l.name,journey_type:"google",error_message:l.message,gateway_method:"google.auth"}).send(),(0,s.kL)(new d.A(l),i({intent:r.d6.Login,redirect:null==e?void 0:e.redirect}));null==t||t(l)}},linkAccount:async e=>{try{const t=await h().linkAccount(e);(0,s.V7)(t,null==e?void 0:e.profile_migration)}catch(e){(0,d.O)(e)&&(0,s.kL)(new d.A(e),i({intent:r.d6.Link}))}},unlinkAccount:()=>{c.A.dispatch((0,o.qf)({name:l.b.THIRD_PARTY_CONFIRM_UNLINK,size:"small",props:{method:a.K.GOOGLE,confirmCallback:m}}))}}},"1EyH":(e,t,n)=>{n.d(t,{BB:()=>s,Sx:()=>a,UC:()=>r});const a=e=>/[\u2000-\u2BFF]/.test(e),s=e=>/[\u{10000}-\u{10FFFF}]/u.test(e),r=e=>!!e.match(/^[_0-9a-z-+]+[_.0-9a-z-+]*@([0-9a-z-]+\.)+[a-z]{2,13}$/i)},"YeG+":(e,t,n)=>{var a=n("S4+I"),s=n("iAz1"),r=n("2c1O");e.exports=function(e,t,n){a?s.f(e,t,r(0,n)):e[t]=n}},J7II:(e,t,n)=>{var a=n("iX0t"),s=n("cO21"),r=n("YeG+");a({target:"Object",stat:!0},{fromEntries:function(e){var t={};return s(e,(function(e,n){r(t,e,n)}),{AS_ENTRIES:!0}),t}})}}]);