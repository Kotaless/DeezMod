"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[7396],{YaZK:(e,t,r)=>{r.d(t,{A:()=>u});var n=r("MVPB"),i=r("4OMY"),a=r("mEUi");let s,o;const l=Symbol("AbortSignal");var d=(0,i.A)("aborter"),A=(0,i.A)("signal");s=Symbol.toStringTag;class u{constructor(){Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:new f(l,(e=>(0,n.A)(this,d)[d]=e))})}abort(e){(0,n.A)(this,d)[d]&&!(0,n.A)(this,A)[A].aborted&&(0,n.A)(this,d)[d](e)}get signal(){return(0,n.A)(this,A)[A]}get[s](){return"AbortController"}}var c=(0,i.A)("aborted"),h=(0,i.A)("onabort");o=Symbol.toStringTag;class f extends a.Ay{constructor(...[e,t]){if(super(),this.reason=new Error("AbortError"),Object.defineProperty(this,c,{writable:!0,value:!1}),Object.defineProperty(this,h,{writable:!0,value:null}),e!==l||"function"!=typeof t)throw new TypeError("Illegal constructor");t((()=>{var e;const t=new a.Jh("abort");(0,n.A)(this,c)[c]=!0,null==(e=(0,n.A)(this,h)[h])||e.call(this,t),this.dispatchEvent(t)}))}static abort(e){return new f(l,(t=>t(e)))}throwIfAborted(){if((0,n.A)(this,c)[c])throw this.reason}get aborted(){return(0,n.A)(this,c)[c]}get onabort(){return(0,n.A)(this,h)[h]}set onabort(e){(0,n.A)(this,h)[h]="function"==typeof e?e:null}get[o](){return"AbortSignal"}}},"7BwG":(e,t,r)=>{r.r(t),r.d(t,{FREE:()=>i,MetadataBlockTypes:()=>o,NOT_DOCUMENTED:()=>a,UNKNOWN:()=>s,default:()=>O,frames:()=>R,metadata:()=>C});var n=r("Nlia");const i=null,a="?",s="Unknown";let o=function(e){return e.ID3V1="id3v1",e.ID3V2="id3v2",e.INFO="info",e}({});var l=r("/HWm");const d={"MPEG-1":{1:[i,32,64,96,128,160,192,224,256,288,320,352,384,416,448],2:[i,32,48,56,64,80,96,112,128,160,192,224,256,320,384],3:[i,32,40,48,56,64,80,96,112,128,160,192,224,256,320]},"MPEG-2":{1:[i,32,48,56,64,80,96,112,128,144,160,176,192,224,256],2:[i,8,16,24,32,40,48,56,64,80,96,112,128,144,160],3:[]},"MPEG-2.5":{1:[],2:[],3:[]}};d["MPEG-2"][3]=d["MPEG-2"][2],d["MPEG-2.5"]=d["MPEG-2"];const A={},u=["Blues","Classic rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","Rhythm and Blues","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz & Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound clip","Gospel","Noise","Alternative Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native US","Cabaret","New Wave","Psychedelic","Rave","Show tunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock ’n’ Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast Fusion","Bebop","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber music","Sonata","Symphony","Booty bass","Primus","Porn groove","Satire","Slow jam","Club","Tango","Samba","Folklore","Ballad","Power ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum solo","A cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore Techno","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian rock","Merengue","Salsa","Thrash Metal","Anime","Jpop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio theatre","Neue Deutsche Welle","Podcast","Indie-Rock","G-Funk","Dubstep","Garage Rock","Psybient"],c=["Mono","Stereo","Dual mono","Joint stereo","Force","Auto","Intensity","Difference"],h={"MPEG-1":[21,36],"MPEG-2":[13,21],"MPEG-2.5":[13,21]},f=["<= 32000 Hz","44100 Hz","48000 Hz","> 48000 Hz"],v=["No surround information","DPL","DPL2","Ambisonic",a,a,a],p=[s,"CBR","ABR","VBR method 1 (RH)","VBR method 2 (MTRH)","VBR method 3 (MT)","VBR method 4",a,"CBR 2 pass","ABR 2 pass",a,a,a,a,a],b=[null,3,2,1],m={"MPEG-1":[null,384,1152,1152],"MPEG-2":[null,384,1152,576],"MPEG-2.5":[]};m["MPEG-2.5"]=m["MPEG-2"];const g={"MPEG-1":[44100,48e3,32e3],"MPEG-2":[22050,24e3,16e3],"MPEG-2.5":[11025,12e3,8e3]},E=["MPEG-2.5",null,"MPEG-2","MPEG-1"];function y(e){const[t]=String.fromCharCode(...e).split(String.fromCharCode(0),1);return t}const w={id3v1(e){let t=3;const r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=u[e.getUint8(e.byteLength-1)]||s,i=r.slice(t,t+=30),a=r.slice(t,t+=30),o=r.slice(t,t+=30),l=r.slice(t,t+=4);let d=r.slice(t,t+=30),A=0;return 0===d[d.byteLength-2]&&(A=d[d.byteLength-1],d=d.slice(0,d.byteLength-2)),{album:y(o),artist:y(a),comment:y(d),date:new Date(`${y(l)}-01-01`),genre:n,title:y(i),track:A}},id3v2:()=>({}),info(e,t){let r,n=t.offset+h[t.version][t.channels-1];const i=1483304551===e.getUint32(n)?"Xing":1231971951===e.getUint32(n)?"Info":"";if(n+=4,!i)throw new Error;let a,o,l,d;const A=e.getUint8(n+3);n+=4,1==(1&A)&&(a=e.getUint32(n),n+=4),2==(2&A)&&(o=e.getUint32(n),n+=4),4==(4&A)&&(l=Array.from(Array(100)).map((()=>Math.floor(e.getUint8(n++)/256*(o||0))))),8==(8&A)&&(d=e.getUint32(n),n+=4);const u=Array.from(Array(9)).map((()=>String.fromCharCode(e.getUint8(n++)))).join("");r=e.getUint8(n);const b=r>>4==15?null:"rev"+(r>>4),m=p[15&r];n+=1;const g=100*e.getUint8(n)||s;n+=1;const E=e.getUint32(n)||s;n+=4,r=e.getUint8(n);let y=0;if(r>>5==1){const t=r>>1&1;y=(((1&r)<<8)+e.getUint8(n+1)/10)*(t?-1:1)}if(n+=2,r=e.getUint8(n),r>>5==2){const t=r>>1&1;y=(((1&r)<<8)+e.getUint8(n+1)/10)*(t?-1:1)}n+=2,r=e.getUint8(n);const w={nspsytune:Boolean(r>>4&1),nssafejoint:Boolean(r>>4&2),"nogap-last":!(r>>4&4),"nogap-first":!(r>>4&8)},P=15&r;n+=1;const O=e.getUint8(n);n+=1;const R=(e.getUint8(n)<<4)+(e.getUint8(n+1)>>4),C=((15&e.getUint8(n+1))<<8)+e.getUint8(n+2);n+=3,r=e.getUint8(n);const M=f[r>>6],k=Boolean(r>>5&1),N=c[r>>2&7],j=3&r;n+=1;const L=Math.pow(2,1.5*e.getUint8(n)/4);n+=1,r=e.getUint8(n);const D=v[r>>3&7],T=((7&r)<<8)+e.getUint8(n+1);n+=2;const S=e.getUint32(n);return n+=4,{ATH:P,bitrate:O,CRC16:{audio:[e.getUint8(n++),e.getUint8(n++)],info:[e.getUint8(n++),e.getUint8(n++)]},delays:{start:R,end:C},encoder:{flags:{channelMode:N,noiseShaping:j,sourceSampling:M,unwiseSettings:k},name:u,options:w},filter:g,frames:a,marker:i,MP3Gain:L,preset:T,quality:d,ReplayGain:{adjustments:{album:0,track:y},peak:E},revision:b,sizes:{audio:S,file:o},surround:D,TOC:l,VBRMethod:m}}},P={frames(e){const t=e.byteLength,r=[];for(let n=0;n<t-3;n++){const i=e[n],a=e[n+1],s=e[n+2],o=e[n+3];if(73===i&&68===a&&51===s&&n+6<t){n+=((127&e[n+6])<<21)+((127&e[n+7])<<14)+((127&e[n+8])<<7)+(127&e[n+9])+10-1;continue}if(84===i&&65===a&&71===s){n+=127;continue}if(!(255===i&&a>=224)){1===r.length&&(n=r[0].offset,r.length=0);continue}const l=E[a>>3&3],u=b[a>>1&3],c=0==(1&a);if(!l||!u)continue;const h=d[l][u][s>>4],f=m[l][u],v=g[l][s>>2&3];if(!h||!f||!v)continue;const p=s>>1&1;if(1&s)continue;if(2==(3&o))continue;const y=Math.floor(1===u?4*(12*h*1e3/v+p):144*h*1e3/v+p),w=o>>6<3?2:1,P=`${l};${u};${h};${v};${w};${p}`,O=A[P]||(A[P]=Object.assign(Object.create(null,{duration:{get(){return this.samples/this.sampling*1e3}}}),{bitrate:h,channels:w,headerSize:c?6:4,layer:u,samples:f,sampling:v,size:y,version:l}));n+y<=t&&r.push(Object.assign(Object.create(O),{offset:n})),n+=y-1}return r},metadata(e){var t,r;const i=e.byteLength;if(i<10)throw new l.yw;const a={channels:2,delays:{start:0,end:0},initialization:new Uint8Array(0),layout:[],sampling:44100},s={offset:0,size:0,type:o.ID3V2};if(73===e[0]&&68===e[1]&&51===e[2]){const t=`${e[3]}.${e[4]}`,r=((127&e[6])<<21)+((127&e[7])<<14)+((127&e[8])<<7)+(127&e[9])+10;if(i<r)throw new l.yw;const n=w.id3v2(new DataView(e.buffer,e.byteOffset,r),t);s.data=n,s.size=r,a.layout.push(s)}if(i<32+s.size)throw new l.yw;const d=P.frames(new Uint8Array(e.buffer,s.size,Math.min(2881,i)));if(d.length)try{var A;const t=d[0].offset+s.size,{layer:r,sampling:n,size:i,version:l}=d[0],u=w.info(new DataView(e.buffer,t,i),d[0]);if(u.frames){const e=u.frames*m[l][r]-u.delays.start-u.delays.end;a.duration=e/n}a.delays=u.delays,a.encoder=u.encoder.name,a.filesize=u.sizes.file,a.frames=u.frames,a.seektable=null==(A=u.TOC)?void 0:A.map((e=>({offset:e}))),a.layout.push({data:u,offset:t,size:i,type:o.INFO})}catch(e){}if(e.byteLength>=128&&84===e[e.byteLength-128]&&65===e[e.byteLength-127]&&71===e[e.byteLength-126]){const t=w.id3v1(new DataView(e.buffer,e.byteLength-128,128)),r=(0,n.A)(t,["comment"]);Object.assign(a,r),a.layout.push({data:t,offset:e.byteLength-128,size:128,type:o.ID3V1})}return a.channels=(null==(t=d[0])?void 0:t.channels)||a.channels,a.sampling=(null==(r=d[0])?void 0:r.sampling)||a.sampling,a}},O=P,R=P.frames,C=P.metadata},"5g2R":(e,t,r)=>{r.d(t,{A:()=>o});var n=r("MVPB"),i=r("4OMY"),a=(0,i.A)("end"),s=(0,i.A)("start");class o{constructor(e,t){Object.defineProperty(this,a,{writable:!0,value:0}),Object.defineProperty(this,s,{writable:!0,value:0}),this.end=t,this.start=e}get duration(){return(0,n.A)(this,a)[a]-(0,n.A)(this,s)[s]}get end(){return(0,n.A)(this,a)[a]}set end(e){if(!Number.isFinite(e)||e<(0,n.A)(this,s)[s])throw new TypeError(Number.isFinite(e)?`\`end\` is lower than \`start\` (${e} < ${(0,n.A)(this,s)[s]})`:`\`end\` is non-finite (${e})`);(0,n.A)(this,a)[a]=e}get start(){return(0,n.A)(this,s)[s]}set start(e){if(!Number.isFinite(e)||e>(0,n.A)(this,a)[a])throw new TypeError(Number.isFinite(e)?`\`start\` is greater than \`end\` (${e} > ${(0,n.A)(this,a)[a]})`:`\`start\` is non-finite (${e})`);(0,n.A)(this,s)[s]=e}toString(){return`[${(0,n.A)(this,s)[s]}, ${(0,n.A)(this,a)[a]}] (${this.duration})`}}},i51G:(e,t,r)=>{r.d(t,{e:()=>y,A:()=>T});var n=r("/0+J"),i=r("MVPB"),a=r("4OMY"),s=r("YaZK"),o=r("mEUi"),l=(0,a.A)("jobs"),d=(0,a.A)("running"),A=(0,a.A)("sourceBuffer"),u=(0,a.A)("queue"),c=(0,a.A)("start");class h{constructor(e){Object.defineProperty(this,c,{value:v}),Object.defineProperty(this,u,{value:f}),Object.defineProperty(this,l,{writable:!0,value:[]}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),(0,i.A)(this,A)[A]=e,(0,i.A)(this,A)[A].addEventListener("updateend",(()=>{const[e,t]=(0,i.A)(this,d)[d]||[];e&&e(null,t),(0,i.A)(this,d)[d]=void 0,(0,i.A)(this,c)[c]()}))}abort(){return(0,i.A)(this,A)[A].abort()}addEventListener(e,t,r){return(0,i.A)(this,A)[A].addEventListener(e,t,r)}appendBuffer(e){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].appendBuffer(e)),{waitForEvent:!0})}get appendWindowEnd(){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].appendWindowEnd))}set appendWindowEnd(e){(0,i.A)(this,u)[u]((()=>Promise.resolve(e).then((e=>(0,i.A)(this,A)[A].appendWindowEnd=e))))}get appendWindowStart(){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].appendWindowStart))}set appendWindowStart(e){(0,i.A)(this,u)[u]((()=>Promise.resolve(e).then((e=>(0,i.A)(this,A)[A].appendWindowStart=e))))}get audioTracks(){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].audioTracks))}get availability(){return(0,i.A)(this,u)[u]((()=>{}))}get buffered(){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].buffered))}dispatchEvent(e){return(0,i.A)(this,A)[A].dispatchEvent(e)}get mode(){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].mode))}set mode(e){(0,i.A)(this,u)[u]((()=>Promise.resolve(e).then((e=>(0,i.A)(this,A)[A].mode=e))))}remove(e,t){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].remove(e,t)),{waitForEvent:!0})}removeEventListener(e,t){return(0,i.A)(this,A)[A].addEventListener(e,t)}get textTracks(){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].textTracks))}get timestampOffset(){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].timestampOffset))}set timestampOffset(e){(0,i.A)(this,u)[u]((()=>Promise.resolve(e).then((e=>(0,i.A)(this,A)[A].timestampOffset=e))))}get updating(){return Boolean((0,i.A)(this,d)[d])||(0,i.A)(this,A)[A].updating}get videoTracks(){return(0,i.A)(this,u)[u]((()=>(0,i.A)(this,A)[A].videoTracks))}}function f(e,t){return new Promise(((r,n)=>{(0,i.A)(this,l)[l].push([e,(e,t)=>e?n(e):r(t),t]),(0,i.A)(this,c)[c]()}))}function v(){return p.apply(this,arguments)}function p(){return(p=(0,n.A)((function*(){if(this.updating||!(0,i.A)(this,l)[l].length)return;const[e,t,{waitForEvent:r=!1}={}]=(0,i.A)(this,l)[l].shift()||[];if(e&&t){try{(0,i.A)(this,d)[d]=[t,e()],r||t(null,yield(0,i.A)(this,d)[d][1])}catch(e){(0,i.A)(this,d)[d]=void 0,t(e)}r||((0,i.A)(this,d)[d]=void 0,(0,i.A)(this,c)[c]())}}))).apply(this,arguments)}var b=r("5g2R"),m=r("qLS0"),g=r("qJB7"),E=r("WzpB");const y=30;var w=(0,a.A)("abortController"),P=(0,a.A)("activeCues"),O=(0,a.A)("buffer"),R=(0,a.A)("buffered"),C=(0,a.A)("cleaners"),M=(0,a.A)("cues"),k=(0,a.A)("limit"),N=(0,a.A)("logger"),j=(0,a.A)("mediaSource"),L=(0,a.A)("mime"),D=(0,a.A)("url");class T extends o.Ay{constructor({limit:e=y,logger:t}={}){super(),Object.defineProperty(this,w,{writable:!0,value:new s.A}),Object.defineProperty(this,P,{writable:!0,value:[]}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:new b.A(0,0)}),Object.defineProperty(this,C,{writable:!0,value:new Set}),Object.defineProperty(this,M,{writable:!0,value:[]}),Object.defineProperty(this,k,{writable:!0,value:y}),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:void 0}),this.limit=e,this.logger=t,(0,i.A)(this,j)[j]=new MediaSource,(0,i.A)(this,D)[D]=URL.createObjectURL((0,i.A)(this,j)[j])}destruct(){(0,i.A)(this,C)[C].forEach((e=>e())),URL.revokeObjectURL((0,i.A)(this,D)[D])}abort(){var e;"open"===(0,i.A)(this,j)[j].readyState&&(null==(e=(0,i.A)(this,O)[O])||e.abort()),(0,i.A)(this,w)[w].abort(),(0,i.A)(this,w)[w]=new s.A}get buffered(){return(0,i.A)(this,R)[R]}set logger(e){(0,i.A)(this,N)[N]=(null==e||null==e.namespace?void 0:e.namespace("Sink"))||e}get limit(){return(0,i.A)(this,k)[k]}set limit(e){const t=(0,i.A)(this,k)[k],r=(0,i.A)(this,k)[k]=Math.max(5,e);r!==t&&this.dispatchEvent(new m.Ay(m.V5.LIMIT_CHANGED,{detail:{limit:r,previous:t}}))}get mime(){return(0,i.A)(this,L)[L]}get ready(){return"open"===(0,i.A)(this,j)[j].readyState?Promise.resolve():new Promise(((e,t)=>{const r=()=>[a(),t(new E.lc)],n=()=>[a(),e()],a=()=>{(0,i.A)(this,C)[C].delete(r),(0,i.A)(this,j)[j].removeEventListener("sourceopen",n)};(0,i.A)(this,C)[C].add(r),(0,i.A)(this,j)[j].addEventListener("sourceopen",n)}))}remove(e,t,r){var a=this;return(0,n.A)((function*(){if(!(0,i.A)(a,O)[O])return;if(void 0===t){const e=yield(0,i.A)(a,O)[O].buffered;t=e.length?e.end(0):0}if(t<=e)return;yield(0,i.A)(a,O)[O].remove(e,t);const n=(0,i.A)(a,R)[R],s=yield(0,i.A)(a,O)[O].buffered,o=(0,i.A)(a,R)[R]=new b.A(s.length?s.start(0):0,s.length?s.end(0):0);if(o.start===n.start&&o.end===n.end||a.dispatchEvent(new m.Ay(m.V5.BUFFERED_RANGE_CHANGED,{detail:{buffered:new b.A(o.start,o.end),previous:n}})),void 0!==(null==r?void 0:r.duration)&&"open"===(0,i.A)(a,j)[j].readyState){const e=r.duration,t=(0,i.A)(a,j)[j].duration;var l;Number.isNaN(e)||e===t||(null==(l=(0,i.A)(a,N)[N])||l.log("Updating duration:",e,`(was ${t})`),yield(0,i.A)(a,O)[O].availability,(0,i.A)(a,j)[j].duration=e)}null!=r&&r.endOfStream&&(yield(0,i.A)(a,O)[O].availability,(0,i.A)(a,j)[j].endOfStream())}))()}set time(e){(0,i.A)(this,M)[M].length&&((0,i.A)(this,P)[P]=(0,i.A)(this,P)[P].filter((t=>e>=t.start&&e<=t.end)),(0,i.A)(this,M)[M].forEach((t=>{!(0,i.A)(this,P)[P].includes(t)&&e>=t.start&&e<=t.end&&((0,i.A)(this,P)[P].push(t),t.onEnter())})))}get url(){return(0,i.A)(this,D)[D]}write(e){var t=this;return(0,n.A)((function*(){if(e.controller.signal.aborted)return;if(!(0,i.A)(t,O)[O]){var r;yield t.ready;const n=(0,i.A)(t,L)[L]=e.mime;null==(r=(0,i.A)(t,N)[N])||r.log("Creating a buffer for MIME type",n),(0,i.A)(t,O)[O]=new h((0,i.A)(t,j)[j].addSourceBuffer(n)),t.dispatchEvent(new m.Ay(m.V5.BUFFER_CREATED,{detail:{mime:n}}))}const{signal:a}=(0,i.A)(t,w)[w],s=(0,i.A)(t,O)[O],o=(0,i.A)(t,N)[N];let l=(0,i.A)(t,R)[R];if((0,i.A)(t,P)[P]=[],(0,i.A)(t,M)[M]=[],"open"===(0,i.A)(t,j)[j].readyState){const r=e.controller.startOffset+e.controller.duration,n=(0,i.A)(t,j)[j].duration;Number.isNaN(r)||r===n||(null==o||o.log("Updating duration:",r,`(was ${n})`),yield s.availability,(0,i.A)(t,j)[j].duration=r)}try{const t=e.frames.reduce(((e,t)=>e+t.duration),0),r=e.firstInFile&&e.metadata?Math.max(e.metadata.delays.start/e.metadata.sampling,0):0,n=l.duration?l.end-r:e.timestampOffset;if(e.container===g.Container.NONE)if(e.lastInFile)s.appendWindowEnd=(l.duration?l.end:e.timestampOffset)+t/1e3;else{const e=yield s.appendWindowEnd;Number.isFinite(e)&&(s.appendWindowEnd=1/0)}s.timestampOffset=n;const i=e.frames.filter((e=>e.duration));null==o||o.debug("Appending @ PTS",n,"\n\t",i.length,`frames (${t} ms)`,...e.frames.length!==i.length?["— discarded",e.frames.length-i.length,"frames"]:[],"\n\t",e.byteLength,"bytes @",e.offset,"\n\t",e),yield s.appendBuffer(e)}catch(r){if(r instanceof Error&&"QuotaExceededError"===r.name)return null==o||o.warn("Last append resulted in a QuotaExceededError"),new Promise(((r,s)=>{const d=()=>[A(),s(new E.lc)],A=()=>{a.removeEventListener("abort",d),(0,i.A)(t,C)[C].delete(d),(0,i.A)(t,M)[M]=[]};a.addEventListener("abort",d),(0,i.A)(t,C)[C].add(d);const u=l.end-l.duration/2;var c;(0,i.A)(t,M)[M].push({start:u,end:l.end,onEnter:(c=(0,n.A)((function*(){null==o||o.log("Entering buffering cue (QuotaExceededError)");try{yield t.remove(0,u-1),yield t.write(e)}catch(e){return void s(e)}finally{A()}r()})),function(){return c.apply(this,arguments)})})}));throw r}const d=(0,i.A)(t,R)[R],A=yield s.buffered;if(l=(0,i.A)(t,R)[R]=new b.A(A.length?A.start(0):0,A.length?A.end(0):0),null==o||o.debug(`Buffered: [${l.start.toFixed(6)}, ${l.end.toFixed(6)}]`,`(${l.duration.toFixed(6)}s)`,l.duration<(0,i.A)(t,k)[k]?`${Number((0,i.A)(t,k)[k]-l.duration).toFixed(6)}s remaining`:"✔ limit reached"),l.start===d.start&&l.end===d.end||t.dispatchEvent(new m.Ay(m.V5.BUFFERED_RANGE_CHANGED,{detail:{controller:e.controller,buffered:new b.A(l.start,l.end),previous:d}})),e.lastInFile||e.lastInRange){if(null==o||o.log("End of stream"),yield s.availability,"open"===(0,i.A)(t,j)[j].readyState)try{(0,i.A)(t,j)[j].endOfStream()}catch(e){if(!(e instanceof DOMException&&"InvalidStateError"===e.name))throw e}t.dispatchEvent(new m.Ay(m.V5.END_OF_STREAM,{detail:{controller:e.controller}}))}else if(l.duration){if(!(l.duration<(0,i.A)(t,k)[k]))return new Promise(((e,r)=>{const s=()=>[d(),r(new E.lc)],d=()=>{a.removeEventListener("abort",s),(0,i.A)(t,C)[C].delete(s),(0,i.A)(t,M)[M]=[]};a.addEventListener("abort",s),(0,i.A)(t,C)[C].add(s);const A=l.end-l.duration/2;var u;(0,i.A)(t,M)[M].push({start:A,end:l.end,onEnter:(u=(0,n.A)((function*(){null==o||o.log("Entering buffering cue");try{yield t.remove(0,A-1)}catch(e){return void r(e)}finally{d()}e()})),function(){return u.apply(this,arguments)})})}))}else null==o||o.log("Buffer still empty since the last append")}))()}}},qLS0:(e,t,r)=>{r.d(t,{Ay:()=>o,V5:()=>s});var n=r("+9dH"),i=r("mEUi"),a=function(e){return e.BUFFER_CREATED="SinkBufferCreated",e.BUFFERED_RANGE_CHANGED="SinkBufferedRangeChanged",e.END_OF_STREAM="SinkEndOfStream",e.LIMIT_CHANGED="SinkLimitChanged",e}(a||{});const s=(0,n.A)({},a);class o extends i.up{}},"L/26":(e,t,r)=>{r.d(t,{Ay:()=>gt}),r("+VTJ");var n=r("/0+J"),i=r("+9dH"),a=r("MVPB"),s=r("4OMY"),o=r("qJB7"),l=r("YaZK"),d=r("mEUi"),A=r("5g2R"),u=function(e){return e.BUFFERED_RANGE_CHANGED="TrackControllerBufferedRangeChanged",e.BUFFERING_COMPLETE_CHANGED="TrackControllerBufferingCompleteChanged",e.DURATION_CHANGED="TrackControllerDurationChanged",e.ERROR="TrackControllerError",e.METADATA_CHANGED="TrackControllerMetadataChanged",e}(u||{});const c=(0,i.A)({},u);class h extends d.up{}var f=r("iA+Z"),v=(0,s.A)("buffered"),p=(0,s.A)("bufferingComplete"),b=(0,s.A)("cleaners"),m=(0,s.A)("duration"),g=(0,s.A)("element"),E=(0,s.A)("metadata"),y=(0,s.A)("playable"),w=(0,s.A)("source"),P=(0,s.A)("sources"),O=(0,s.A)("sourcesIterator"),R=(0,s.A)("trackMapper"),C=(0,s.A)("elementListeners"),M=(0,s.A)("onDurationChange"),k=(0,s.A)("onLoadedMetadata"),N=(0,s.A)("onProgress");class j extends d.Ay{constructor(e,t,{logger:r,trackMapper:n=(e=>e)}={}){super(),Object.defineProperty(this,C,{get:L,set:void 0}),Object.defineProperty(this,v,{writable:!0,value:new A.A(0,0)}),Object.defineProperty(this,p,{writable:!0,value:!1}),Object.defineProperty(this,b,{writable:!0,value:new Set}),Object.defineProperty(this,m,{writable:!0,value:NaN}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:()=>{const e=(0,a.A)(this,m)[m],t=(0,a.A)(this,m)[m]=(0,a.A)(this,g)[g].duration;t!==e&&this.dispatchEvent(new h(c.DURATION_CHANGED,{detail:{duration:t,previous:e}}))}}),Object.defineProperty(this,k,{writable:!0,value:()=>{(0,a.A)(this,E)[E]=null,this.dispatchEvent(new h(c.METADATA_CHANGED,{detail:{metadata:null,previous:void 0}}))}}),Object.defineProperty(this,N,{writable:!0,value:()=>{const e=(0,a.A)(this,g)[g].buffered,t={buffered:(0,a.A)(this,v)[v],bufferingComplete:(0,a.A)(this,p)[p]},r=(0,a.A)(this,g)[g].currentTime;if((0,a.A)(this,v)[v]=new A.A((0,a.A)(this,v)[v].start,(0,a.A)(this,v)[v].end),e.length)for(let t=0,n=e.length;t<n;t++)if(r>=e.start(t)&&r<=e.end(t)){(0,a.A)(this,v)[v]=new A.A(e.start(t),e.end(t));break}(0,a.A)(this,v)[v].start===t.buffered.start&&(0,a.A)(this,v)[v].end===t.buffered.end||this.dispatchEvent(new h(c.BUFFERED_RANGE_CHANGED,{detail:{buffered:new A.A((0,a.A)(this,v)[v].start,(0,a.A)(this,v)[v].end),previous:new A.A(t.buffered.start,t.buffered.end)}})),Math.trunc((0,a.A)(this,v)[v].end/(0,a.A)(this,m)[m]*100)>=98?(0,a.A)(this,p)[p]||((0,a.A)(this,p)[p]=!0):(0,a.A)(this,p)[p]=!1,(0,a.A)(this,p)[p]!==t.bufferingComplete&&this.dispatchEvent(new h(c.BUFFERING_COMPLETE_CHANGED,{detail:{bufferingComplete:(0,a.A)(this,p)[p]}}))}}),(0,a.A)(this,g)[g]=t,(0,a.A)(this,y)[y]=e,(0,a.A)(this,R)[R]=n,this.logger=r;const[i]=e,{duration:s}=(0,a.A)(this,R)[R](i);(0,a.A)(this,m)[m]=null!=s?s:NaN,Object.entries((0,a.A)(this,C)[C]).forEach((e=>{const[t,r]=e;(0,a.A)(this,g)[g].addEventListener(t,r)}))}destruct(){(0,a.A)(this,b)[b].forEach((e=>e())),Object.entries((0,a.A)(this,C)[C]).forEach((e=>{const[t,r]=e;(0,a.A)(this,g)[g].removeEventListener(t,r)}))}abort(){}get buffered(){return new A.A((0,a.A)(this,v)[v].start,(0,a.A)(this,v)[v].end)}get bufferingComplete(){return(0,a.A)(this,p)[p]}get codec(){}get container(){}get duration(){return(0,a.A)(this,m)[m]}get element(){return(0,a.A)(this,g)[g]}load(e){var t=this;return(0,n.A)((function*(){const[,r]=(0,a.A)(t,y)[y];(0,a.A)(t,P)[P]=[...r.sources].filter((({url:e})=>e)),(0,a.A)(t,O)[O]=(0,a.A)(t,P)[P].values();const{value:n}=(0,a.A)(t,O)[O].next();if(!n)throw new Error("No suitable source");(0,a.A)(t,w)[w]=n,(0,a.A)(t,g)[g].src=n.url;const i=new Promise((e=>{const r=()=>[n(),e()],n=()=>{(0,a.A)(t,b)[b].delete(n),(0,a.A)(t,g)[g].removeEventListener("loadedmetadata",r)};(0,a.A)(t,b)[b].add(n),(0,a.A)(t,g)[g].addEventListener("loadedmetadata",r),(0,a.A)(t,g)[g].load()}));if(e&&("percent"in e&&e.percent&&e.percent>0||"time"in e&&e.time&&e.time>0)){yield i;const r=(0,a.A)(t,m)[m],n=Number.isFinite(r)?"percent"in e&&e.percent?(0,f.A)(e.percent,{max:1})*Math.max(0,r-1):"time"in e&&e.time?(0,f.A)(e.time,{max:Math.max(0,r-1)}):0:0;return new Promise((e=>{const r=()=>[i(),e()],i=()=>{(0,a.A)(t,b)[b].delete(i),(0,a.A)(t,g)[g].removeEventListener("seeked",r)};(0,a.A)(t,b)[b].add(i),(0,a.A)(t,g)[g].addEventListener("seeked",r),(0,a.A)(t,g)[g].currentTime=n}))}return i}))()}set logger(e){null==e||null==e.namespace||e.namespace("DirectTrackController")}get metadata(){return(0,a.A)(this,E)[E]}get playable(){return(0,a.A)(this,y)[y]}get size(){}get source(){return(0,a.A)(this,w)[w]}get sources(){return(0,a.A)(this,P)[P]}get startOffset(){return 0}set startOffset(e){}}function L(){const e={durationchange:(0,a.A)(this,M)[M],loadedmetadata:(0,a.A)(this,k)[k],progress:(0,a.A)(this,N)[N],timeupdate:(0,a.A)(this,N)[N]};return(0,a.A)(this,m)[m]===1/0&&delete e.durationchange,e}var D=r("i51G"),T=r("P23T"),S=r("yZHM"),_=r("qLS0"),F=r("WzpB"),U=r("lKw8");function G(e){switch(e){case o.Codec.AAC:return MediaSource.isTypeSupported(U.b.AAC)?U.b.AAC:MediaSource.isTypeSupported(U.b.AAC_IN_MP4)?U.b.AAC_IN_MP4:void 0;case o.Codec.FLAC:return MediaSource.isTypeSupported(U.b.FLAC)?U.b.FLAC:MediaSource.isTypeSupported(U.b.FLAC_IN_MP4)&&function(){const e="undefined"!=typeof navigator?navigator.userAgent:"";if(!/chromium|chrome|crios|crmo/i.test(e)&&/safari/i.test(e)){const[,t]=e.match(/version\/(\d+)/i)||[];if(!t){const[,t]=e.match(/applewebkit\/(\d+)/i)||[];return Number(t)>=610}return Number(t)>=14}return!0}()?U.b.FLAC_IN_MP4:void 0;case o.Codec.MP3:return MediaSource.isTypeSupported(U.b.MP3)?U.b.MP3:MediaSource.isTypeSupported(U.b.MP3_IN_MP4)?U.b.MP3_IN_MP4:void 0;default:return}}function x(){return B.apply(this,arguments)}function B(){return(B=(0,n.A)((function*(...e){const{default:t}=yield Promise.resolve().then(r.bind(r,"+VTJ"));return new t(...e)}))).apply(this,arguments)}var I=(0,s.A)("abortController"),H=(0,s.A)("buffered"),z=(0,s.A)("bufferingComplete"),$=(0,s.A)("cleaners"),V=(0,s.A)("codec"),W=(0,s.A)("container"),q=(0,s.A)("duration"),Y=(0,s.A)("element"),J=(0,s.A)("metadata"),K=(0,s.A)("pipeline"),Z=(0,s.A)("playable"),Q=(0,s.A)("sink"),X=(0,s.A)("size"),ee=(0,s.A)("startOffset"),te=(0,s.A)("logger"),re=(0,s.A)("metadataProvider"),ne=(0,s.A)("pipelineProvider"),ie=(0,s.A)("requester"),ae=(0,s.A)("trackMapper"),se=(0,s.A)("estimateByteOffsetFromSeekTarget"),oe=(0,s.A)("getMetadata"),le=(0,s.A)("onBufferedRangeChanged"),de=(0,s.A)("onEndOfStream"),Ae=(0,s.A)("onMetadata"),ue=(0,s.A)("sinkListeners");class ce extends d.Ay{constructor(e,t,r,{logger:n,metadataProvider:i,pipelineProvider:s=x,requester:o,trackMapper:d=(e=>e)}={}){var u,f,v;super(),Object.defineProperty(this,ue,{get:be,set:void 0}),Object.defineProperty(this,oe,{value:ve}),Object.defineProperty(this,se,{value:he}),this.id=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-"),Object.defineProperty(this,I,{writable:!0,value:new l.A}),Object.defineProperty(this,H,{writable:!0,value:new A.A(0,0)}),Object.defineProperty(this,z,{writable:!0,value:!1}),Object.defineProperty(this,$,{writable:!0,value:new Set}),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:NaN}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:0}),Object.defineProperty(this,ee,{writable:!0,value:0}),Object.defineProperty(this,te,{writable:!0,value:void 0}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:void 0}),Object.defineProperty(this,ae,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:e=>{var t;let{buffered:r,controller:n}=e.detail;const i={buffered:(0,a.A)(this,H)[H],bufferingComplete:(0,a.A)(this,z)[z],duration:(0,a.A)(this,q)[q]};n||(n={id:this.id,duration:(0,a.A)(this,q)[q]>=0?(0,a.A)(this,q)[q]:1/0,startOffset:(0,a.A)(this,ee)[ee]},r=r.duration&&r.start>=n.startOffset&&r.start<n.startOffset+n.duration?new A.A(Math.max(r.start,n.startOffset),Math.min(r.end,n.startOffset+n.duration)):new A.A(0,0)),n.id===this.id&&((0,a.A)(this,H)[H]=r.duration?new A.A(Math.max(r.start-(0,a.A)(this,ee)[ee],0),r.end-(0,a.A)(this,ee)[ee]):new A.A(0,0),(t=(0,a.A)(this,z))[z]&&(t[z]=(0,a.A)(this,H)[H].end===n.duration),(0,a.A)(this,z)[z]!==i.bufferingComplete&&this.dispatchEvent(new h(c.BUFFERING_COMPLETE_CHANGED,{detail:{bufferingComplete:(0,a.A)(this,z)[z]}})),(0,a.A)(this,H)[H].start===i.buffered.start&&(0,a.A)(this,H)[H].end===i.buffered.end||this.dispatchEvent(new h(c.BUFFERED_RANGE_CHANGED,{detail:{buffered:new A.A((0,a.A)(this,H)[H].start,(0,a.A)(this,H)[H].end),previous:new A.A(i.buffered.start,i.buffered.end)}})),(0,a.A)(this,q)[q]=(0,a.A)(this,z)[z]?(0,a.A)(this,q)[q]:Math.max((0,a.A)(this,q)[q]||0,r.end-(0,a.A)(this,ee)[ee]),(0,a.A)(this,q)[q]!==i.duration&&this.dispatchEvent(new h(c.DURATION_CHANGED,{detail:{duration:(0,a.A)(this,q)[q],previous:i.duration}})))}}),Object.defineProperty(this,de,{writable:!0,value:e=>{if(e.detail.controller.id!==this.id)return;const t=(0,a.A)(this,q)[q],r=(0,a.A)(this,q)[q]=(0,a.A)(this,H)[H].end;r!==t&&this.dispatchEvent(new h(c.DURATION_CHANGED,{detail:{duration:r,previous:t}})),(0,a.A)(this,z)[z]=!0,this.dispatchEvent(new h(c.BUFFERING_COMPLETE_CHANGED,{detail:{bufferingComplete:!0}}))}}),Object.defineProperty(this,Ae,{writable:!0,value:e=>{const t=null==e?void 0:e.duration,r={duration:(0,a.A)(this,q)[q],metadata:(0,a.A)(this,J)[J],size:(0,a.A)(this,X)[X]},n=null==e?void 0:e.filesize;t!==r.duration&&void 0!==t&&((0,a.A)(this,q)[q]=t,this.dispatchEvent(new h(c.DURATION_CHANGED,{detail:{duration:t,previous:r.duration}}))),n!==r.size&&void 0!==n&&((0,a.A)(this,X)[X]=n),e!==r.metadata&&((0,a.A)(this,J)[J]=e,this.dispatchEvent(new h(c.METADATA_CHANGED,{detail:{metadata:Object.freeze(Object.create(e)),previous:r.metadata}})))}}),(0,a.A)(this,Y)[Y]=t,(0,a.A)(this,Z)[Z]=e,(0,a.A)(this,Q)[Q]=r,this.logger=n,(0,a.A)(this,re)[re]=i,(0,a.A)(this,ne)[ne]=s,(0,a.A)(this,ie)[ie]=o,(0,a.A)(this,ae)[ae]=d;const[p,b]=e,{duration:m}=(0,a.A)(this,ae)[ae](p);(0,a.A)(this,V)[V]=null==(u=b.format)?void 0:u.codec,(0,a.A)(this,W)[W]=null==(f=b.format)?void 0:f.container,(0,a.A)(this,q)[q]=null!=m?m:NaN,(0,a.A)(this,X)[X]=null!=(v=b.size)?v:0,Object.entries((0,a.A)(this,ue)[ue]).forEach((e=>{const[t,r]=e;(0,a.A)(this,Q)[Q].addEventListener(t,r)}))}destruct(){(0,a.A)(this,I)[I].abort(),(0,a.A)(this,$)[$].forEach((e=>e())),Object.entries((0,a.A)(this,ue)[ue]).forEach((e=>{const[t,r]=e;(0,a.A)(this,Q)[Q].removeEventListener(t,r)}))}abort(){(0,a.A)(this,I)[I].abort(),(0,a.A)(this,I)[I]=new l.A}get buffered(){return new A.A((0,a.A)(this,H)[H].start,(0,a.A)(this,H)[H].end)}get bufferingComplete(){return(0,a.A)(this,z)[z]}get codec(){return(0,a.A)(this,V)[V]}get container(){return(0,a.A)(this,W)[W]}get duration(){return(0,a.A)(this,q)[q]}get element(){return(0,a.A)(this,Y)[Y]}load(e){var t=this;return(0,n.A)((function*(){var r;(0,a.A)(t,I)[I].abort(),(0,a.A)(t,I)[I]=new l.A;const n=(0,a.A)(t,I)[I],{signal:i}=n,s=e&&("percent"in e||"time"in e)?yield(0,a.A)(t,se)[se](e):0,o=()=>[d(),n.abort()],d=()=>{var r;(0,a.A)(t,$)[$].delete(o),i.removeEventListener("abort",d),null==e||null==(r=e.signal)||r.removeEventListener("abort",o)};if((0,a.A)(t,$)[$].add(o),i.addEventListener("abort",d),null==e||null==(r=e.signal)||r.addEventListener("abort",o),(0,a.A)(t,K)[K]=yield(0,a.A)(t,ne)[ne]({logger:(0,a.A)(t,te)[te],requester:(0,a.A)(t,ie)[ie],signal:i}),!(0,a.A)(t,V)[V]||!(0,a.A)(t,W)[W]){const{codec:e,container:r}=yield(0,a.A)(t,K)[K].sniff((0,a.A)(t,Z)[Z],{signal:i});(0,a.A)(t,V)[V]=e,(0,a.A)(t,W)[W]=r}const A=(0,a.A)(t,V)[V],u=(0,a.A)(t,W)[W],v=(0,a.A)(t,q)[q],p=(0,a.A)(t,J)[J],b={duration:v,id:t.id,signal:i,startOffset:(0,a.A)(t,ee)[ee]},m=G(A),g=Number.isFinite(v)&&e?"percent"in e&&e.percent?(0,f.A)(e.percent,{max:1})*Math.max(0,v-1):"time"in e&&e.time?(0,f.A)(e.time,{max:Math.max(0,v-1)}):0:0;if(Object.defineProperty(b,"duration",{get:()=>(0,a.A)(t,q)[q]}),!m)throw new Error("Could not find a suitable MIME to use.");return(yield(0,a.A)(t,K)[K].load((0,a.A)(t,Z)[Z],{codec:A,container:u,metadata:p,mime:m,offset:s,onMetadata:(0,a.A)(t,Ae)[Ae],signal:i})).pipeThrough(new S.Rv(new T.gW({controller:b,timestampOffset:g})),{signal:i}).pipeTo(new S.ho((0,a.A)(t,Q)[Q]),{preventAbort:!0}).catch(F.r6).catch((e=>{t.dispatchEvent(new h(c.ERROR,{detail:{error:e}}))}))}))()}set logger(e){(0,a.A)(this,te)[te]=(null==e||null==e.namespace?void 0:e.namespace("TrackController"))||e,(0,a.A)(this,K)[K]&&((0,a.A)(this,K)[K].logger=e)}get metadata(){return(0,a.A)(this,J)[J]}get playable(){return(0,a.A)(this,Z)[Z]}get sink(){return(0,a.A)(this,Q)[Q]}get size(){return(0,a.A)(this,X)[X]}get startOffset(){return(0,a.A)(this,ee)[ee]}set startOffset(e){(0,a.A)(this,ee)[ee]=Math.max(0,e)}}function he(e){return fe.apply(this,arguments)}function fe(){return(fe=(0,n.A)((function*(e){var t;if(!e)throw new TypeError("A seeking target must be provided");const{signal:r}=e,n=void 0===(0,a.A)(this,J)[J]?yield(0,a.A)(this,oe)[oe]({signal:r}):(0,a.A)(this,J)[J],i=(0,a.A)(this,q)[q],s=Number.isFinite(i)?"percent"in e&&e.percent?(0,f.A)(e.percent,{max:i-1/i}):"time"in e&&e.time?(0,f.A)(e.time,{max:Math.max(0,i-1)})/i:0:0;let o=Math.floor((0,a.A)(this,X)[X]*s);if(null!=n&&null!=(t=n.seektable)&&t.length)if(n.samples){const e=n.seektable,t=n.samples||(Number.isNaN((0,a.A)(this,q)[q])?0:(0,a.A)(this,q)[q])*n.sampling,r=Math.floor(t*s),i=e.reduce(((e,t)=>t.number>r?e:t)),l=e[e.indexOf(i)+1]||{number:t,offset:(0,a.A)(this,X)[X]},d=Math.floor((l.offset-i.offset)/(l.number-i.number)*(r-i.number));o=n.layout.reduce(((e,{size:t})=>e+t),0)+i.offset+d}else{const e=n.seektable[Math.floor(100*s)]||n.seektable[n.seektable.length-1],t=n.seektable[Math.ceil(100*s)]||{offset:(0,a.A)(this,X)[X]},r=Math.floor((t.offset-e.offset)*(100*s-Math.trunc(100*s)));o=e.offset+r}return o}))).apply(this,arguments)}function ve(e){return pe.apply(this,arguments)}function pe(){return pe=(0,n.A)((function*({signal:e}){let t=null;if((0,a.A)(this,re)[re])t=yield(0,a.A)(this,re)[re]((0,a.A)(this,Z)[Z],{signal:e});else{const r=yield(0,a.A)(this,ne)[ne]({logger:(0,a.A)(this,te)[te],requester:(0,a.A)(this,ie)[ie],signal:e});if(!(0,a.A)(this,V)[V]||!(0,a.A)(this,W)[W]){const{codec:t,container:n}=yield r.sniff((0,a.A)(this,Z)[Z],{signal:e});(0,a.A)(this,V)[V]=t,(0,a.A)(this,W)[W]=n}t=yield r.getMetadata((0,a.A)(this,Z)[Z],{codec:(0,a.A)(this,V)[V],container:(0,a.A)(this,W)[W],signal:e})}return(0,a.A)(this,Ae)[Ae](t||null),t})),pe.apply(this,arguments)}function be(){return{[_.V5.BUFFERED_RANGE_CHANGED]:(0,a.A)(this,le)[le],[_.V5.END_OF_STREAM]:(0,a.A)(this,de)[de]}}const me=e=>Boolean(e),ge=e=>Boolean(e&&"sink"in e);var Ee=(0,s.A)("cleaners"),ye=(0,s.A)("controller"),we=(0,s.A)("element"),Pe=(0,s.A)("sink"),Oe=(0,s.A)("sinkLimit"),Re=(0,s.A)("controllers"),Ce=(0,s.A)("elements"),Me=(0,s.A)("sinks"),ke=(0,s.A)("canUseSameSink"),Ne=(0,s.A)("canUseSinkStraightAway"),je=(0,s.A)("mutationObserver"),Le=(0,s.A)("autoplay"),De=(0,s.A)("ended"),Te=(0,s.A)("muted"),Se=(0,s.A)("mutedChanging"),_e=(0,s.A)("next"),Fe=(0,s.A)("paused"),Ue=(0,s.A)("playbackRate"),Ge=(0,s.A)("playbackRateChanging"),xe=(0,s.A)("seeking"),Be=(0,s.A)("seekPending"),Ie=(0,s.A)("volume"),He=(0,s.A)("volumeChanging"),ze=(0,s.A)("elementFactory"),$e=(0,s.A)("logger"),Ve=(0,s.A)("metadataProvider"),We=(0,s.A)("pipelineProvider"),qe=(0,s.A)("requester"),Ye=(0,s.A)("trackMapper"),Je=(0,s.A)("addElementListeners"),Ke=(0,s.A)("addTrackControllerListeners"),Ze=(0,s.A)("elementListeners"),Qe=(0,s.A)("getEmptyURL"),Xe=(0,s.A)("getPlayableState"),et=(0,s.A)("onBufferedRangeChanged"),tt=(0,s.A)("onBufferingCompleteChanged"),rt=(0,s.A)("onCanPlay"),nt=(0,s.A)("onCanPlayThrough"),it=(0,s.A)("onDurationChange"),at=(0,s.A)("onEnded"),st=(0,s.A)("onError"),ot=(0,s.A)("onMetadataChange"),lt=(0,s.A)("onPause"),dt=(0,s.A)("onPlay"),At=(0,s.A)("onPlaying"),ut=(0,s.A)("onRateChange"),ct=(0,s.A)("onSeeked"),ht=(0,s.A)("onSeeking"),ft=(0,s.A)("onTimeUpdate"),vt=(0,s.A)("onVolumeChange"),pt=(0,s.A)("removeElementListeners"),bt=(0,s.A)("removeTrackControllerListeners"),mt=(0,s.A)("trackControllerListeners");class gt extends d.Ay{constructor(...[e={}]){var t,r;super(),t=this,Object.defineProperty(this,mt,{get:Mt,set:void 0}),Object.defineProperty(this,bt,{value:Ct}),Object.defineProperty(this,pt,{value:Rt}),Object.defineProperty(this,Xe,{value:Ot}),Object.defineProperty(this,Qe,{value:Pt}),Object.defineProperty(this,Ze,{get:wt,set:void 0}),Object.defineProperty(this,Ke,{value:yt}),Object.defineProperty(this,Je,{value:Et}),this.constructor=gt,Object.defineProperty(this,Ee,{writable:!0,value:new Set}),Object.defineProperty(this,ye,{writable:!0,value:void 0}),Object.defineProperty(this,we,{writable:!0,value:void 0}),Object.defineProperty(this,Pe,{writable:!0,value:void 0}),Object.defineProperty(this,Oe,{writable:!0,value:D.e}),Object.defineProperty(this,Re,{writable:!0,value:[]}),Object.defineProperty(this,Ce,{writable:!0,value:void 0}),Object.defineProperty(this,Me,{writable:!0,value:[]}),Object.defineProperty(this,ke,{writable:!0,value:!0}),Object.defineProperty(this,Ne,{writable:!0,value:!0}),Object.defineProperty(this,je,{writable:!0,value:new MutationObserver((e=>{e.find((e=>e.target===(0,a.A)(this,we)[we]&&"attributes"===e.type&&"autoplay"===e.attributeName))&&this.dispatchEvent(new o.RendererEvent(o.RendererEvents.AUTOPLAY_CHANGED,{detail:{autoplay:(0,a.A)(this,we)[we].autoplay}}))}))}),Object.defineProperty(this,Le,{writable:!0,value:void 0}),Object.defineProperty(this,De,{writable:!0,value:void 0}),Object.defineProperty(this,Te,{writable:!0,value:void 0}),Object.defineProperty(this,Se,{writable:!0,value:void 0}),Object.defineProperty(this,_e,{writable:!0,value:void 0}),Object.defineProperty(this,Fe,{writable:!0,value:void 0}),Object.defineProperty(this,Ue,{writable:!0,value:void 0}),Object.defineProperty(this,Ge,{writable:!0,value:void 0}),Object.defineProperty(this,xe,{writable:!0,value:void 0}),Object.defineProperty(this,Be,{writable:!0,value:void 0}),Object.defineProperty(this,Ie,{writable:!0,value:void 0}),Object.defineProperty(this,He,{writable:!0,value:void 0}),Object.defineProperty(this,ze,{writable:!0,value:void 0}),Object.defineProperty(this,$e,{writable:!0,value:void 0}),Object.defineProperty(this,Ve,{writable:!0,value:void 0}),Object.defineProperty(this,We,{writable:!0,value:void 0}),Object.defineProperty(this,qe,{writable:!0,value:void 0}),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,et,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type,e.detail);const r=e.target,n=r===(0,a.A)(this,Re)[Re][1];!n&&(0,a.A)(this,xe)[xe]&&"pending-playing"===this.paused&&(0,a.A)(this,we)[we].currentTime!==(0,a.A)(this,xe)[xe].time&&(0,a.A)(this,we)[we].readyState<HTMLMediaElement.HAVE_CURRENT_DATA&&((0,a.A)(this,we)[we].currentTime=(0,a.A)(this,xe)[xe].time),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.BUFFERED_RANGE_CHANGED,{detail:(0,i.A)({},e.detail,{next:n,playable:r.playable})}))}}),Object.defineProperty(this,tt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type,e.detail);const r=e.target,{bufferingComplete:n}=e.detail;var i;r===(0,a.A)(this,Re)[Re][0]&&n&&(null==(i=(0,a.A)(this,_e)[_e])||i.load()),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.BUFFERING_COMPLETE_CHANGED,{detail:{bufferingComplete:n,next:r===(0,a.A)(this,Re)[Re][1],playable:r.playable}}))}}),Object.defineProperty(this,rt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.CAN_PLAY))}}),Object.defineProperty(this,nt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.CAN_PLAY_THROUGH))}}),Object.defineProperty(this,it,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type,e.detail);const r=e.target;this.dispatchEvent(new o.RendererEvent(o.RendererEvents.DURATION_CHANGED,{detail:(0,i.A)({},e.detail,{next:r===(0,a.A)(this,Re)[Re][1],playable:r.playable})}))}}),Object.defineProperty(this,at,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),(0,a.A)(this,De)[De]!==(0,a.A)(this,we)[we].ended&&((0,a.A)(this,De)[De]=(0,a.A)(this,we)[we].ended,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED_CHANGED,{detail:{ended:(0,a.A)(this,De)[De]}}))),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED))}}),Object.defineProperty(this,st,{writable:!0,value:(e,t)=>{var r;if((0,F.zf)(e))return;let n,i,s,l;if(null==(r=(0,a.A)(this,$e)[$e])||r.error("Received error:",e),e instanceof h){const t=e.target;n=new o.RendererError(void 0,{cause:e.detail.error}),i=t!==(0,a.A)(this,ye)[ye],s=t.playable}else if(e instanceof Event){const t=e.target,r=t.error,{code:l,message:d}=r;switch(l){case MediaError.MEDIA_ERR_DECODE:n=new o.DecodeError(d,{cause:r});break;case MediaError.MEDIA_ERR_NETWORK:n=new o.NetworkError(d,{cause:r});break;default:n=new o.RendererError(d,{cause:r})}const A=(0,a.A)(this,Re)[Re].find((e=>(null==e?void 0:e.element)===t));i=A!==(0,a.A)(this,ye)[ye],s=null==A?void 0:A.playable}else n=new o.RendererError(e.message,{cause:e}),i=t.loadOptions&&"next"in t.loadOptions&&t.loadOptions.next||!1,s=t.playable,l=t.loadOptions&&("percent"in t.loadOptions||"time"in t.loadOptions)?t.loadOptions:void 0;this.dispatchEvent(new o.RendererEvent(o.RendererEvents.ERROR,{detail:{error:n,next:i,playable:s,seekTarget:l}}))}}),Object.defineProperty(this,ot,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type,e.detail);const r=e.target;this.dispatchEvent(new o.RendererEvent(o.RendererEvents.METADATA_CHANGED,{detail:(0,i.A)({},e.detail,{next:r===(0,a.A)(this,Re)[Re][1],playable:r.playable})}))}}),Object.defineProperty(this,lt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),(0,a.A)(this,Fe)[Fe]=!0,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PAUSED_CHANGED,{detail:{paused:!0}}))}}),Object.defineProperty(this,dt,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),(0,a.A)(this,Fe)[Fe]=o.PENDING_PLAYING,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PAUSED_CHANGED,{detail:{paused:o.PENDING_PLAYING}}))}}),Object.defineProperty(this,At,{writable:!0,value:e=>{var t;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),(0,a.A)(this,Fe)[Fe]=!1,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PAUSED_CHANGED,{detail:{paused:!1}}))}}),Object.defineProperty(this,ut,{writable:!0,value:e=>{var t;if(null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),!(0,a.A)(this,Ge)[Ge]&&(0,a.A)(this,we)[we].defaultPlaybackRate===(0,a.A)(this,we)[we].playbackRate&&(0,a.A)(this,we)[we].playbackRate===(0,a.A)(this,Ue)[Ue])return;const r=(0,a.A)(this,we)[we].playbackRate,n=(0,a.A)(this,Ue)[Ue];if(!(0,a.A)(this,Ge)[Ge]){const e=(0,f.A)(r,{min:.25,max:4,default:n});if(e!==r)return void(this.playbackRate=e)}(0,a.A)(this,we)[we].defaultPlaybackRate=r,(0,a.A)(this,Ue)[Ue]=r,(0,a.A)(this,Ge)[Ge]=void 0,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PLAYBACK_RATE_CHANGED,{detail:{playbackRate:r,previous:n}}))}}),Object.defineProperty(this,ct,{writable:!0,value:e=>{var t,r;null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),null==(r=(0,a.A)(this,xe)[xe])||r.resolve(),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.SEEKED))}}),Object.defineProperty(this,ht,{writable:!0,value:(r=(0,n.A)((function*(e){var r,n,s,l;null==(r=(0,a.A)(t,$e)[$e])||r.debug("Received event:",e.type),t.dispatchEvent(new o.RendererEvent(o.RendererEvents.SEEKING)),(0,a.A)(t,De)[De]!==(0,a.A)(t,we)[we].ended&&((0,a.A)(t,De)[De]=(0,a.A)(t,we)[we].ended,t.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED_CHANGED,{detail:{ended:(0,a.A)(t,De)[De]}})));const{signal:d}=(null==(n=(0,a.A)(t,xe)[xe])?void 0:n.controller)||{},A=(0,a.A)(t,ye)[ye],u=null!=(s=null==(l=(0,a.A)(t,xe)[xe])?void 0:l.time)?s:Math.max(A.startOffset||0,(0,a.A)(t,we)[we].currentTime-(A.startOffset||0));var c;if(null!=d&&d.aborted||(0,a.A)(t,Be)[Be])null==(c=(0,a.A)(t,xe)[xe])||c.reject(new F.lc);else if(!(A.buffered.duration&&A.buffered.start<=u&&A.buffered.end>=u)){var h,f,v,p;A.abort(),null==(h=(0,a.A)(t,Pe)[Pe])||h.abort(),yield null==(f=(0,a.A)(t,Pe)[Pe])?void 0:f.remove(0),null==(v=(0,a.A)(t,Me)[Me][1])||v.destruct(),(0,a.A)(t,Me)[Me]=(0,a.A)(t,Pe)[Pe]?[(0,a.A)(t,Pe)[Pe]]:[],(0,a.A)(t,Ce)[Ce]=[(0,a.A)(t,we)[we]];const e=(0,a.A)(t,Re)[Re][1];var b;if(null==(p=(0,a.A)(t,Re)[Re][1])||p.destruct(),(0,a.A)(t,Re)[Re]=[A],(0,a.A)(t,_e)[_e]&&e&&((0,a.A)(t,_e)[_e].loaded=!1,t.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:(0,a.A)(t,_e)[_e].playable}}))),null!=d&&d.aborted||(0,a.A)(t,Be)[Be])return void(null==(b=(0,a.A)(t,xe)[xe])||b.reject(new F.lc));if(A.startOffset){const e=A.startOffset;return A.startOffset=0,(0,a.A)(t,xe)[xe]=(0,a.A)(t,xe)[xe]?(0,i.A)({},(0,a.A)(t,xe)[xe],{time:u-e}):void 0,void((0,a.A)(t,we)[we].currentTime=u-e)}if(ge(A)){const e={signal:d,time:u};A.load(e).catch((r=>(0,a.A)(t,st)[st](r,{loadOptions:e,playable:A.playable})))}}})),function(e){return r.apply(this,arguments)})}),Object.defineProperty(this,ft,{writable:!0,value:()=>{var e,t;const r=(0,a.A)(this,we)[we].currentTime;(0,a.A)(this,Pe)[Pe]&&((0,a.A)(this,Pe)[Pe].time=r),this.dispatchEvent(new o.RendererEvent(o.RendererEvents.TIME_CHANGED,{detail:{time:r-((null==(e=(0,a.A)(this,ye)[ye])?void 0:e.startOffset)||0)}})),(0,a.A)(this,_e)[_e]&&null!=(t=(0,a.A)(this,ye)[ye])&&t.bufferingComplete&&r>=Number(((0,a.A)(this,ye)[ye].startOffset+(0,a.A)(this,ye)[ye].buffered.end).toFixed(6))&&(this.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED)),this.load((0,a.A)(this,_e)[_e].playable,(0,i.A)({},(0,a.A)(this,_e)[_e].options,{next:!1})))}}),Object.defineProperty(this,vt,{writable:!0,value:e=>{var t;if(null==(t=(0,a.A)(this,$e)[$e])||t.debug("Received event:",e.type),void 0!==(0,a.A)(this,Se)[Se]||(0,a.A)(this,Te)[Te]!==(0,a.A)(this,we)[we].muted)return(0,a.A)(this,Te)[Te]=(0,a.A)(this,we)[we].muted,(0,a.A)(this,Se)[Se]=void 0,void this.dispatchEvent(new o.RendererEvent(o.RendererEvents.MUTED_CHANGED,{detail:{muted:(0,a.A)(this,Te)[Te]}}));if(void 0!==(0,a.A)(this,He)[He]||(0,a.A)(this,Ie)[Ie]!==(0,a.A)(this,we)[we].volume){const e=(0,a.A)(this,Ie)[Ie];(0,a.A)(this,Ie)[Ie]=(0,a.A)(this,we)[we].volume,(0,a.A)(this,He)[He]=void 0,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.VOLUME_CHANGED,{detail:{previous:e,volume:(0,a.A)(this,Ie)[Ie]}}))}}});const{autoplay:s,canUseSameSink:l,canUseSinkStraightAway:d,elementFactory:A=(()=>new Audio),logger:u,metadataProvider:c,muted:v,pipelineProvider:p,playbackRate:b,requester:m,sinkLimit:g,trackMapper:E=(e=>e),volume:y}=e;this.logger=u,(0,a.A)(this,ze)[ze]=A,(0,a.A)(this,Ve)[Ve]=c,(0,a.A)(this,We)[We]=p,(0,a.A)(this,qe)[qe]=m,(0,a.A)(this,Ye)[Ye]=E,(0,a.A)(this,we)[we]=(0,a.A)(this,ze)[ze](),(0,a.A)(this,Ce)[Ce]=[(0,a.A)(this,we)[we]],(0,a.A)(this,Le)[Le]=(0,a.A)(this,we)[we].autoplay,(0,a.A)(this,De)[De]=(0,a.A)(this,we)[we].ended,(0,a.A)(this,Te)[Te]=(0,a.A)(this,we)[we].muted,(0,a.A)(this,Fe)[Fe]=(0,a.A)(this,we)[we].paused,(0,a.A)(this,Ue)[Ue]=(0,a.A)(this,we)[we].playbackRate,(0,a.A)(this,Ie)[Ie]=(0,a.A)(this,we)[we].volume,(0,a.A)(this,Je)[Je]((0,a.A)(this,we)[we]),(0,a.A)(this,je)[je].observe((0,a.A)(this,we)[we],{attributes:!0}),void 0!==d&&((0,a.A)(this,Ne)[Ne]=d),void 0!==s&&(this.autoplay=s),void 0!==l&&(this.canUseSameSink=l),void 0!==v&&(this.muted=v),void 0!==b&&(this.playbackRate=b),void 0!==g&&(this.sinkLimit=g),void 0!==y&&(this.volume=y)}destruct(){var e=this;return(0,n.A)((function*(){var t,r,n,i,s;const l={current:null==(t=(0,a.A)(e,Re)[Re][0])?void 0:t.playable,next:null==(r=(0,a.A)(e,Re)[Re][1])?void 0:r.playable};null==(n=(0,a.A)(e,_e)[_e])||n.abort(),null==(i=(0,a.A)(e,xe)[xe])||i.reject(new F.lc),null==(s=(0,a.A)(e,Be)[Be])||s.reject(new F.lc),(0,a.A)(e,Pe)[Pe]=void 0,(0,a.A)(e,Me)[Me].forEach((e=>null==e?void 0:e.destruct())),(0,a.A)(e,Me)[Me]=[],(0,a.A)(e,Ce)[Ce].filter(me).forEach((t=>t.src=(0,a.A)(e,Qe)[Qe]())),(0,a.A)(e,Ce)[Ce]=[(0,a.A)(e,we)[we]],(0,a.A)(e,pt)[pt]((0,a.A)(e,we)[we]),(0,a.A)(e,ye)[ye]=void 0,(0,a.A)(e,Re)[Re].filter(me).forEach((t=>[t.destruct(),(0,a.A)(e,bt)[bt](t)])),(0,a.A)(e,Re)[Re]=[],l.current&&e.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!1,playable:[],previous:l.current}})),l.next&&e.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:l.next}})),(0,a.A)(e,Se)[Se]=void 0,(0,a.A)(e,_e)[_e]=void 0,(0,a.A)(e,Ge)[Ge]=void 0,(0,a.A)(e,xe)[xe]=void 0,(0,a.A)(e,Be)[Be]=void 0,(0,a.A)(e,He)[He]=void 0}))()}get autoplay(){return(0,a.A)(this,Le)[Le]}set autoplay(e){(0,a.A)(this,we)[we].autoplay=(0,a.A)(this,Le)[Le]=Boolean(e)}get buffered(){const[,e=o.DEFAULT_PLAYABLE_STATE]=this.current;return e.buffered}get bufferingComplete(){const[,e=o.DEFAULT_PLAYABLE_STATE]=this.current;return e.bufferingComplete}get canUseSameSink(){return(0,a.A)(this,ke)[ke]}set canUseSameSink(e){const[t,r]=(0,a.A)(this,Re)[Re],n=(0,a.A)(this,ke)[ke];(0,a.A)(this,ke)[ke]=Boolean(e),(0,a.A)(this,ke)[ke]!==n&&(0,a.A)(this,_e)[_e]&&ge(t)&&ge(r)&&(!(0,a.A)(this,ke)[ke]&&t.sink===r.sink||(0,a.A)(this,ke)[ke]&&t.sink!==r.sink)&&(0,a.A)(this,_e)[_e].load()}get canUseSinkStraightAway(){return(0,a.A)(this,Ne)[Ne]}get current(){return(0,a.A)(this,ye)[ye]?[(0,a.A)(this,ye)[ye].playable,(0,a.A)(this,Xe)[Xe]((0,a.A)(this,ye)[ye])]:[]}get duration(){const[,e=o.DEFAULT_PLAYABLE_STATE]=this.current;return e.duration}get element(){return(0,a.A)(this,we)[we]}get ended(){return(0,a.A)(this,De)[De]}load(e,t={}){var r=this;return(0,n.A)((function*(){var n,s,l,d,A;const[,u]=e,{signal:c}=t,h=!u||!("usePipeline"in u)||Boolean(u.usePipeline),f="force"in t&&t.force||!1,v={current:null==(n=(0,a.A)(r,Re)[Re][0])?void 0:n.playable,next:null==(s=(0,a.A)(r,Re)[Re][1])?void 0:s.playable},p="next"in t&&t.next||!1,b=n=>(0,a.A)(r,st)[st](n,{loadOptions:t,playable:e}),m="percent"in t&&t.percent&&t.percent>0?{percent:t.percent,signal:c}:"time"in t&&t.time&&t.time>0?{time:t.time,signal:c}:c?{signal:c}:void 0;if((p||e.length||(0,a.A)(r,Re)[Re][0])&&(!p||e.length||(0,a.A)(r,Re)[Re][1]||(0,a.A)(r,_e)[_e])&&(f||p||e!==v.current)&&(f||!p||e!==v.next)&&(f||!p||e!==(null==(l=(0,a.A)(r,_e)[_e])?void 0:l.playable))){var g;if(r.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADING,{detail:{next:p,playable:e}})),p&&e.length&&(null==(d=(0,a.A)(r,ye)[ye])||!d.bufferingComplete))return null==(g=(0,a.A)(r,$e)[$e])||g.log("Deferring the load of:",e),new Promise(((n,s)=>{var o;null==(o=(0,a.A)(r,_e)[_e])||o.abort();const l=()=>[d(),s(new F.lc)],d=()=>{null==c||c.removeEventListener("abort",l),(0,a.A)(r,_e)[_e]=void 0};null==c||c.addEventListener("abort",l),(0,a.A)(r,_e)[_e]={abort:l,clean:d,load:()=>n(r.load(e,(0,i.A)({},t,{force:!0}))),loaded:!1,options:t,playable:e}}));if(null==(A=(0,a.A)(r,$e)[$e])||A.log(p?"Loading next:":"Loading:",e.length?e:void 0),p){var E,y;const t=(0,a.A)(r,Re)[Re][1];var w,P,O,R;if(t)(0,a.A)(r,bt)[bt](t),ge(t)&&(0,a.A)(r,Pe)[Pe]===t.sink&&t.buffered.duration&&(yield(0,a.A)(r,Pe)[Pe].remove(t.startOffset+t.buffered.start,void 0,{duration:((null==(w=(0,a.A)(r,ye)[ye])?void 0:w.startOffset)||0)+((null==(P=(0,a.A)(r,ye)[ye])?void 0:P.duration)||0),endOfStream:(null==(O=(0,a.A)(r,ye)[ye])?void 0:O.bufferingComplete)||!1})),t.destruct(),(0,a.A)(r,Re)[Re]=[(0,a.A)(r,ye)[ye]];null==(E=(0,a.A)(r,Me)[Me][1])||E.destruct(),(0,a.A)(r,Me)[Me]=(0,a.A)(r,Pe)[Pe]?[(0,a.A)(r,Pe)[Pe]]:[],(0,a.A)(r,Ce)[Ce]=[(0,a.A)(r,we)[we]],e!==(null==(y=(0,a.A)(r,_e)[_e])?void 0:y.playable)&&(null==(R=(0,a.A)(r,_e)[_e])||R.abort())}else if(!p&&e!==v.next){var C,M;(0,a.A)(r,Ee)[Ee].forEach((e=>e())),null==(C=(0,a.A)(r,xe)[xe])||C.reject(new F.lc),null==(M=(0,a.A)(r,Be)[Be])||M.reject(new F.lc),(0,a.A)(r,Pe)[Pe]=void 0,(0,a.A)(r,Me)[Me].forEach((e=>null==e?void 0:e.destruct())),(0,a.A)(r,Me)[Me]=[],(0,a.A)(r,Ce)[Ce].filter(me).forEach((e=>e.src=(0,a.A)(r,Qe)[Qe]())),(0,a.A)(r,Ce)[Ce]=[(0,a.A)(r,we)[we]],(0,a.A)(r,ye)[ye]=void 0,(0,a.A)(r,Re)[Re].filter(me).forEach((e=>[e.destruct(),(0,a.A)(r,bt)[bt](e)])),(0,a.A)(r,Re)[Re]=[],(0,a.A)(r,De)[De]!==(0,a.A)(r,we)[we].ended&&((0,a.A)(r,De)[De]=(0,a.A)(r,we)[we].ended,r.dispatchEvent(new o.RendererEvent(o.RendererEvents.ENDED_CHANGED,{detail:{ended:(0,a.A)(r,De)[De]}}))),(0,a.A)(r,_e)[_e]&&((0,a.A)(r,_e)[_e].loaded=!1)}if(e.length&&u)if(p){if(h){var k;const t=G(null==(k=u.format)?void 0:k.codec);if((0,a.A)(r,ke)[ke]&&(0,a.A)(r,Pe)[Pe]&&(0,a.A)(r,Pe)[Pe].mime===t){var N,L,T;null==(N=(0,a.A)(r,$e)[$e])||N.log(`\tCan use the same sink (${(0,a.A)(r,Pe)[Pe].mime})`);const t=new ce(e,(0,a.A)(r,we)[we],(0,a.A)(r,Pe)[Pe],{logger:(0,a.A)(r,$e)[$e],metadataProvider:(0,a.A)(r,Ve)[Ve],pipelineProvider:(0,a.A)(r,We)[We],requester:(0,a.A)(r,qe)[qe],trackMapper:(0,a.A)(r,Ye)[Ye]});(0,a.A)(r,Re)[Re]=[(0,a.A)(r,ye)[ye],t],(0,a.A)(r,Ke)[Ke](t),t.startOffset=((null==(L=(0,a.A)(r,ye)[ye])?void 0:L.startOffset)||0)+((null==(T=(0,a.A)(r,ye)[ye])?void 0:T.duration)||0),t.load(m).catch(b)}else{var S;null==(S=(0,a.A)(r,$e)[$e])||S.log((0,a.A)(r,Pe)[Pe]?`\tNeed a new sink (${t}, current sink is for ${(0,a.A)(r,Pe)[Pe].mime}${t!==(0,a.A)(r,Pe)[Pe].mime||(0,a.A)(r,ke)[ke]?"":" but `canUseSameSink` is `false`"})`:`\tNeed a new sink (${t})`);const n=new D.A({limit:(0,a.A)(r,Oe)[Oe],logger:(0,a.A)(r,$e)[$e]});(0,a.A)(r,Me)[Me]=[(0,a.A)(r,Pe)[Pe],n];const i=(0,a.A)(r,ze)[ze]();(0,a.A)(r,Ce)[Ce]=[(0,a.A)(r,we)[we],i],(0,a.A)(r,Ne)[Ne]&&(i.src=n.url);const s=new ce(e,i,n,{logger:(0,a.A)(r,$e)[$e],metadataProvider:(0,a.A)(r,Ve)[Ve],pipelineProvider:(0,a.A)(r,We)[We],requester:(0,a.A)(r,qe)[qe],trackMapper:(0,a.A)(r,Ye)[Ye]});(0,a.A)(r,Re)[Re]=[(0,a.A)(r,ye)[ye],s],(0,a.A)(r,Ke)[Ke](s),s.load(m).catch(b)}}else{var _;null==(_=(0,a.A)(r,$e)[$e])||_.log("\tCannot use the pipeline, creating a DirectTrackController");const t=(0,a.A)(r,ze)[ze]();(0,a.A)(r,Ce)[Ce]=[(0,a.A)(r,we)[we],t];const n=new j(e,t,{logger:(0,a.A)(r,$e)[$e],trackMapper:(0,a.A)(r,Ye)[Ye]});(0,a.A)(r,Re)[Re]=[(0,a.A)(r,ye)[ye],n],(0,a.A)(r,Ke)[Ke](n),n.load(m).catch(b)}if(!(0,a.A)(r,_e)[_e]){const n=()=>{null==c||c.removeEventListener("abort",n),(0,a.A)(r,_e)[_e]=void 0};(0,a.A)(r,_e)[_e]={abort:n,clean:n,load:()=>r.load(e,(0,i.A)({},t,{force:!0})),loaded:!0,options:t,playable:e},null==c||c.addEventListener("abort",n)}r.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:p,playable:e,previous:v.next}}))}else{if(!p&&e===v.next&&(0,a.A)(r,Re)[Re][1]){var U,x;if(null==(U=(0,a.A)(r,$e)[$e])||U.log("\tSwapping to next"),(0,a.A)(r,Me)[Me].length>1){const[e,t]=(0,a.A)(r,Me)[Me];null==e||e.destruct(),(0,a.A)(r,Pe)[Pe]=t,(0,a.A)(r,Me)[Me]=[t]}else if(!ge((0,a.A)(r,Re)[Re][1])){const[e]=(0,a.A)(r,Me)[Me];null==e||e.destruct(),(0,a.A)(r,Pe)[Pe]=void 0,(0,a.A)(r,Me)[Me]=[]}if((0,a.A)(r,Ce)[Ce].length>1){var B,I;const[e,t]=(0,a.A)(r,Ce)[Ce],n=!e.paused||e.ended;(0,a.A)(r,pt)[pt](e),(0,a.A)(r,we)[we].src=(0,a.A)(r,Qe)[Qe](),(0,a.A)(r,we)[we]=t,(0,a.A)(r,Ce)[Ce]=[t],(0,a.A)(r,we)[we].autoplay=r.autoplay,(0,a.A)(r,we)[we].muted=r.muted,(0,a.A)(r,we)[we].playbackRate=r.playbackRate,(B=(0,a.A)(r,we)[we]).src||(B.src=(null==(I=(0,a.A)(r,Pe)[Pe])?void 0:I.url)||""),(0,a.A)(r,we)[we].volume=r.volume,(0,a.A)(r,Je)[Je](t),(0,a.A)(r,je)[je].disconnect(),(0,a.A)(r,je)[je].observe((0,a.A)(r,we)[we],{attributes:!0}),n&&(0,a.A)(r,we)[we].play(),r.dispatchEvent(new o.RendererEvent(o.RendererEvents.ELEMENT_CHANGED,{detail:{element:t,previous:e}}))}const[t,n]=(0,a.A)(r,Re)[Re];return t.destruct(),(0,a.A)(r,bt)[bt](t),(0,a.A)(r,ye)[ye]=n,(0,a.A)(r,Re)[Re]=[n],null==(x=(0,a.A)(r,_e)[_e])||x.clean(),r.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!1,playable:e,previous:t.playable}})),r.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:n.playable}})),void((0,a.A)(r,we)[we].currentTime<Number((0,a.A)(r,ye)[ye].startOffset.toFixed(6))?(0,a.A)(r,we)[we].currentTime=(0,a.A)(r,ye)[ye].startOffset:r.dispatchEvent(new o.RendererEvent(o.RendererEvents.TIME_CHANGED,{detail:{time:0}})))}var H,z,$;h?(null==(H=(0,a.A)(r,$e)[$e])||H.log("\tCreating a new sink"),(0,a.A)(r,Pe)[Pe]=new D.A({limit:(0,a.A)(r,Oe)[Oe],logger:(0,a.A)(r,$e)[$e]}),(0,a.A)(r,Me)[Me]=[(0,a.A)(r,Pe)[Pe]],(0,a.A)(r,we)[we].src=(0,a.A)(r,Pe)[Pe].url,(0,a.A)(r,ye)[ye]=new ce(e,(0,a.A)(r,we)[we],(0,a.A)(r,Pe)[Pe],{logger:(0,a.A)(r,$e)[$e],metadataProvider:(0,a.A)(r,Ve)[Ve],pipelineProvider:(0,a.A)(r,We)[We],requester:(0,a.A)(r,qe)[qe],trackMapper:(0,a.A)(r,Ye)[Ye]}),(0,a.A)(r,Re)[Re]=[(0,a.A)(r,ye)[ye]],(0,a.A)(r,Ke)[Ke]((0,a.A)(r,ye)[ye]),(0,a.A)(r,ye)[ye].load(m).catch(b),m&&("percent"in m||"time"in m)&&r.seek(m)):(null==(z=(0,a.A)(r,$e)[$e])||z.log("\tCannot use the pipeline, creating a DirectTrackController"),null==($=(0,a.A)(r,Pe)[Pe])||$.destruct(),(0,a.A)(r,Pe)[Pe]=void 0,(0,a.A)(r,ye)[ye]=new j(e,(0,a.A)(r,we)[we],{logger:(0,a.A)(r,$e)[$e],trackMapper:(0,a.A)(r,Ye)[Ye]}),(0,a.A)(r,Re)[Re]=[(0,a.A)(r,ye)[ye]],(0,a.A)(r,Ke)[Ke]((0,a.A)(r,ye)[ye]),(0,a.A)(r,ye)[ye].load(m).catch(b),m&&("percent"in m||"time"in m)&&r.seek(m)),r.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!1,playable:e,previous:v.current||[]}})),v.next&&r.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:v.next}}))}else p?r.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:p,playable:e,previous:v.next}})):(r.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!1,playable:e,previous:v.current}})),v.next&&r.dispatchEvent(new o.RendererEvent(o.RendererEvents.LOADED,{detail:{next:!0,playable:[],previous:v.next}})))}}))()}set logger(e){(0,a.A)(this,$e)[$e]=(null==e||null==e.namespace?void 0:e.namespace("HTML5Renderer"))||e,(0,a.A)(this,Re)[Re].filter(me).forEach((t=>t.logger=e)),(0,a.A)(this,Me)[Me].filter(me).forEach((t=>t.logger=e))}get metadata(){const[,e=o.DEFAULT_PLAYABLE_STATE]=this.current;return e.metadata}get muted(){var e;return null!=(e=(0,a.A)(this,Se)[Se])?e:(0,a.A)(this,Te)[Te]}set muted(e){(0,a.A)(this,we)[we].muted=(0,a.A)(this,Se)[Se]=Boolean(e)}get next(){return(0,a.A)(this,Re)[Re][1]?[(0,a.A)(this,Re)[Re][1].playable,(0,a.A)(this,Xe)[Xe]((0,a.A)(this,Re)[Re][1])]:(0,a.A)(this,_e)[_e]?[(0,a.A)(this,_e)[_e].playable,o.DEFAULT_PLAYABLE_STATE]:[]}pause({signal:e}={}){return!0===(0,a.A)(this,Fe)[Fe]?Promise.resolve():((0,a.A)(this,Fe)[Fe]!==o.PENDING_PAUSED&&((0,a.A)(this,Fe)[Fe]=o.PENDING_PAUSED,this.dispatchEvent(new o.RendererEvent(o.RendererEvents.PAUSED_CHANGED,{detail:{paused:o.PENDING_PAUSED}}))),new Promise(((t,r)=>{if((0,a.A)(this,we)[we].paused)return void t();const n=()=>[s(),r(new F.lc)],i=()=>[s(),t()],s=()=>{null==e||e.removeEventListener("abort",n),(0,a.A)(this,Ee)[Ee].delete(n),(0,a.A)(this,we)[we].removeEventListener("pause",i)};null==e||e.addEventListener("abort",n),(0,a.A)(this,Ee)[Ee].add(n),(0,a.A)(this,we)[we].addEventListener("pause",i),(0,a.A)(this,we)[we].pause()})))}get paused(){return(0,a.A)(this,Fe)[Fe]}get percent(){var e,t;return((0,a.A)(this,we)[we].currentTime-((null==(e=(0,a.A)(this,ye)[ye])?void 0:e.startOffset)||0))/((null==(t=(0,a.A)(this,ye)[ye])?void 0:t.duration)||1/0)}set percent(e){this.seek({percent:e})}play({signal:e}={}){var t=this;return(0,n.A)((function*(){return(0,a.A)(t,ye)[ye]?(!ge((0,a.A)(t,ye)[ye])&&(0,a.A)(t,we)[we].src.startsWith("blob")&&(yield(0,a.A)(t,ye)[ye].load({signal:e})),(0,a.A)(t,De)[De]&&(yield t.seek({signal:e,time:0})),new Promise(((r,n)=>{const i=()=>[o(),(0,a.A)(t,we)[we].pause(),n(new F.lc)],s=()=>[o(),r()],o=()=>{null==e||e.removeEventListener("abort",i),(0,a.A)(t,Ee)[Ee].delete(i),(0,a.A)(t,we)[we].removeEventListener("playing",s)};null==e||e.addEventListener("abort",i),(0,a.A)(t,Ee)[Ee].add(i),(0,a.A)(t,we)[we].addEventListener("playing",s);const l=(0,a.A)(t,we)[we].play();l&&l.catch(F.r6)}))):Promise.resolve()}))()}get playbackRate(){var e;return null!=(e=(0,a.A)(this,Ge)[Ge])?e:(0,a.A)(this,Ue)[Ue]}set playbackRate(e){(0,a.A)(this,we)[we].playbackRate=(0,a.A)(this,we)[we].defaultPlaybackRate=(0,a.A)(this,Ge)[Ge]=(0,f.A)(e,{min:.25,max:4,default:(0,a.A)(this,we)[we].playbackRate})}get ready(){return Promise.resolve()}seek(e){var t=this;return(0,n.A)((function*(){var r,n,i;if(!("percent"in e)&&!("time"in e))throw new TypeError("A seeking target must be provided");const s=null==(r=(0,a.A)(t,ye)[ye])?void 0:r.duration;if(!Number.isFinite(s)&&!Number.isNaN(s))throw new Error("Cannot seek.");const o=((null==(n=(0,a.A)(t,ye)[ye])?void 0:n.startOffset)||0)+("percent"in e?(0,f.A)(e.percent||0,{max:1})*Math.max(0,(s||0)-1):"time"in e?(0,f.A)(e.time||0,{max:Math.max(0,(s||1/0)-1)}):0);if(null==(i=(0,a.A)(t,Be)[Be])||i.reject(new F.lc),(0,a.A)(t,xe)[xe])try{yield new Promise(((e,r)=>{var n;null==(n=(0,a.A)(t,xe)[xe])||n.controller.abort(),(0,a.A)(t,Be)[Be]={reject:r,resolve:e,time:o}}))}catch(e){if((0,F.zf)(e))return;throw e}return new Promise(((r,n)=>{var i,s;const d=new l.A,A=()=>{const e=(0,a.A)(t,Be)[Be];d.abort(),c(),n(new F.lc),null==e||e.resolve()},u=()=>{const e=(0,a.A)(t,Be)[Be];c(),r(),null==e||e.resolve()},c=()=>{var r;null==(r=e.signal)||r.removeEventListener("abort",A),(0,a.A)(t,xe)[xe]=void 0,(0,a.A)(t,Be)[Be]=void 0};null==(i=e.signal)||i.addEventListener("abort",A),(0,a.A)(t,xe)[xe]={controller:d,reject:e=>(0,F.zf)(e)?u():n(e),resolve:u,time:o},(0,a.A)(t,Be)[Be]=void 0,null==(s=(0,a.A)(t,$e)[$e])||s.log("Seeking to",{time:o}),(0,a.A)(t,we)[we].currentTime=o}))}))()}get seeking(){return(0,a.A)(this,we)[we].seeking}get sinkLimit(){return(0,a.A)(this,Oe)[Oe]}set sinkLimit(e){(0,a.A)(this,Oe)[Oe]=(0,f.A)(e,{min:5,default:D.e}),(0,a.A)(this,Me)[Me].filter(me).forEach((e=>e.limit=(0,a.A)(this,Oe)[Oe]))}stop(e){var t=this;return(0,n.A)((function*(){(0,a.A)(t,Ee)[Ee].forEach((e=>e())),yield t.pause(e),!(0,a.A)(t,ye)[ye]||ge((0,a.A)(t,ye)[ye])||(0,a.A)(t,we)[we].src.startsWith("blob")||((0,a.A)(t,we)[we].src=(0,a.A)(t,Qe)[Qe]())}))()}get time(){var e;return(0,a.A)(this,we)[we].currentTime-((null==(e=(0,a.A)(this,ye)[ye])?void 0:e.startOffset)||0)}set time(e){this.seek({time:e})}get volume(){var e;return null!=(e=(0,a.A)(this,He)[He])?e:(0,a.A)(this,Ie)[Ie]}set volume(e){(0,a.A)(this,we)[we].volume=(0,a.A)(this,He)[He]=(0,f.A)(e,{max:1,default:(0,a.A)(this,we)[we].volume})}}function Et(e){Object.entries((0,a.A)(this,Ze)[Ze]).forEach((t=>{const[r,n]=t;e.addEventListener(r,n)}))}function yt(e){Object.entries((0,a.A)(this,mt)[mt]).forEach((t=>{const[r,n]=t;e.addEventListener(r,n)}))}function wt(){return{canplay:(0,a.A)(this,rt)[rt],canplaythrough:(0,a.A)(this,nt)[nt],ended:(0,a.A)(this,at)[at],error:(0,a.A)(this,st)[st],pause:(0,a.A)(this,lt)[lt],play:(0,a.A)(this,dt)[dt],playing:(0,a.A)(this,At)[At],ratechange:(0,a.A)(this,ut)[ut],seeked:(0,a.A)(this,ct)[ct],seeking:(0,a.A)(this,ht)[ht],timeupdate:(0,a.A)(this,ft)[ft],volumechange:(0,a.A)(this,vt)[vt]}}function Pt(){const e=new MediaSource,t=URL.createObjectURL(e);return e.addEventListener("sourceopen",(function r(){URL.revokeObjectURL(t),e.removeEventListener("sourceopen",r)})),t}function Ot(e){const{buffered:t,bufferingComplete:r,duration:n,metadata:i}=e;return{buffered:new A.A(t.start,t.end),bufferingComplete:r,duration:n,loaded:!0,metadata:i}}function Rt(e){(0,a.A)(this,Ee)[Ee].forEach((e=>e())),Object.entries((0,a.A)(this,Ze)[Ze]).forEach((t=>{const[r,n]=t;e.removeEventListener(r,n)}))}function Ct(e){Object.entries((0,a.A)(this,mt)[mt]).forEach((t=>{const[r,n]=t;e.removeEventListener(r,n)}))}function Mt(){return{[c.BUFFERED_RANGE_CHANGED]:(0,a.A)(this,et)[et],[c.BUFFERING_COMPLETE_CHANGED]:(0,a.A)(this,tt)[tt],[c.DURATION_CHANGED]:(0,a.A)(this,it)[it],[c.ERROR]:(0,a.A)(this,st)[st],[c.METADATA_CHANGED]:(0,a.A)(this,ot)[ot]}}gt.NAME="HTML5Renderer",gt.VERSION="0.14.15"},"+VTJ":(e,t,r)=>{r.r(t),r.d(t,{DEFAULT_CHUNK_SIZE_FLAC:()=>u,DEFAULT_CHUNK_SIZE_SECONDS:()=>c,DEFAULT_DELAY:()=>N,DEFAULT_RETRIES:()=>j,DEFAULT_TIMEOUT:()=>L,MuxerTransformer:()=>y,ParserTransformer:()=>M,copyFrame:()=>h,default:()=>V,getChunkSizeForFormat:()=>f,getMuxer:()=>v,getParser:()=>b,requester:()=>T});var n=r("Nlia"),i=r("/0+J"),a=r("MVPB"),s=r("4OMY"),o=r("P23T"),l=r("+9dH"),d=r("i51G"),A=r("qJB7");const u=1048576,c=d.e/2;function h(e,t={}){return Object.assign(Object.create(Object.getPrototypeOf(e)||e),(0,l.A)({},e,t))}function f(e,{default:t=o.WI,FLAC:r=u,seconds:n=c}={}){return(null==e?void 0:e.codec)===A.Codec.FLAC?r:null!=e&&e.bitrate?1e3*e.bitrate/8*n:t}function v(e){return p.apply(this,arguments)}function p(){return(p=(0,i.A)((function*(e){switch(e){case A.Container.MKV:throw new Error("Muxing to MKV is not supported yet");case A.Container.MP4:{const{default:e}=yield r.e(9312).then(r.bind(r,"/CUu"));return e}case A.Container.NONE:throw new Error("Muxing to RAW is a no-op");case A.Container.UNKNOWN:throw new Error("Cannot mux to unknown container");default:throw new Error(`Could not find a muxer for ${e}.`)}}))).apply(this,arguments)}function b(e){return m.apply(this,arguments)}function m(){return(m=(0,i.A)((function*(e){switch(e){case A.Codec.FLAC:{const{default:e}=yield r.e(5875).then(r.bind(r,"WXk0"));return e}case A.Codec.MP3:{const{default:e}=yield Promise.resolve().then(r.bind(r,"7BwG"));return e}default:throw new Error(`Could not find a parser for ${e}.`)}}))).apply(this,arguments)}var g=(0,s.A)("container"),E=(0,s.A)("logger");class y{constructor(e,{logger:t}={}){Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),(0,a.A)(this,g)[g]=e,this.logger=t}set logger(e){(0,a.A)(this,E)[E]=(null==e||null==e.namespace?void 0:e.namespace("MuxerTransformer"))||e}transform(e,t){var r=this;return(0,i.A)((function*(){var i;const{byteLength:s,contentLength:l,offset:d,range:A}=e,u=(0,n.A)(e,["byteLength","contentLength","offset","range"]),c=(yield v((0,a.A)(r,g)[g])).mux(e),h=c.byteLength-s,f=Object.assign(o.AA.from(c,{contentLength:l,offset:d,overhead:h,range:A}),u,c,{overhead:h});null==(i=(0,a.A)(r,E)[E])||i.debug("Muxed",e.frames.length,"frames in",(0,a.A)(r,g)[g].toUpperCase(),"container","\n\t","Adding",h,"bytes of overhead"),t.enqueue(f)}))()}}var w=r("7BwG"),P=r("/HWm"),O=(0,s.A)("logger"),R=(0,s.A)("onMetadata"),C=(0,s.A)("retained");class M{constructor({logger:e,onMetadata:t}={}){Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),this.logger=e,(0,a.A)(this,R)[R]=t}set logger(e){(0,a.A)(this,O)[O]=(null==e||null==e.namespace?void 0:e.namespace("ParserTransformer"))||e}transform(e,t){var r=this;return(0,i.A)((function*(){const{contentLength:i}=e,s=(0,n.A)(e,["byteLength","contentLength","offset","range"]),l=e.lastInFile||e.lastInRange,d=yield b(e.codec);let{metadata:u}=s;if((0,a.A)(r,C)[C]&&(0,a.A)(r,C)[C].byteLength&&(e=Object.assign(o.AA.concat((0,a.A)(r,C)[C],e),s)),e.firstInFile&&void 0===u)try{var c;u=d.metadata(new Uint8Array(e)),null==(c=(0,a.A)(r,O)[O])||c.debug("Parsed metadata",u);const{codec:t,container:n}=e;var f,v;Object.assign(u,{codec:t,container:n,filesize:i}),(u.duration||!Number.isFinite(i))&&(null==(f=(v=(0,a.A)(r,R))[R])||f.call(v,u))}catch(t){if(t instanceof P.yw)return void((0,a.A)(r,C)[C]=e);throw t}const p=d.frames(new Uint8Array(e),u),m=p.reduce(((e,t)=>e+t.size),0);if(m){var g;if(u&&e.codec===A.Codec.MP3){if(e.firstInFile){if(!u.duration&&Number.isFinite(i)){var E,y;const{bitrate:e,offset:t}=p[0];let n=0;if(e){var M;n=8*(i-t)/(1e3*e),null==(M=(0,a.A)(r,O)[O])||M.warn(`There were no duration in the metadata so it has been estimated based on the first frame's bitrate (${e} kbps):`,"\n\t","File size:",i,"\n\t","First frame's offset:",t,"\n\t",`Estimated duration ((${i} - ${t}) * 8) / (${e} * 1000):`,n)}else{var k;const{length:e}=p,{samples:s,sampling:o,size:l}=p.reduce(((t,r,n)=>{const i=n===e-1?e:1;return{samples:(t.samples+r.samples)/i,sampling:(t.sampling+r.sampling)/i,size:(t.size+r.size)/i}}),{samples:0,sampling:0,size:0}),d=(i-t)/l;n=s*d/o,null==(k=(0,a.A)(r,O)[O])||k.warn(`There were no duration in the metadata so it has been estimated based on ${e} frame${e>1?"s":""} (${m} bytes):`,"\n\t","Average number of samples per frames:",s,"\n\t","Average sampling rate:",o,"\n\t","Average frame size:",l,"\n\t","File size:",i,"\n\t","First frame's offset:",t,"\n\t",`Estimated number of frames in the file ((${i} - ${t}) / ${l}):`,d,"\n\t",`Estimated duration ((${s} * ${d}) / ${o}):`,n)}Object.assign(u,{duration:n}),null==(E=(y=(0,a.A)(r,R))[R])||E.call(y,u)}const e=u.layout.find((e=>e.type===w.MetadataBlockTypes.INFO));if(e&&p[0].offset===e.offset&&p[0].size===e.size&&(p[0]=h(p[0],{samples:0})),u.delays.start)for(let e=0,t=p.length,r=u.delays.start;e<t&&r>0;e++){const t=Math.max(p[e].samples-r,0);r-=p[e].samples-t,p[e]=h(p[e],{samples:t})}}if(e.lastInFile&&u.delays.end)for(let e=p.length-1,t=u.delays.end;e&&t>0;e--){const r=Math.max(p[e].samples-t,0);t-=p[e].samples-r,p[e]=h(p[e],{samples:r})}}null==(g=(0,a.A)(r,O)[O])||g.debug("Parsed",p.length,"frames in chunk: bytes",e.byteLength,"@",e.offset,"\n\t","Can enqueue",m,"bytes @",e.offset+p[0].offset,"\n\t",p);const n=Object.assign(e.slice(p[0].offset,l?void 0:p[0].offset+m),s,{frames:p.map((e=>h(e,{offset:e.offset-p[0].offset}))),metadata:u});(0,a.A)(r,C)[C]=e.slice(p[0].offset+m),t.enqueue(n)}else if(l){var N;null==(N=(0,a.A)(r,O)[O])||N.debug("Enqueuing the last chunk even if no frame where found","\n\t",e.byteLength,"bytes @",e.offset),t.enqueue(e)}else(0,a.A)(r,C)[C]=e}))()}}var k=r("yZHM");const N=(0,r("WzpB").JZ)(300),j=2,L=3e3,D=function(){var e=(0,i.A)((function*(e,t={}){var r,i;let{logger:a,offset:s=0,size:d}=t,A=(0,n.A)(t,["logger","offset","size"]);const[,u]=e;a=(null==(r=a)||null==r.namespace?void 0:r.namespace("Requester"))||a;const c=[...u.sources].filter((({url:e})=>e)),h=c.values(),{value:v}=h.next();if(!v)throw new Error("No suitable source");const{format:p}=u,{url:b}=v,m=d?s+d-1:0,g=new Headers;(s||m)&&g.set("range",`bytes=${s}-${m||""}`);const E=A.chunkSize||(()=>{const e=f(p);return({iteration:t})=>t<1?Math.max(o.WI,e/2):e})(),y="delay"in A?A.delay:N,w="retries"in A?A.retries:j,P="timeout"in A?A.timeout:L;null==(i=a)||i.debug("Fetching",b,"with those options:",(0,l.A)({},A,{chunkSize:E,delay:y,headers:[...g.entries()],retries:w,timeout:P}));const O=yield(0,o.Ay)(b,(0,l.A)({},A,{chunkSize:E,delay:y,headers:g,retries:w,timeout:P}));if(!O.ok)throw new Error;const R=new k.Rv({transform(e,t){var r;null==(r=a)||r.debug("Fetched and enqueued a chunk of",e.byteLength,"bytes @",e.buffer.offset,e.buffer),t.enqueue(e.buffer)}});return O.body.pipeThrough(R)}));return function(t){return e.apply(this,arguments)}}(),T=D;var S=r("lKw8");function _(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new F(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function F(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return F=function(e){this.s=e,this.n=e.next},F.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new F(e)}const U=e=>e&&"object"==typeof e&&"logger"in e,G=e=>Boolean(e);var x=(0,s.A)("logger"),B=(0,s.A)("readable"),I=(0,s.A)("requester"),H=(0,s.A)("steps"),z=(0,s.A)("stepsBuilder"),$=(0,s.A)("underlyingSource");class V{constructor({logger:e,requester:t=T,stepsBuilder:r=((e,t)=>t)}={}){Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),this.logger=e,(0,a.A)(this,I)[I]=t,(0,a.A)(this,z)[z]=r}set logger(e){var t;(0,a.A)(this,x)[x]=(null==e||null==e.namespace?void 0:e.namespace("Pipeline"))||e,U((0,a.A)(this,B)[B])&&((0,a.A)(this,B)[B].logger=e),null==(t=(0,a.A)(this,H)[H])||t.filter(G).filter(U).forEach((t=>t.logger=e)),U((0,a.A)(this,$)[$])&&((0,a.A)(this,$)[$].logger=e)}getMetadata(e,{codec:t,container:r,signal:n,size:s=65536}){var l=this;return(0,i.A)((function*(){const i=yield b(t);let d,A=0,u=null,c=0;const h=t=>(0,a.A)(l,I)[I](e,{logger:(0,a.A)(l,x)[x],offset:t*s,signal:n,size:Math.max(c-t*s,0)||s});var f,v=!1,p=!1;try{for(var m,g=_((0,o.Nm)(h));v=!(m=yield g.next()).done;v=!1){let e=m.value;try{e=d?o.AA.concat(d,e):e,A=e.contentLength,u=i.metadata(new Uint8Array(e));break}catch(t){if(t instanceof P.yw){c=t.needed||c,d=e;continue}throw t}}}catch(e){p=!0,f=e}finally{try{v&&null!=g.return&&(yield g.return())}finally{if(p)throw f}}return u&&(u.codec=t,u.container=r,A&&void 0!==u.filesize&&(u.filesize=A)),u}))()}load(e,{codec:t,container:r,metadata:n,mime:s,offset:l,onMetadata:d,signal:u}){var c=this;return(0,i.A)((function*(){const i=(0,a.A)(c,x)[x],h={codec:t,container:r,frames:[],metadata:n,mime:s},f={metadata:n};let v;switch(Object.defineProperty(h,"metadata",{get:()=>f.metadata}),(0,a.A)(c,B)[B]=yield(0,a.A)(c,I)[I](e,{logger:i,offset:l,signal:u}),s){case S.b.FLAC_IN_MP4:case S.b.MP3_IN_MP4:v=new y(A.Container.MP4,{logger:i})}const p=new o.gW(h),b=new M({logger:i,onMetadata:e=>{f.metadata=e,null==d||d(e)}});(0,a.A)(c,H)[H]=(0,a.A)(c,z)[z](e,[p,b,v],{logger:i}).filter(Boolean);const m=(0,a.A)(c,H)[H].findIndex((e=>e===p)),g=(0,a.A)(c,H)[H].findIndex((e=>e===b)),E=(0,a.A)(c,H)[H].findIndex((e=>e===v));if(-1===m)throw new TypeError("The `MarkerTransformer` is missing from the pipeline steps.");if(-1===g)throw new TypeError("The `ParserTransformer` is missing from the pipeline steps.");if(v&&-1===E)throw new TypeError("The `MuxerTransformer` is missing from the pipeline steps.");if(v?Math.min(m,g,E)!==m||Math.min(g,E)!==g:Math.min(m,g)!==m)throw new TypeError("The pipeline steps are in the wrong order. The `MarkerTransformer` must come before the `ParserTransformer`."+(v?" The `ParserTransformer` must come before the `MuxerTransformer`.":""));return(0,a.A)(c,$)[$]=new o.T$((0,a.A)(c,B)[B],{logger:(0,a.A)(c,x)[x],min:10240,max:102400}),(0,a.A)(c,H)[H].reduce(((e,t)=>e.pipeThrough(new k.Rv(t),{signal:u})),new k.ZY((0,a.A)(c,$)[$]))}))()}sniff(e,{signal:t}={}){var r=this;return(0,i.A)((function*(){let n=A.Codec.MP3;const i=A.Container.NONE,s=yield(0,a.A)(r,I)[I](e,{logger:(0,a.A)(r,x)[x],signal:t,size:1024});var l,d=!1,u=!1;try{for(var c,h=_((0,o.PY)(s));d=!(c=yield h.next()).done;d=!1){const e=c.value;1716281667===new DataView(e).getUint32(0)&&(n=A.Codec.FLAC);break}}catch(e){u=!0,l=e}finally{try{d&&null!=h.return&&(yield h.return())}finally{if(u)throw l}}return{codec:n,container:i}}))()}}},lKw8:(e,t,r)=>{r.d(t,{b:()=>n});let n=function(e){return e.AAC="audio/aac",e.AAC_IN_MP4='audio/mp4; codecs="mp4a.40.2"',e.FLAC="audio/flac",e.FLAC_IN_MP4='audio/mp4; codecs="flac"',e.MP3="audio/mpeg",e.MP3_IN_MP4='audio/mp4; codecs="mp3"',e}({})},wL2u:(e,t,r)=>{r("lQVW")}}]);