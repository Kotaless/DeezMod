"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[9567],{LSdk:(e,t,r)=>{r.d(t,{T:()=>u});var s=r("nKUr"),n=(r("q1tI"),r("NSet")),a=r("IXMZ");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},s=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),s.forEach((function(t){o(e,t,r[t])}))}return e}function c(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const u=e=>{var{height:t="30px",iconOnly:r,color:n="text.neutral.primary.default"}=e,a=c(e,["height","iconOnly","color"]);return(0,s.jsx)(m,l({height:t,color:n,iconOnly:r},a))},m=e=>{var{color:t,compensate:r,iconOnly:o}=e,u=c(e,["color","compensate","iconOnly"]);return(0,s.jsxs)(n.az,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r.push.apply(r,s)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}(l({as:"svg",viewBox:o?"0 0 279 279":"0 0 992 279",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Deezer logo"},u),{sx:l({width:u.width,height:u.height},u.sx),children:[!o&&(0,s.jsx)(a.Bv.path,{clipRule:"evenodd",d:"M353.119 68.19h54.962c34.031 0 58.095 22.64 58.095 54.82s-24.064 54.82-58.095 54.82h-54.962V68.19Zm42.717 80.023h9.967c10.679 0 16.375-7.119 16.375-25.203 0-18.083-5.696-25.203-16.375-25.203h-9.967v50.406Zm167.163 29.617h-90.275V68.19h90.275v29.617h-47.701v12.673h44.853v24.206h-44.853v13.527h47.701v29.617Zm100.526 0h-90.274V68.19h90.274v29.617h-47.7v12.673h44.853v24.206h-44.853v13.527h47.7v29.617Zm327.639 0c-6.152-16.765-14.756-34.653-26.33-54.704 13.536-3.97 21.631-12.504 21.631-25.603 0-19.935-18.368-29.333-47.416-29.333h-59.803v109.64h42.716v-45.352c9.491 15.984 16.483 31.068 21.074 45.352h48.128Zm-69.202-60.658V97.807h14.809c6.265 0 9.825 3.418 9.825 9.683s-3.56 9.682-9.825 9.682h-14.809Zm-52.968 60.658h-90.275V68.19h90.275v29.617h-47.7v12.673h44.853v24.206h-44.853v13.527h47.7v29.617ZM673.779 97.807h44.076c-18.287 14.963-33.337 31.91-44.931 50.406v29.617h96.967v-29.617h-48.466c11.106-16.158 26.625-32.248 48.466-50.406V68.19h-96.112v29.617Z",fillRule:"evenodd",fill:t}),(0,s.jsx)(a.Bv.path,{clipRule:"evenodd",d:"M232.97 42.874c2.569-14.89 6.339-24.254 10.515-24.271h.008c7.787.026 14.099 32.498 14.099 72.59 0 40.091-6.321 72.589-14.116 72.589-3.196 0-6.145-5.518-8.519-14.765-3.752 33.85-11.538 57.119-20.552 57.119-6.974 0-13.233-13.978-17.435-36.022-2.869 41.924-10.09 71.669-18.53 71.669-5.297 0-10.126-11.787-13.701-30.979-4.299 39.617-14.231 67.376-25.813 67.376-11.582 0-21.532-27.75-25.813-67.376-3.549 19.192-8.378 30.979-13.701 30.979-8.44 0-15.643-29.745-18.53-71.669-4.202 22.044-10.444 36.022-17.436 36.022-9.004 0-16.8-23.261-20.551-57.119-2.357 9.274-5.323 14.765-8.519 14.765-7.795 0-14.116-32.498-14.116-72.59 0-40.09 6.32-72.59 14.116-72.59 4.184 0 7.928 9.39 10.523 24.272C49.057 17.198 55.81.51 63.446.51c9.067 0 16.924 23.6 20.64 57.87 3.638-24.942 9.155-40.843 15.335-40.843 8.66 0 16.022 31.274 18.75 74.897 5.129-22.366 12.554-36.397 20.773-36.397 8.218 0 15.643 14.04 20.763 36.398 2.737-43.624 10.09-74.898 18.751-74.898 6.17 0 11.679 15.9 15.334 40.843C197.5 24.11 205.357.51 214.423.51c7.61 0 14.389 16.697 18.547 42.363ZM.09 84.053c0-17.922 3.583-32.454 8.006-32.454s8.007 14.532 8.007 32.454c0 17.921-3.584 32.454-8.007 32.454S.09 101.974.09 84.053Zm261.653 0c0-17.922 3.584-32.454 8.007-32.454 4.422 0 8.007 14.532 8.007 32.454 0 17.921-3.585 32.454-8.007 32.454-4.423 0-8.007-14.533-8.007-32.454Z",fill:"background.accent.primary.default",fillRule:"evenodd"})]}))}},RGaU:(e,t,r)=>{r.d(t,{k:()=>u});var s=r("nKUr"),n=r("NSet"),a=r("AeFk"),o=r("l4Uc");function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=a.i7`
	100% {
		transform: rotate(360deg);
	}
`,u=e=>{var{thickness:t=4,size:r=32,trackColor:a=o.A.neutral[20],thumbColor:u=o.A.neutral[100],speed:m=600}=e,d=function(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["thickness","size","trackColor","thumbColor","speed"]);return(0,s.jsx)(n.az,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},s=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),s.forEach((function(t){l(e,t,r[t])}))}return e}({animation:`${c} ${m}ms infinite linear`,borderColor:a,borderRadius:"50%",borderStyle:"solid",borderTopColor:u,borderWidth:`${t}px`,display:"inline-block",height:`${r}px`,width:`${r}px`},d))}},X5lq:(e,t,r)=>{r.d(t,{u:()=>n});var s=r("nKUr");const n=(0,r("AGAM").w)({displayName:"InformationIcon",viewBox:"0 0 24 24",pathSmall:[(0,s.jsx)("path",{d:"M13 9c0-.335-.073-.575-.218-.735C12.616 8.08 12.354 8 12 8c-.357 0-.617.084-.782.268-.146.163-.218.403-.218.732 0 .36.082.61.248.77.166.16.416.23.752.23.368 0 .634-.106.799-.31.134-.166.201-.397.201-.69Zm-1.66 7h1.33v-4.67h-1.33V16Z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M12 20c5.137 0 8-2.863 8-8 0-5.137-2.863-8-8-8-5.137 0-8 2.863-8 8 0 5.137 2.863 8 8 8Zm0-14.667c4.424 0 6.667 2.243 6.667 6.667 0 4.424-2.243 6.667-6.667 6.667-4.424 0-6.667-2.243-6.667-6.667 0-4.424 2.243-6.667 6.667-6.667Z",clipRule:"evenodd"})],pathMedium:[(0,s.jsx)("path",{d:"M13.5 7.5c0-.503-.11-.862-.327-1.103C12.923 6.12 12.531 6 12 6c-.536 0-.925.126-1.173.403-.219.243-.327.604-.327 1.097 0 .54.123.914.372 1.154.249.24.624.346 1.128.346.552 0 .952-.159 1.199-.465.2-.249.301-.596.301-1.035ZM11 11v7h2v-7h-2Z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M12 23c7.064 0 11-3.936 11-11S19.064 1 12 1 1 4.936 1 12s3.936 11 11 11Zm0-20c5.972 0 9 3.028 9 9 0 5.972-3.028 9-9 9-5.972 0-9-3.028-9-9 0-5.972 3.028-9 9-9Z",clipRule:"evenodd"})]});n.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"InformationIcon"}},m4fd:(e,t,r)=>{r.d(t,{A:()=>A});var s,n,a=r("q1tI"),o=r("NSet"),l=r("Q7m9"),i=r("XkdG"),c=r("65w8"),u=r("I0XM"),m=r("HmE0"),d=r("IXMZ"),_=r("Wp0Y"),p=r("7HKI"),E=r("oJMq"),h=r("zerP"),R=r("guCc");function f({password:e}){const{level:t,color:r}=(e=>{switch((0,h.sR)(e)){case R.m.STRONG:return{level:(0,_.AP)("securitylevel_title_strong_web"),color:"text.feedback.success.default"};case R.m.MEDIUM:return{level:(0,_.AP)("securitylevel_title_medium_web"),color:"text.feedback.warning.default"};case R.m.WEAK:return{level:(0,_.AP)("securitylevel_title_weak_web"),color:"text.feedback.error.default"};default:return{level:(0,_.AP)("securitylevel_title_tooweak_web"),color:"text.feedback.error.default"}}})(e);if(!e)return null;const l=[{regex:/^.{8,}$/,text:(0,_.WI)("passwordrequirements_text_atleastXcharacters_web","passwordrequirements_text_atleastXcharacters_web",{count:8,sprintf:["8"]})},{regex:/.*[a-zA-Z].*/,text:(0,_.AP)("passwordrequirements_text_atleastoneletter_web")},{regex:/.*\d.*/,text:(0,_.AP)("passwordrequirements_text_atleastonenumber_web")}];return a.createElement(o.so,{direction:"row",justifyContent:"space-between",borderRadius:"s",py:"spacing.m",mt:"spacing.s",px:"spacing.l",bg:"background.neutral.tertiary.default"},a.createElement(o.Tk,{me:"spacing.l",alignItems:"flex-start"},a.createElement(o.EY,{variant:"body.l.default"},(0,_.AP)("passwordrequirements_title_yourpasswordmustinclude_web")),l.map(((t,r)=>{const l=t.regex.test(e);return a.createElement(o.zt,{key:t.text+r,color:l?"text.feedback.success.default":"text.neutral.primary.default",spacing:"spacing.xs"},l?s||(s=a.createElement(p._,{animation:"300ms bounce-scale",color:"icon.feedback.success.default"})):n||(n=a.createElement(E.k,{color:"icon.neutral.primary.disabled"})),a.createElement("span",null,t.text))}))),a.createElement(o.EY,{variant:"body.l.default",textAlign:"end",flex:"1",color:r},t))}const w=(0,d.Bv)(o.az,{baseStyle:{maxWidth:"400px",w:"100%"}});w.defaultProps={as:"form"};const A=({ctaLabel:e=(0,_.AP)("Enregistrer"),defaultPassword:t="",defaultPasswordConfirm:r="",email:s,error:n,isLoading:d=!1,onSubmit:p})=>{const[E,R]=(0,a.useState)(t),[A,O]=(0,a.useState)(r),[g,S]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[y,N]=(0,a.useState)(!1);return a.createElement(o.so,{alignItems:"center",justifyContent:"center",w:"100%",mb:"4"},a.createElement(w,{onSubmit:e=>{e.preventDefault();try{(0,h.BE)(E)}catch(e){return void S(e.message)}A===E?p(E,A):v((0,_.AP)("passwordsecurity_text_newpasswordsneedtobethesame_web"))},id:"password-change-form"},a.createElement(o.BJ,{direction:"column",spacing:"6"},s&&a.createElement(l.MJ,{id:"email-readonly",isReadOnly:!0},a.createElement(l.lR,{cursor:"default"},(0,_.AP)("generic_title_emailaddress_web")),a.createElement(i.p,{type:"email",value:s,isDisabled:!0})),a.createElement(l.MJ,{isInvalid:Boolean(g)},a.createElement(l.lR,{cursor:"default"},(0,_.AP)("Votre nouveau mot de passe")),a.createElement(c.y,{"data-testid":"new_password",id:"reset_new_password",name:"password",onChange:e=>{R(e.target.value),S(""),v("")},value:E,onShowPasswordChange:N,showPassword:y}),a.createElement(f,{password:E}),a.createElement(u.Wt,null,g)),a.createElement(l.MJ,{isInvalid:Boolean(b)},a.createElement(l.lR,{cursor:"default"},(0,_.AP)("Vérification du mot de passe")),a.createElement(c.y,{"data-testid":"new_password_confirmation",id:"reset_new_confirm",name:"passwordConfirm",onChange:e=>{O(e.target.value),S(""),v("")},value:A,onShowPasswordChange:N,showPassword:y}),a.createElement(u.Wt,null,b)),n&&a.createElement(o.EY,null,n),a.createElement(m.$n,{"data-testid":"new_password_save_button",isDisabled:d,isLoading:d,type:"submit"},e))))}},"3xjP":(e,t,r)=>{r.r(t),r.d(t,{default:()=>V}),r("EV0h"),r("gS5K");var s=r("q1tI"),n=r("TRpf"),a=r("nrKQ"),o=r("3TL7"),l=r("WKgy"),i=r("TqF5"),c=r("m9nS"),u=r("Wp0Y"),m=r("HmE0"),d=r("DdAs"),_=r("NSet"),p=r("YIja"),E=r("jKJc");let h=function(e){return e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.SUCCESS=2]="SUCCESS",e[e.ERROR=3]="ERROR",e}({}),R=function(e){return e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.SUCCESS=2]="SUCCESS",e[e.ERROR=3]="ERROR",e}({}),f=function(e){return e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.SUCCESS=2]="SUCCESS",e[e.ERROR_INVALID_EMAIL=3]="ERROR_INVALID_EMAIL",e[e.ERROR_UNKNOWN_EMAIL=4]="ERROR_UNKNOWN_EMAIL",e}({}),w=function(e){return e.Reset="reset",e.Migration="migration",e}({});var A=r("yiM3");const O=e=>{const{email:t,userID:r,formType:n}=e;let a=s.createElement(m.$n,{as:"a",href:(0,A.t)({route:"login",query:t?{email:t}:void 0})},(0,u.AP)("Connexion"));return 0===r&&(a=s.createElement(m.$n,{as:"a",href:"/"},(0,u.AP)("Retour"))),s.createElement(s.Fragment,null,s.createElement(d.rQ,null,n===w.Reset?(0,u.AP)("generic_title_resetyourpassword_web"):(0,u.AP)("passwordsetting_title_setyourpassword_web")),s.createElement(d.cw,null,s.createElement(_.mc,{maxW:"container.sm",width:"fit-content"},s.createElement(p.N,{status:"success"},(0,u.AP)("Votre mot de passe a été modifié avec succès.")))),s.createElement(E.jl,null,a))};O.displayName="ConfirmSuccess";const g=O;var S,b,v=r("RGaU"),y=r("Q7m9"),N=r("XkdG"),P=r("I0XM");class I extends s.PureComponent{render(){const{resetRequestRequestStatus:e,email:t,formType:r,onEmailChange:n,onReset:a}=this.props,o=e===f.PENDING,l=e===f.ERROR_INVALID_EMAIL||e===f.ERROR_UNKNOWN_EMAIL;let i;o&&(i=S||(S=s.createElement(v.k,{thickness:2,size:14})));const c=r===w.Reset?s.createElement(y.MJ,{isInvalid:l},s.createElement(y.lR,{htmlFor:"email"},(0,u.AP)("generic_title_emailaddress_web")),s.createElement(N.p,{id:"reset_mail",type:"text",value:t,onChange:n,placeholder:(0,u.AP)("generic_title_emailaddress_web")}),e===f.ERROR_INVALID_EMAIL?s.createElement(P.Wt,null,(0,u.AP)("Adresse email invalide")):null,e===f.ERROR_UNKNOWN_EMAIL?s.createElement(P.Wt,null,(0,u.AP)("Identifiant inconnu.")):null):null;return s.createElement(s.Fragment,null,s.createElement(d.rQ,null,r===w.Reset?(0,u.AP)("Réinitialiser mon mot de passe"):(0,u.AP)("passwordsetting_title_setyourpassword_web")),s.createElement(d.cw,null,s.createElement(_.mc,{maxW:"container.sm"},s.createElement("form",{onSubmit:a},s.createElement(_.Tk,{spacing:"spacing.l"},s.createElement(p.N,{status:"error"},(0,u.AP)("Votre demande a expiré. Veuillez réessayer.")),c,s.createElement(m.$n,{type:"submit",isDisabled:o,rightIcon:i,width:"100%"},(0,u.AP)("generic_title_resetyourpassword_web")))))))}}const x=(0,r("Al8Q").A)("form",{target:"ebwqeia0"})({name:"5noinz",styles:"display:flex;flex-direction:column;margin:0 auto;max-width:400px;width:100%;& *{box-sizing:border-box;}"});class C extends s.PureComponent{render(){const{resetRequestRequestStatus:e,email:t,onEmailChange:r,onReset:n,formType:a}=this.props;if(a===w.Migration)return null;const o=e===f.ERROR_INVALID_EMAIL||e===f.ERROR_UNKNOWN_EMAIL,l=e===f.PENDING;let i;l&&(i=b||(b=s.createElement(v.k,{thickness:2,size:14})));const c=e&&o?(0,u.AP)("Merci de vérifier le format de votre adresse email."):void 0;return s.createElement(s.Fragment,null,s.createElement(d.rQ,null,(0,u.AP)("generic_title_resetyourpassword_web")),s.createElement(d.cw,null,s.createElement(x,{onSubmit:n},s.createElement(_.BJ,{direction:"column",spacing:"6",mb:"6"},s.createElement(_.EY,{color:"text.secondary",textAlign:"center"},(0,u.AP)("resetpasswordmodal_text_enteremailtoreceivelink_web")),s.createElement(y.MJ,{isInvalid:Boolean(c)},s.createElement(y.lR,null,(0,u.AP)("generic_title_emailaddress_web")),s.createElement(N.p,{id:"reset_mail",type:"email",onChange:r,value:t}),s.createElement(P.Wt,null,c)),s.createElement(m.$n,{type:"submit",isDisabled:l,rightIcon:i},(0,u.AP)("generic_action_sendlink_web"))))))}}C.defaultProps={resetRequestRequestStatus:f.NONE};var M=r("m4fd");const L=({resetConfirmResult:e,email:t,onResetConfirm:r,formType:n})=>s.createElement(s.Fragment,null,s.createElement(d.rQ,null,n===w.Reset?(0,u.AP)("generic_title_resetyourpassword_web"):(0,u.AP)("passwordsetting_title_setyourpassword_web")),s.createElement(d.cw,null,s.createElement(M.A,{email:t,onSubmit:r,ctaLabel:n===w.Reset?(0,u.AP)("Réinitialiser"):(0,u.AP)("Confirmer"),isLoading:e===R.PENDING})));var D,q,k,T,U;class j extends s.PureComponent{render(){const{email:e}=this.props;return s.createElement(s.Fragment,null,s.createElement(d.rQ,null,(0,u.AP)("Vous avez un message !")),s.createElement(d.cw,{textAlign:"center"},s.createElement("span",{dangerouslySetInnerHTML:{__html:(0,u.WI)("Consultez votre boîte de réception, nous vous avons envoyé un lien pour réinitialiser votre mot de passe à : %s.","Consultez votre boîte de réception, nous vous avons envoyé un lien pour réinitialiser votre mot de passe à : %s.",{sprintf:[`<span id="reset_confirm_mailto" class="color-primary">${e}</span>`],count:1})}}),D||(D=s.createElement("br",null)),q||(q=s.createElement("br",null)),(0,u.AP)("Si dans quelques minutes vous n'avez toujours pas reçu le message, merci de vérifier que celui-ci n'est pas dans vos messages indésirables.")),this._renderFooter())}_renderFooter(){const{redirectUri:e}=this.props;return e?s.createElement(E.jl,{textAlign:"center"},s.createElement(m.$n,{as:"a",href:e},(0,u.AP)("Retour"))):null}}j.defaultProps={redirectUri:void 0};class G extends s.PureComponent{render(){return s.createElement(s.Fragment,null,s.createElement(d.rQ,null,(0,u.AP)("Réinitialiser mon mot de passe")),k||(k=s.createElement(d.cw,null,s.createElement(_.ov,null,s.createElement(v.k,null)))))}}class W extends s.Component{constructor(e){super(e),this._onEmailChange=e=>{this.setState({email:e.currentTarget.value})},this._onReset=e=>{e.preventDefault(),e.stopPropagation();const{email:t}=this.state;this.setState({resetRequestRequestStatus:f.PENDING},(()=>{o.default.sendResetPassword(t).then((()=>{this.setState({resetRequestRequestStatus:f.SUCCESS})})).catch((e=>{this.setState({resetRequestRequestStatus:"error"===e.message?f.ERROR_INVALID_EMAIL:f.ERROR_UNKNOWN_EMAIL})}))}))},this._onResetConfirm=(e,t)=>{const{resetKey:r,formType:s}=this.props,{email:n}=this.state;this.setState({resetConfirmationRequestStatus:R.PENDING},(()=>{s===w.Reset?o.default.sendResetPasswordConfirm(window.btoa(n),window.btoa(r||""),e,t).then((()=>{this.setState({resetConfirmationRequestStatus:R.SUCCESS})})).catch((()=>{this.setState({resetConfirmationRequestStatus:R.ERROR})})):s===w.Migration&&a.A.call({method:"user.profileMigrationThroughEmail",data:{email:n,password:e,token:r},success:e=>{e?this.setState({resetConfirmationRequestStatus:R.SUCCESS}):this.setState({tokenValidationRequestStatus:h.ERROR})},error:()=>this.setState({tokenValidationRequestStatus:h.ERROR})})}))},this._checkToken=()=>{this.setState({tokenValidationRequestStatus:h.PENDING},(()=>{a.A.call({method:"user.checkResetPasswordToken",data:{EMAIL:this.state.email,TOKEN:this.props.resetKey},success:e=>{this.setState({tokenValidationRequestStatus:e?h.SUCCESS:h.ERROR})},error:()=>{this.setState({tokenValidationRequestStatus:h.ERROR})}})}))},this.state={email:e.defaultEmailValue,resetConfirmationRequestStatus:R.NONE,resetRequestRequestStatus:f.NONE,tokenValidationRequestStatus:e.formType===w.Migration?h.SUCCESS:h.NONE}}componentDidMount(){this.state.email&&this.props.resetKey&&this.state.tokenValidationRequestStatus===h.NONE&&this._checkToken()}render(){const{userID:e,defaultEmailValue:t,resetKey:r,redirectUri:n,formType:a}=this.props;return this.state.resetRequestRequestStatus===f.SUCCESS?this._renderModal(s.createElement(j,{email:this.state.email,redirectUri:n})):this.state.resetConfirmationRequestStatus===R.SUCCESS?this._renderModal(s.createElement(g,{email:this.state.email,userID:e,formType:a})):this.state.tokenValidationRequestStatus===h.PENDING?this._renderModal(T||(T=s.createElement(G,null))):t&&r&&this.state.tokenValidationRequestStatus===h.SUCCESS?this._renderModal(s.createElement(L,{resetConfirmResult:this.state.resetConfirmationRequestStatus,email:this.state.email,onResetConfirm:this._onResetConfirm,formType:a})):t&&r&&this.state.tokenValidationRequestStatus===h.ERROR?this._renderModal(s.createElement(I,{resetRequestRequestStatus:this.state.resetRequestRequestStatus,email:this.state.email,onEmailChange:this._onEmailChange,onReset:this._onReset,formType:a})):this._renderModal(s.createElement(C,{resetRequestRequestStatus:this.state.resetRequestRequestStatus,email:this.state.email,onEmailChange:this._onEmailChange,onReset:this._onReset,formType:a}))}_renderModal(e){const{isStandalone:t}=this.props;return t?s.createElement(c.A.Layout,null,e):s.createElement(s.Fragment,null,U||(U=s.createElement(E.s_,null)),e)}}l.A.addReducers({modal:i.Ay});const V=(0,n.Ng)((({user:e,modal:t},r)=>{var s,n,a;let o,l,i=t.data?t.data.defaultValue:"";return null!==(s=r.location)&&void 0!==s&&s.query.email&&(i=window.atob(r.location.query.email)),null!==(n=r.location)&&void 0!==n&&n.query.key&&(o=r.location.query.key,r.formType===w.Reset&&(o=window.atob(o))),null!==(a=r.location)&&void 0!==a&&a.query.redirect_uri&&document&&document.location&&document.location.hostname===new URL(r.location.query.redirect_uri).hostname&&(l=r.location.query.redirect_uri),{userID:e.id,defaultEmailValue:i,resetKey:o,redirectUri:l,isStandalone:Boolean(r.location)}}))(W)},m9nS:(e,t,r)=>{r.d(t,{A:()=>y});var s=r("WKgy"),n=r("q1tI"),a=r("TRpf"),o=r("juqV"),l=r("TqF5"),i=r("Wp0Y"),c=r("tZCQ"),u=r("jKJc");class m extends n.Component{constructor(...e){super(...e),this._onClick=()=>{this.props.onClick&&this.props.onClick(),this.props.closeModal(!0)}}render(){if(c.A.isAllowed("revamp2023"))return n.createElement(u.s_,{id:"modal-close",onClick:this._onClick,"aria-label":(0,i.AP)("Fermer")});const{color:e}=this.props,t=(0,o.A)("modal-close icon icon-cancel",{"modal-close-light":"light"===e});return n.createElement("button",{className:t,id:"modal-close",type:"button",onClick:this._onClick,"aria-label":(0,i.AP)("Fermer")})}}m.defaultProps={color:"",onClick:void 0};const d=(0,a.Ng)(null,{closeModal:l.Oo})(m);d.displayName="Close";const _=d;var p,E=r("9yOc"),h=r("D+hi"),R=r("LSdk"),f=r("NSet"),w=r("DdAs");class A extends n.Component{render(){const e=(0,o.A)("modal-body",this.props.className);return c.A.isAllowed("revamp2023")?n.createElement(w.cw,{className:e},this.props.children):n.createElement("div",{className:e},this.props.children)}}const O=A;class g extends n.Component{render(){if(c.A.isAllowed("revamp2023"))return n.createElement(w.rQ,null,this.props.children);const e=(0,o.A)("modal-header",this.props.className);return n.createElement("div",{id:"modal_title",className:e},this.props.children)}}const S=g;class b extends n.Component{render(){if(c.A.isAllowed("revamp2023"))return n.createElement(u.jl,null,this.props.children);const e=(0,o.A)("modal-footer",this.props.className);return n.createElement("div",{className:e},this.props.children)}}const v=b;s.A.addReducers({modal:l.Ay});const y={Close:_,Layout:function({children:e}){return E.A.is("mobile")||E.A.is("tablet")?n.createElement(u.aF,{isOpen:!0,size:"full"},n.createElement("div",{className:"modal-container"},n.createElement("div",{className:"modal-dialog modal-small"},p||(p=n.createElement("div",{className:"modal-header-partner"},n.createElement("span",{className:"cell"},n.createElement(h.QQ,null,n.createElement(R.T,null))))),e))):n.createElement(u.aF,{isOpen:!0,size:"full"},n.createElement(f.ov,{flexDirection:"column",mt:"spacing.3xl"},e))},Body:O,Header:S,Footer:v}},EYlq:(e,t,r)=>{r.d(t,{u:()=>n});var s=r("Wp0Y");const n=e=>{switch(e){case"invalid_msisdn":return(0,s.AP)("errormessage_text_invalidphonenumber_web");case"sms_login_limit":return(0,s.AP)("SMScoderesentconfirmationscreen_text_allattemptsused_web");case"internal_error":case"swap_limit":default:return(0,s.AP)("errormessage_text_anerroroccurredpleasetryagain_web");case"invalid_code":case"invalid_code_wrong":return(0,s.AP)("errormessage_text_invalidcode_web");case"code_too_short":return(0,s.AP)("errormessage_text_codeincomplete_web");case"code_too_long":return(0,s.AP)("errormessage_text_codetoomanydigits_web");case"phone_already_used":return(0,s.AP)("Ce numéro est déjà utilisé.")}}},H9G8:(e,t,r)=>{r.d(t,{CZ:()=>u,Ee:()=>m,Hf:()=>l,In:()=>E,RQ:()=>d,SY:()=>i,U9:()=>_,aS:()=>p,jQ:()=>o,qb:()=>c,r_:()=>h,vM:()=>R});var s=r("Wp0Y"),n=r("5U+Y"),a=r("guCc");class o extends Error{constructor(e){super(e),this.name=a.U.FORM_ERROR}}class l extends o{constructor(){super((0,s.AP)("formerrormessage_text_emailaddressformatnotvalid_web")),this.name=a.U.EMAIL_NOT_VALID}}class i extends o{constructor(e){super((0,s.AP)("errormessage_text_domainnnamenotallowed_web",{sprintf:[e]})),this.name=a.U.EMAIL_DOMAIN_NOT_VALID}}class c extends o{constructor(){super((0,s.AP)("errormessage_title_accountalrdyassociatedwithemail_web")),this.name=a.U.EMAIL_ALREADY_USED}}class u extends o{constructor(){super((0,s.WI)("formerrormessage_text_passwordnotenoughchars_web","formerrormessage_text_passwordnotenoughchars_web",{sprintf:[n.wz],count:n.wz})),this.name=a.U.PASSWORD_TOO_SHORT}}class m extends o{constructor(){super((0,s.WI)("formerrormessage_text_passwordtoomanychars_web","formerrormessage_text_passwordtoomanychars_web",{sprintf:[n.K9],count:n.K9})),this.name=a.U.PASSWORD_TOO_LONG}}class d extends o{constructor(){super((0,s.AP)("errormessage_text_passwordnbeginendwithspace_web")),this.name=a.U.PASSWORD_HAS_TRAILLING_WHITESPACE}}class _ extends o{constructor(){super((0,s.WI)("formerrormessage_text_usernamenotenoughchars_web","formerrormessage_text_usernamenotenoughchars_web",{sprintf:[n.D6],count:n.D6})),this.name=a.U.BLOGNAME_TOO_SHORT}}class p extends o{constructor(){super((0,s.WI)("formerrormessage_text_usernametoomanychars_web","formerrormessage_text_usernametoomanychars_web",{sprintf:[n.d0],count:n.d0})),this.name=a.U.BLOGNAME_TOO_LONG}}class E extends o{constructor(){super((0,s.AP)("errormessage_text_usernamecannotcontainsemojis_web")),this.name=a.U.BLOGNAME_HAS_SPECIAL_CHARS}}class h extends o{constructor(e){super((0,s.WI)("agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web","agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web",{sprintf:[e],count:e})),this.name=a.U.MIN_LEGAL_AGE}}class R extends o{constructor(){super((0,s.AP)("errormessage_text_ageisinvalid_web")),this.name=a.U.AGE_INVALID}}},guCc:(e,t,r)=>{r.d(t,{U:()=>s,m:()=>n});let s=function(e){return e.AGE_INVALID="FORM_ERROR_AGE_INVALID",e.BLOGNAME_HAS_SPECIAL_CHARS="FORM_ERROR_BLOGNAME_HAS_SPECIAL_CHARS",e.BLOGNAME_TOO_LONG="FORM_ERROR_BLOGNAME_TOO_LONG",e.BLOGNAME_TOO_SHORT="FORM_ERROR_BLOGNAME_TOO_SHORT",e.EMAIL_ALREADY_USED="FORM_ERROR_EMAIL_ALREADY_USED",e.EMAIL_DOMAIN_NOT_VALID="FORM_ERROR_EMAIL_DOMAIN_NOT_VALID",e.EMAIL_NOT_VALID="FORM_ERROR_EMAIL_NOT_VALID",e.FORM_ERROR="FORM_ERROR",e.MIN_LEGAL_AGE="FORM_ERROR_MIN_LEGAL_AGE",e.PASSWORD_HAS_TRAILLING_WHITESPACE="FORM_ERROR_PASSWORD_HAS_TRAILLING_WHITESPACE",e.PASSWORD_TOO_LONG="FORM_ERROR_PASSWORD_TOO_LONG",e.PASSWORD_TOO_SHORT="FORM_ERROR_PASSWORD_TOO_SHORT",e}({}),n=function(e){return e[e.TOO_WEAK=0]="TOO_WEAK",e[e.WEAK=1]="WEAK",e[e.MEDIUM=2]="MEDIUM",e[e.STRONG=3]="STRONG",e}({})},zerP:(e,t,r)=>{r.d(t,{$O:()=>E,A$:()=>u,BE:()=>_,Hx:()=>h,PJ:()=>m,iE:()=>p,sR:()=>d}),r("WpbS"),r("/eM8");var s=r("nrKQ"),n=r("1EyH"),a=r("kSUS"),o=r("guCc"),l=r("H9G8"),i=r("5U+Y"),c=r("EYlq");const u=async(e,t=!1)=>{if(e=e.trim(),!(0,n.UC)(e))throw new l.Hf;const r=await s.A.callAsync({method:"deezer.emailCheck",data:{EMAIL:e}});if(!r.domain_validity)throw new l.SY(r.domain);if(r.availability)return t&&r.suggestion?{success:!0,suggestion:r.suggestion}:{success:!0};throw new l.qb},m=(0,a.A)(((e,t,r,s)=>u(e,t).then(r).catch(s)),400),d=e=>{const t=[/.*[A-Z]+.*/,/.*[a-z]+.*/,/.*[0-9]+.*/,/.*[^A-Za-z0-9]+.*/];if([/.*[0-9]+.*/,/.*[a-zA-Z]+.*/,/^.{8,}$/].reduce(((t,r)=>t&&r.test(e)),!0)){const r=t.reduce(((t,r)=>t+(r.test(e)?1:0)),0);return r>3?o.m.STRONG:r>2?o.m.MEDIUM:r>1?o.m.WEAK:o.m.TOO_WEAK}return o.m.TOO_WEAK},_=e=>{if(e!==e.trim())throw new l.RQ;if(e.length>i.K9)throw new l.Ee;if(e.length<i.wz)throw new l.CZ;return!0},p=e=>{if((e=e.trim()).length<i.D6)throw new l.U9;if(e.length>i.d0)throw new l.aS;if((0,n.Sx)(e)||(0,n.BB)(e))throw new l.In;return!0},E=e=>{if("string"==typeof e){if(!/^\d+$/.test(e.toString()))throw new l.vM;e=parseInt(e,10)}if(e<i.fB)throw new l.r_(i.fB);if(e>i.D3)throw new l.vM;return!0},h=e=>{if(0===e.length)throw new l.jQ((0,c.u)("invalid_code"));if(e.length<6)throw new l.jQ((0,c.u)("code_too_short"));if(e.length>6)throw new l.jQ((0,c.u)("code_too_long"));return!0}},"1EyH":(e,t,r)=>{r.d(t,{BB:()=>n,Sx:()=>s,UC:()=>a});const s=e=>/[\u2000-\u2BFF]/.test(e),n=e=>/[\u{10000}-\u{10FFFF}]/u.test(e),a=e=>!!e.match(/^[_0-9a-z-+]+[_.0-9a-z-+]*@([0-9a-z-]+\.)+[a-z]{2,13}$/i)},juqV:(e,t,r)=>{function s(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=s(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}r.d(t,{A:()=>n});const n=function(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=s(e))&&(n&&(n+=" "),n+=t);return n}}}]);