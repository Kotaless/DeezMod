"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[8271],{eh3h:(e,t,i)=>{i.d(t,{d:()=>c});var a=i("q1tI"),s=i("pgtK"),l=i("IXMZ"),r=i("Ui1H"),n=(...e)=>e.filter(Boolean).join(" "),o=e=>e?"":void 0,c=(0,l.Rf)((function(e,t){const i=(0,l.o5)("Switch",e),{spacing:c="0.5rem",children:d,...p}=(0,r.MN)(e),{state:u,getInputProps:h,getCheckboxProps:m,getRootProps:y,getLabelProps:b}=(0,s.vp)(p),E=(0,a.useMemo)((()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...i.container})),[i.container]),g=(0,a.useMemo)((()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...i.track})),[i.track]),v=(0,a.useMemo)((()=>({userSelect:"none",marginStart:c,...i.label})),[c,i.label]);return a.createElement(l.Bv.label,{...y(),className:n("chakra-switch",e.className),__css:E},a.createElement("input",{className:"chakra-switch__input",...h({},t)}),a.createElement(l.Bv.span,{...m(),className:"chakra-switch__track",__css:g},a.createElement(l.Bv.span,{__css:i.thumb,className:"chakra-switch__thumb","data-checked":o(u.isChecked),"data-hover":o(u.isHovered)})),d&&a.createElement(l.Bv.span,{className:"chakra-switch__label",...b(),__css:v},d))}));c.displayName="Switch"},cXQW:(e,t,i)=>{i.d(t,{e:()=>d});var a=i("nKUr"),s=i("IXMZ"),l=i("s86Q"),r=i("gCxg"),n=i("AGAM");function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),a.forEach((function(t){o(e,t,i[t])}))}return e}const d=(0,s.Rf)(((e,t)=>{const{isAttached:i}=e;let s={};return i&&(s={display:"flex","> *:first-of-type:not(:last-of-type)":{borderEndRadius:0,_focus:(0,r.q)()},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0,_focus:(0,r.q)()},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0,_focus:(0,r.q)()}}),(0,a.jsx)(n.o.Provider,{value:e.size||"medium",children:(0,a.jsx)(l.e2,c({ref:t,sx:s},e))})}))},FFEP:(e,t,i)=>{i.d(t,{X:()=>s});var a=i("nKUr");const s=(0,i("AGAM").w)({displayName:"LockIcon",viewBox:"0 0 24 24",pathSmall:[(0,a.jsx)("path",{d:"M13.5 14a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M17.683 8H15.5c0-2.569-1.252-4-3.5-4S8.5 5.431 8.5 8H6.315c-.412 0-.762.26-.832.62A29.453 29.453 0 0 0 5 13.68a29.99 29.99 0 0 0 .5 5.7c.07.36.42.62.831.62H17.7c.412 0 .762-.26.832-.62.631-2.94.622-7.87-.017-10.76-.07-.36-.42-.62-.832-.62ZM9.83 8c0-1.087.266-1.73.578-2.087.288-.33.763-.583 1.592-.583.83 0 1.304.253 1.592.583.312.356.578 1 .578 2.087H9.83Zm7.472 1.33H6.71a28.173 28.173 0 0 0-.378 4.362 29.07 29.07 0 0 0 .392 4.978h10.594c.477-2.649.47-6.736-.015-9.34Z",clipRule:"evenodd"})],pathMedium:[(0,a.jsx)("path",{d:"M10.53 13.436c.32-.29.8-.436 1.47-.436.585 0 1.048.134 1.38.402.409.33.62.862.62 1.598 0 .672-.14 1.172-.46 1.504-.321.332-.821.496-1.54.496-.658 0-1.138-.144-1.463-.436-.369-.33-.537-.85-.537-1.564 0-.708.16-1.231.53-1.564Z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M3.878 7H7c0-3.853 1.789-6 5-6 3.21 0 5 2.147 5 6h3.119c.587 0 1.088.347 1.188.827.913 3.853.926 10.426.025 14.346-.1.48-.6.827-1.189.827H3.904c-.588 0-1.088-.347-1.188-.827-.426-2.066-.739-4.786-.714-7.6.025-2.573.313-4.84.689-6.746.1-.48.6-.827 1.188-.827ZM9 7c0-1.65.386-2.63.832-3.165C10.232 3.357 10.87 3 12 3c1.13 0 1.769.357 2.168.835C14.614 4.371 15 5.35 15 7H9Zm10.512 2c.642 3.38.653 8.563.02 12H4.527A35.994 35.994 0 0 1 4 14.592c.02-2.09.224-3.964.505-5.592h15.006Z",clipRule:"evenodd"})]});s.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"LockIcon"}},"/uRm":(e,t,i)=>{i.d(t,{F:()=>a});let a=function(e){return e.ONBOARDING="ON_BOARDING",e.ONBOARDING_LEGACY="ON_BOARDING_LEGACY",e.SELECT_PROFILE="SELECT_PROFILE",e.BRIDGED_WEBVIEW="BRIDGED_WEBVIEW",e.PLAYLIST_ASSISTANT="PLAYLIST_ASSISTANT",e}({})},yVTX:(e,t,i)=>{i.r(t),i.d(t,{default:()=>q});var a,s,l=i("q1tI"),r=i("TRpf"),n=i("Wp0Y"),o=i("tZCQ"),c=i("m9nS"),d=(i("aRRr"),i("juqV")),p=i("NSet"),u=i("XkdG"),h=i("Q7m9"),m=i("eh3h"),y=i("kbCH"),b=i("cXQW"),E=i("HmE0"),g=i("iooo"),v=i("WmA5"),P=i("fkXJ"),f=i("5G9X"),C=i("+dDc"),S=i("eq2Y"),A=i("TqF5"),_=i("xobL"),I=i("0CJU"),N=i("aoCz"),x=i("vZvY"),T=i("FFEP"),D=i("K5vB");class k extends l.Component{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.onSuccessUpdatePicture=this.onSuccessUpdatePicture.bind(this),this.onErrorUpdatePicture=this.onErrorUpdatePicture.bind(this),this.onDisplayUpdatePicture=this.onDisplayUpdatePicture.bind(this),this.onChangeTitle=this.onChangeTitle.bind(this),this.onTogglePrivate=this.onTogglePrivate.bind(this),this.onToggleCollab=this.onToggleCollab.bind(this),this.onChangeDescription=this.onChangeDescription.bind(this),this.onSubmitPicture=this.onSubmitPicture.bind(this),this.onError=this.onError.bind(this);const{STATUS:t,TYPE:i,TITLE:a,DESCRIPTION:s}=e.data;this.state={isPrivate:1===Number(t)||3===Number(t),isCollab:2===Number(t),isCharts:5===Number(i),title:a||"",description:s||"",playlistPictureData:"",titleError:!1,submited:!1,createdPlaylistId:"0"}}renderThumbnail(){const{playlistPictureData:e}=this.state,{data:t}=this.props;return l.createElement(D.AG,{value:{onSuccess:this.onSuccessUpdatePicture,onError:this.onErrorUpdatePicture,onDisplay:this.onDisplayUpdatePicture}},l.createElement(I.A,{type:f.Ay.Playlist,height:200,width:200,bordered:!0,uploadCover:"force",multiCover:!0,coverLink:!1,data:t,imgSrc:e}))}renderInfo(){const{titleError:e,title:t}=this.state;return l.createElement("div",{className:"playlist-assistant-info"},l.createElement(p.so,{flexDirection:"column",gap:"spacing.xs",marginBottom:"spacing.l"},l.createElement(p.EY,{id:"playlist-assistant-name",role:"heading",variant:"body.s.default"},(0,n.AP)("createeditplaylistfield_title_name_web")),l.createElement(u.p,{placeholder:(0,n.AP)("Nom de la playlist"),maxLength:50,autoFocus:!0,onChange:this.onChangeTitle,value:t,"aria-labelledby":"playlist-assistant-name","aria-required":"true",size:"small",isInvalid:e})),this.renderCollabOption(),this.renderPrivateOption())}renderCollabOption(){const{isPrivate:e,isCollab:t}=this.state,i=(0,d.A)("playlist-assistant-option",{disabled:e});return l.createElement(h.MJ,{className:i,key:"collab",onChange:e=>this.onToggleCollab(e,t)},l.createElement(h.lR,{htmlFor:"collab",display:"flex",flex:"1"},a||(a=l.createElement("div",{className:"playlist-assistant-option-icon"},l.createElement(x.O,{color:"icon.neutral.secondary.default"}))),l.createElement("div",{className:"playlist-assistant-option-text"},l.createElement("div",{className:"playlist-assistant-option-text-title"},(0,n.AP)("Collaborative")),l.createElement("div",{className:"playlist-assistant-option-text-subtitle"},(0,n.AP)("createeditplaylistsettings_title_inviteotherstoaddtracks_web")))),l.createElement(m.d,{id:"collab",isChecked:t,isDisabled:e}))}renderPrivateOption(){const{isPrivate:e,isCollab:t}=this.state,i=(0,d.A)("playlist-assistant-option",{disabled:t});return l.createElement(h.MJ,{className:i,key:"private",onChange:t=>this.onTogglePrivate(t,e)},l.createElement(h.lR,{htmlFor:"private",display:"flex",flex:"1"},s||(s=l.createElement("div",{className:"playlist-assistant-option-icon"},l.createElement(T.X,{color:"icon.neutral.secondary.default"}))),l.createElement("div",{className:"playlist-assistant-option-text"},l.createElement("div",{className:"playlist-assistant-option-text-title"},(0,n.AP)("Privée")),l.createElement("div",{className:"playlist-assistant-option-text-subtitle"},(0,n.AP)("createeditplaylistsettings_title_onlyyoucanseethisplaylist_web")))),l.createElement(m.d,{id:"private",isChecked:e,isDisabled:t}))}renderDescription(){const{description:e}=this.state;return l.createElement(p.so,{flexDirection:"column",gap:"spacing.xs",marginBottom:"spacing.l"},l.createElement(p.EY,{id:"playlist-assistant-description",variant:"body.s.default"},(0,n.AP)("createeditplaylistfield_title_description_web")),l.createElement(y.T,{maxLength:200,placeholder:(0,n.AP)("createeditplaylistfield_text_playlistdescription_web"),onChange:this.onChangeDescription,"aria-labelledby":"playlist-assistant-description","aria-required":"false",value:e,fontSize:"sm",height:"92px",resize:"none"}))}renderSubmitButton(){const e=this.props.type===N.F.EDITION?(0,n.AP)("Enregistrer"):(0,n.AP)("Créer");return l.createElement(b.e,{display:"flex",justifyContent:"flex-end"},l.createElement(E.$n,{isDisabled:this.state.submited,onClick:this.onSubmit},e))}onSuccessUpdatePicture(e){const{type:t,playlistId:i}=this.props;this.props.type===N.F.CREATION?v.A.push((0,g.jd)(`/playlist/${this.state.createdPlaylistId}`)):t===N.F.EDITION&&i&&this.props.dispatchUpdateThumbnail({id:i,picture:e,pictureType:f.Ay.Playlist}),this.props.dispatchCloseModal()}onErrorUpdatePicture(){this.props.dispatchCloseModal(),this.props.type===N.F.CREATION&&v.A.push((0,g.jd)(`/playlist/${this.state.createdPlaylistId}`)),(0,P.A)({body:(0,n.AP)("Une erreur est survenue, merci de réessayer plus tard.")})}onDisplayUpdatePicture(e,t){this.setState({playlistPictureData:e,uploadPicture:t})}onTogglePrivate(e,t){e.stopPropagation(),this.setState((e=>({isPrivate:!t,isCollab:!t&&e.isCollab})))}onToggleCollab(e,t){e.stopPropagation(),this.setState((e=>({isCollab:!t,isPrivate:!t&&e.isPrivate})))}onChangeTitle(e){this.setState({titleError:!1,title:e.target.value})}onChangeDescription(e){this.setState({description:e.target.value})}onSubmit(){const{description:e}=this.state,t=this.state.title.trim(),{type:i,playlistId:a,sngId:s=[]}=this.props;if(""!==t){if(this.setState({submited:!0}),i===N.F.EDITION&&a)return this.editionMustBeSaved()?void this.props.dispatchUpdatePlaylist({data:{playlist_id:a,status:this.getStatusCode(),title:t,description:e}}).then((({id:e})=>this.onSubmitPicture(e))).catch(this.onError):void this.onSubmitPicture(a);this.props.dispatchCreatePlaylist({data:{title:t,description:e,songs:s,status:this.getStatusCode()}}).then((({id:e})=>this.onSubmitPicture(e))).catch(this.onError)}else this.setState({titleError:!0})}onSubmitPicture(e){const{type:t}=this.props,{playlistPictureData:i,uploadPicture:a}=this.state;if(i&&a)return this.setState({createdPlaylistId:e}),void a(e);t===N.F.CREATION?(v.A.push((0,g.jd)(`/playlist/${e}`)),(0,P.A)({body:(0,n.AP)("toastmessage_title_playlistcreated_web")})):t===N.F.EDITION&&(0,P.A)({body:(0,n.AP)("toastmessage_title_playlistupdated_web")}),this.props.dispatchCloseModal()}onError(){this.setState({submited:!1})}editionMustBeSaved(){const{TITLE:e,DESCRIPTION:t,STATUS:i}=this.props.data,{title:a,description:s}=this.state;return a!==e||s!==t||this.getStatusCode()!==Number(i)}getStatusCode(){const{isCollab:e,isPrivate:t}=this.state;let i=0;return e&&(i+=2),t&&(i+=1),i}render(){return l.createElement("div",{className:"playlist-assistant-container"},this.renderThumbnail(),this.renderInfo(),this.renderDescription(),this.renderSubmitButton())}}const R={dispatchCreatePlaylist:S.Nt,dispatchUpdatePlaylist:S.i5,dispatchUpdateThumbnail:S.C_,dispatchCloseModal:A.Oo},O=(0,r.Ng)((({entities:e,user:t},{playlistId:i})=>({data:i?(0,C.lS)(e,{id:i,currentUserId:(0,_.F6)(t)}):{}})),R)(k);var L=i("wZBD"),w=i("W1Rt"),M=i("nKUr");const B=(0,i("AGAM").w)({displayName:"WandIcon",viewBox:"0 0 24 24",pathSmall:[(0,M.jsx)("path",{fillRule:"evenodd",d:"M18.949 6.553 19.197 8l-1.3-.683-1.3.683.249-1.447-1.052-1.025 1.453-.211.65-1.317.65 1.317 1.453.21-1.051 1.026ZM4 17.172l9.294-9.295 2.829 2.829L6.828 20 4 17.172Zm1.886 0 .942.942 5.122-5.122-.942-.942-5.122 5.122Zm7.408-7.41-1.344 1.345.943.943 1.344-1.345-.943-.942Zm4.586 3.555L17.23 12l-.65 1.317-1.453.21 1.052 1.026L15.93 16l1.3-.683 1.3.683-.248-1.447 1.051-1.025-1.453-.211ZM9.897 7.983l-1.3.684.249-1.448-1.052-1.024 1.453-.212.65-1.316.65 1.316L12 6.195l-1.05 1.024.248 1.448-1.3-.684Z",clipRule:"evenodd"})],pathMedium:[(0,M.jsx)("path",{fillRule:"evenodd",d:"M20.846 4.975 18.896 6l.372-2.17-1.577-1.538 2.18-.317L20.846 0l.974 1.975 2.18.317-1.577 1.537L22.795 6l-1.95-1.025ZM1 18.757 14.942 4.816l4.242 4.242L5.243 23 1 18.757Zm2.828 0 1.415 1.415 7.683-7.683-1.415-1.415-7.683 7.683ZM14.942 7.644 12.925 9.66l1.415 1.415 2.016-2.017-1.414-1.414Zm6.878 5.331L20.846 11l-.975 1.975-2.18.317 1.577 1.537L18.896 17l1.95-1.025L22.796 17l-.373-2.17L24 13.291l-2.18-.317Zm-11.974-8L7.896 6l.372-2.17-1.577-1.538 2.18-.317L9.846 0l.974 1.975 2.18.317-1.577 1.537L11.795 6l-1.95-1.025Z",clipRule:"evenodd"})]});B.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"WandIcon"};var U,Z=i("nxAS"),F=i("/uRm"),j=i("6vqc");const G=({title:e,description:t,icon:i,onClick:a})=>l.createElement(p.zt,{onClick:()=>{a()},w:"full",gap:"spacing.m",py:"spacing.s",role:"group",_hover:{bg:"background.neutral.secondary.hovered"},cursor:"pointer"},l.createElement(p.az,{bg:"background.neutral.tertiary.default",_groupHover:{bg:"background.neutral.tertiary.hovered"},p:"spacing.s",borderRadius:"2xs"},i),l.createElement(p.az,{flex:"1"},l.createElement(p.EY,{variant:"body.l.default"},e),l.createElement(p.EY,{variant:"body.s.default",color:"text.neutral.secondary.default",as:"span"},t)),U||(U=l.createElement(j.v,null)));var H,z,W,Y;const q=({playlistId:e,sngId:t,type:i})=>{const[a,s]=l.useState(!1),d=(0,r.wA)(),u=i===N.F.CREATION,h=u?(0,n.AP)("generic_title_createplaylist_web"):(0,n.AP)("generic_title_editplaylist_web"),m=o.A.isAllowed("employee_feature")&&u&&!a&&!(null!=t&&t.length);return(0,l.useEffect)((()=>{d((0,A.Yo)(m?"small":"large"))}),[m]),l.createElement("div",{className:"modal-playlist-assistant",role:"dialog","aria-labelledby":"modal_title"},H||(H=l.createElement(c.A.Close,null)),l.createElement(c.A.Header,null,h),l.createElement(c.A.Body,{className:"wrapper"},m?l.createElement(p.Tk,{gap:"spacing.xs"},l.createElement(G,{title:"Playlist",description:"Add your favorite songs",icon:z||(z=l.createElement(w.G,{size:"medium"})),onClick:()=>{s(!0)}}),l.createElement(G,{title:l.createElement(l.Fragment,null,"AI Playlist ",W||(W=l.createElement(L.J,{variant:"accent"},"BETA"))),description:"Generate a playlist from an idea",icon:Y||(Y=l.createElement(B,{size:"medium"})),onClick:()=>{d((0,A.Oo)()),d((0,Z.J2)({name:F.F.BRIDGED_WEBVIEW,data:{pathname:"/genplaylist",fixedLogo:!0}}))}})):l.createElement(O,{type:i,playlistId:e,sngId:t})))}}}]);