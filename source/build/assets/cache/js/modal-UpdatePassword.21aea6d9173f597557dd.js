"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[1443],{oJMq:(e,t,r)=>{r.d(t,{k:()=>a});var s=r("nKUr");const a=(0,r("AGAM").w)({displayName:"CheckCircleOutlinedIcon",viewBox:"0 0 24 24",pathSmall:[(0,s.jsx)("path",{d:"m11.109 12.996 2.905-4.303 1.104.746-3.732 5.53-3.248-2.723.856-1.023 2.115 1.773Z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 12c0-5.138 2.862-8 8-8 5.137 0 8 2.862 8 8 0 5.137-2.863 8-8 8-5.138 0-8-2.863-8-8Zm1.333 0c0 4.424 2.243 6.667 6.667 6.667 4.424 0 6.667-2.243 6.667-6.667 0-4.424-2.243-6.667-6.667-6.667-4.424 0-6.667 2.243-6.667 6.667Z",clipRule:"evenodd"})],pathMedium:[(0,s.jsx)("path",{d:"M11.456 13.45 15.813 7l1.658 1.12-5.599 8.288L7 12.326l1.284-1.533 3.172 2.658Z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M1 12C1 4.936 4.936 1 12 1s11 3.936 11 11-3.936 11-11 11S1 19.064 1 12Zm2 0c0 5.972 3.028 9 9 9 5.972 0 9-3.028 9-9 0-5.972-3.028-9-9-9-5.972 0-9 3.028-9 9Z",clipRule:"evenodd"})]});a.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"CheckCircleOutlinedIcon"}},m4fd:(e,t,r)=>{r.d(t,{A:()=>f});var s,a,n=r("q1tI"),o=r("NSet"),c=r("Q7m9"),_=r("XkdG"),l=r("65w8"),i=r("I0XM"),d=r("HmE0"),u=r("IXMZ"),m=r("Wp0Y"),w=r("7HKI"),A=r("oJMq"),E=r("zerP"),O=r("guCc");function p({password:e}){const{level:t,color:r}=(e=>{switch((0,E.sR)(e)){case O.m.STRONG:return{level:(0,m.AP)("securitylevel_title_strong_web"),color:"text.feedback.success.default"};case O.m.MEDIUM:return{level:(0,m.AP)("securitylevel_title_medium_web"),color:"text.feedback.warning.default"};case O.m.WEAK:return{level:(0,m.AP)("securitylevel_title_weak_web"),color:"text.feedback.error.default"};default:return{level:(0,m.AP)("securitylevel_title_tooweak_web"),color:"text.feedback.error.default"}}})(e);if(!e)return null;const c=[{regex:/^.{8,}$/,text:(0,m.WI)("passwordrequirements_text_atleastXcharacters_web","passwordrequirements_text_atleastXcharacters_web",{count:8,sprintf:["8"]})},{regex:/.*[a-zA-Z].*/,text:(0,m.AP)("passwordrequirements_text_atleastoneletter_web")},{regex:/.*\d.*/,text:(0,m.AP)("passwordrequirements_text_atleastonenumber_web")}];return n.createElement(o.so,{direction:"row",justifyContent:"space-between",borderRadius:"s",py:"spacing.m",mt:"spacing.s",px:"spacing.l",bg:"background.neutral.tertiary.default"},n.createElement(o.Tk,{me:"spacing.l",alignItems:"flex-start"},n.createElement(o.EY,{variant:"body.l.default"},(0,m.AP)("passwordrequirements_title_yourpasswordmustinclude_web")),c.map(((t,r)=>{const c=t.regex.test(e);return n.createElement(o.zt,{key:t.text+r,color:c?"text.feedback.success.default":"text.neutral.primary.default",spacing:"spacing.xs"},c?s||(s=n.createElement(w._,{animation:"300ms bounce-scale",color:"icon.feedback.success.default"})):a||(a=n.createElement(A.k,{color:"icon.neutral.primary.disabled"})),n.createElement("span",null,t.text))}))),n.createElement(o.EY,{variant:"body.l.default",textAlign:"end",flex:"1",color:r},t))}const R=(0,u.Bv)(o.az,{baseStyle:{maxWidth:"400px",w:"100%"}});R.defaultProps={as:"form"};const f=({ctaLabel:e=(0,m.AP)("Enregistrer"),defaultPassword:t="",defaultPasswordConfirm:r="",email:s,error:a,isLoading:u=!1,onSubmit:w})=>{const[A,O]=(0,n.useState)(t),[f,g]=(0,n.useState)(r),[h,S]=(0,n.useState)(""),[b,x]=(0,n.useState)(""),[M,I]=(0,n.useState)(!1);return n.createElement(o.so,{alignItems:"center",justifyContent:"center",w:"100%",mb:"4"},n.createElement(R,{onSubmit:e=>{e.preventDefault();try{(0,E.BE)(A)}catch(e){return void S(e.message)}f===A?w(A,f):x((0,m.AP)("passwordsecurity_text_newpasswordsneedtobethesame_web"))},id:"password-change-form"},n.createElement(o.BJ,{direction:"column",spacing:"6"},s&&n.createElement(c.MJ,{id:"email-readonly",isReadOnly:!0},n.createElement(c.lR,{cursor:"default"},(0,m.AP)("generic_title_emailaddress_web")),n.createElement(_.p,{type:"email",value:s,isDisabled:!0})),n.createElement(c.MJ,{isInvalid:Boolean(h)},n.createElement(c.lR,{cursor:"default"},(0,m.AP)("Votre nouveau mot de passe")),n.createElement(l.y,{"data-testid":"new_password",id:"reset_new_password",name:"password",onChange:e=>{O(e.target.value),S(""),x("")},value:A,onShowPasswordChange:I,showPassword:M}),n.createElement(p,{password:A}),n.createElement(i.Wt,null,h)),n.createElement(c.MJ,{isInvalid:Boolean(b)},n.createElement(c.lR,{cursor:"default"},(0,m.AP)("Vérification du mot de passe")),n.createElement(l.y,{"data-testid":"new_password_confirmation",id:"reset_new_confirm",name:"passwordConfirm",onChange:e=>{g(e.target.value),S(""),x("")},value:f,onShowPasswordChange:I,showPassword:M}),n.createElement(i.Wt,null,b)),a&&n.createElement(o.EY,null,a),n.createElement(d.$n,{"data-testid":"new_password_save_button",isDisabled:u,isLoading:u,type:"submit"},e))))}},"Dqj/":(e,t,r)=>{r.r(t),r.d(t,{default:()=>A}),r("/eM8");var s,a=r("q1tI"),n=r("TRpf"),o=r("Wp0Y"),c=r("nrKQ"),_=r("TqF5"),l=r("H/eQ"),i=r("JPzp"),d=r("m4fd"),u=r("jKJc"),m=r("DdAs");const w=(0,o.AP)("Votre mot de passe n'a pas été mis à jour.");function A(){const e=(0,n.wA)(),[t,r]=(0,a.useState)("");return a.createElement(a.Fragment,null,s||(s=a.createElement(u.s_,null)),a.createElement(m.rQ,null,(0,o.AP)("Modification du mot de passe")),a.createElement(m.cw,null,a.createElement(d.A,{error:t,onSubmit:function(t){c.A.call({method:"deezer.updatePassword",data:{password:t},success:async t=>{if(t)return await(0,i.d)(t.arl),l.A.trigger(l.A.user.updatePassword),void e((0,_.Oo)());r(w)},error:e=>{let t=w;"Session not secured"===e.response.error[e.name]&&(t=(0,o.AP)("errormessage_text_codetimedoutrequestnewcode_web")),r(t)}})}})))}},JPzp:(e,t,r)=>{r.d(t,{d:()=>a}),r("/eM8");var s=r("nrKQ");const a=e=>new Promise(((t,r)=>{s.A.call({method:"userAuth.loginByArl",data:{ARL:e},success:t,error:r})}))},EYlq:(e,t,r)=>{r.d(t,{u:()=>a});var s=r("Wp0Y");const a=e=>{switch(e){case"invalid_msisdn":return(0,s.AP)("errormessage_text_invalidphonenumber_web");case"sms_login_limit":return(0,s.AP)("SMScoderesentconfirmationscreen_text_allattemptsused_web");case"internal_error":case"swap_limit":default:return(0,s.AP)("errormessage_text_anerroroccurredpleasetryagain_web");case"invalid_code":case"invalid_code_wrong":return(0,s.AP)("errormessage_text_invalidcode_web");case"code_too_short":return(0,s.AP)("errormessage_text_codeincomplete_web");case"code_too_long":return(0,s.AP)("errormessage_text_codetoomanydigits_web");case"phone_already_used":return(0,s.AP)("Ce numéro est déjà utilisé.")}}},"5U+Y":(e,t,r)=>{r.d(t,{D3:()=>_,D6:()=>n,K9:()=>a,d0:()=>o,fB:()=>c,wz:()=>s});const s=8,a=50,n=2,o=50,c=16,_=150},H9G8:(e,t,r)=>{r.d(t,{CZ:()=>i,Ee:()=>d,Hf:()=>c,In:()=>A,RQ:()=>u,SY:()=>_,U9:()=>m,aS:()=>w,jQ:()=>o,qb:()=>l,r_:()=>E,vM:()=>O});var s=r("Wp0Y"),a=r("5U+Y"),n=r("guCc");class o extends Error{constructor(e){super(e),this.name=n.U.FORM_ERROR}}class c extends o{constructor(){super((0,s.AP)("formerrormessage_text_emailaddressformatnotvalid_web")),this.name=n.U.EMAIL_NOT_VALID}}class _ extends o{constructor(e){super((0,s.AP)("errormessage_text_domainnnamenotallowed_web",{sprintf:[e]})),this.name=n.U.EMAIL_DOMAIN_NOT_VALID}}class l extends o{constructor(){super((0,s.AP)("errormessage_title_accountalrdyassociatedwithemail_web")),this.name=n.U.EMAIL_ALREADY_USED}}class i extends o{constructor(){super((0,s.WI)("formerrormessage_text_passwordnotenoughchars_web","formerrormessage_text_passwordnotenoughchars_web",{sprintf:[a.wz],count:a.wz})),this.name=n.U.PASSWORD_TOO_SHORT}}class d extends o{constructor(){super((0,s.WI)("formerrormessage_text_passwordtoomanychars_web","formerrormessage_text_passwordtoomanychars_web",{sprintf:[a.K9],count:a.K9})),this.name=n.U.PASSWORD_TOO_LONG}}class u extends o{constructor(){super((0,s.AP)("errormessage_text_passwordnbeginendwithspace_web")),this.name=n.U.PASSWORD_HAS_TRAILLING_WHITESPACE}}class m extends o{constructor(){super((0,s.WI)("formerrormessage_text_usernamenotenoughchars_web","formerrormessage_text_usernamenotenoughchars_web",{sprintf:[a.D6],count:a.D6})),this.name=n.U.BLOGNAME_TOO_SHORT}}class w extends o{constructor(){super((0,s.WI)("formerrormessage_text_usernametoomanychars_web","formerrormessage_text_usernametoomanychars_web",{sprintf:[a.d0],count:a.d0})),this.name=n.U.BLOGNAME_TOO_LONG}}class A extends o{constructor(){super((0,s.AP)("errormessage_text_usernamecannotcontainsemojis_web")),this.name=n.U.BLOGNAME_HAS_SPECIAL_CHARS}}class E extends o{constructor(e){super((0,s.WI)("agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web","agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web",{sprintf:[e],count:e})),this.name=n.U.MIN_LEGAL_AGE}}class O extends o{constructor(){super((0,s.AP)("errormessage_text_ageisinvalid_web")),this.name=n.U.AGE_INVALID}}},guCc:(e,t,r)=>{r.d(t,{U:()=>s,m:()=>a});let s=function(e){return e.AGE_INVALID="FORM_ERROR_AGE_INVALID",e.BLOGNAME_HAS_SPECIAL_CHARS="FORM_ERROR_BLOGNAME_HAS_SPECIAL_CHARS",e.BLOGNAME_TOO_LONG="FORM_ERROR_BLOGNAME_TOO_LONG",e.BLOGNAME_TOO_SHORT="FORM_ERROR_BLOGNAME_TOO_SHORT",e.EMAIL_ALREADY_USED="FORM_ERROR_EMAIL_ALREADY_USED",e.EMAIL_DOMAIN_NOT_VALID="FORM_ERROR_EMAIL_DOMAIN_NOT_VALID",e.EMAIL_NOT_VALID="FORM_ERROR_EMAIL_NOT_VALID",e.FORM_ERROR="FORM_ERROR",e.MIN_LEGAL_AGE="FORM_ERROR_MIN_LEGAL_AGE",e.PASSWORD_HAS_TRAILLING_WHITESPACE="FORM_ERROR_PASSWORD_HAS_TRAILLING_WHITESPACE",e.PASSWORD_TOO_LONG="FORM_ERROR_PASSWORD_TOO_LONG",e.PASSWORD_TOO_SHORT="FORM_ERROR_PASSWORD_TOO_SHORT",e}({}),a=function(e){return e[e.TOO_WEAK=0]="TOO_WEAK",e[e.WEAK=1]="WEAK",e[e.MEDIUM=2]="MEDIUM",e[e.STRONG=3]="STRONG",e}({})},zerP:(e,t,r)=>{r.d(t,{$O:()=>A,A$:()=>i,BE:()=>m,Hx:()=>E,PJ:()=>d,iE:()=>w,sR:()=>u}),r("WpbS"),r("/eM8");var s=r("nrKQ"),a=r("1EyH"),n=r("kSUS"),o=r("guCc"),c=r("H9G8"),_=r("5U+Y"),l=r("EYlq");const i=async(e,t=!1)=>{if(e=e.trim(),!(0,a.UC)(e))throw new c.Hf;const r=await s.A.callAsync({method:"deezer.emailCheck",data:{EMAIL:e}});if(!r.domain_validity)throw new c.SY(r.domain);if(r.availability)return t&&r.suggestion?{success:!0,suggestion:r.suggestion}:{success:!0};throw new c.qb},d=(0,n.A)(((e,t,r,s)=>i(e,t).then(r).catch(s)),400),u=e=>{const t=[/.*[A-Z]+.*/,/.*[a-z]+.*/,/.*[0-9]+.*/,/.*[^A-Za-z0-9]+.*/];if([/.*[0-9]+.*/,/.*[a-zA-Z]+.*/,/^.{8,}$/].reduce(((t,r)=>t&&r.test(e)),!0)){const r=t.reduce(((t,r)=>t+(r.test(e)?1:0)),0);return r>3?o.m.STRONG:r>2?o.m.MEDIUM:r>1?o.m.WEAK:o.m.TOO_WEAK}return o.m.TOO_WEAK},m=e=>{if(e!==e.trim())throw new c.RQ;if(e.length>_.K9)throw new c.Ee;if(e.length<_.wz)throw new c.CZ;return!0},w=e=>{if((e=e.trim()).length<_.D6)throw new c.U9;if(e.length>_.d0)throw new c.aS;if((0,a.Sx)(e)||(0,a.BB)(e))throw new c.In;return!0},A=e=>{if("string"==typeof e){if(!/^\d+$/.test(e.toString()))throw new c.vM;e=parseInt(e,10)}if(e<_.fB)throw new c.r_(_.fB);if(e>_.D3)throw new c.vM;return!0},E=e=>{if(0===e.length)throw new c.jQ((0,l.u)("invalid_code"));if(e.length<6)throw new c.jQ((0,l.u)("code_too_short"));if(e.length>6)throw new c.jQ((0,l.u)("code_too_long"));return!0}},"1EyH":(e,t,r)=>{r.d(t,{BB:()=>a,Sx:()=>s,UC:()=>n});const s=e=>/[\u2000-\u2BFF]/.test(e),a=e=>/[\u{10000}-\u{10FFFF}]/u.test(e),n=e=>!!e.match(/^[_0-9a-z-+]+[_.0-9a-z-+]*@([0-9a-z-]+\.)+[a-z]{2,13}$/i)}}]);