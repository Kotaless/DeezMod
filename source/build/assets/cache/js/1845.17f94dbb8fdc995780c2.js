"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[1845],{zuHY:(t,e,i)=>{i.d(e,{MG:()=>C,NP:()=>u,ny:()=>T,VF:()=>N}),Error,Error;class s extends Error{constructor(t){super(t),this.name="UnloggedError"}}class n extends Error{constructor(t){super(t),this.name="JWTRenewError"}}class r extends Error{constructor(t){super(t),this.name="JWTFetchError"}}class a extends Error{constructor(t){super(t),this.name="JWTCacheError"}}let o=function(t){return t.ANONYMOUS="ANONYMOUS",t.ARL="ARL",t.CREDENTIALS="CREDENTIALS",t.LOGOUT="LOGOUT",t.PARTNER="PARTNER",t.RENEW="RENEW",t}({});const l={ANONYMOUS:"login/anonymous",ARL:"login/arl",CREDENTIALS:"login/credentials",LOGOUT:"logout",PARTNER:"login/partner-access-token",RENEW:"login/renew"};let u=function(t){return t.COOKIE="c",t.PAYLOAD="p",t}({});var c=i("/0+J"),h=i("MVPB"),d=i("4OMY"),p=(0,d.A)("refreshToken");const b=class{constructor(){Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,h.A)(this,p)[p]=null}get(){return(0,h.A)(this,p)[p]}set(t){if("string"!=typeof t)throw new Error(`Token is invalid. String expected, got ${typeof t}.`);(0,h.A)(this,p)[p]=t}invalidate(){(0,h.A)(this,p)[p]=null}};class f extends Error{}f.prototype.name="InvalidTokenError";var m=(0,d.A)("token"),A=(0,d.A)("maxAge"),v=(0,d.A)("issuedAt"),y=(0,d.A)("requestDelay");const w=class{constructor(t,e){Object.defineProperty(this,m,{writable:!0,value:null}),Object.defineProperty(this,A,{writable:!0,value:0}),Object.defineProperty(this,v,{writable:!0,value:0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),(0,h.A)(this,y)[y]=e,t&&this.set(t)}get(){return(0,h.A)(this,m)[m]}set(t){if("string"!=typeof t)throw new Error(`Token is invalid. String expected, got ${typeof t}.`);let e;try{e=function(t,e){if("string"!=typeof t)throw new f("Invalid token specified: must be a string");e||(e={});const i=!0===e.header?0:1,s=t.split(".")[i];if("string"!=typeof s)throw new f(`Invalid token specified: missing part #${i+1}`);let n;try{n=function(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(t){return decodeURIComponent(atob(t).replace(/(.)/g,((t,e)=>{let i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(e)}catch(t){return atob(e)}}(s)}catch(t){throw new f(`Invalid token specified: invalid base64 for part #${i+1} (${t.message})`)}try{return JSON.parse(n)}catch(t){throw new f(`Invalid token specified: invalid json for part #${i+1} (${t.message})`)}}(t)}catch(t){throw new Error("Could not decode JWT")}const{exp:i,iat:s}=e;if("number"!=typeof i||"number"!=typeof s)throw new Error("JWT does not contain any value for issuedAt or expire");if((0,h.A)(this,A)[A]=i-s,(0,h.A)(this,v)[v]=s,this.isExpired())throw new a("Token is expired");(0,h.A)(this,m)[m]=t}isExpired(){return Math.round(Date.now()/1e3)-(0,h.A)(this,v)[v]>(0,h.A)(this,A)[A]-(0,h.A)(this,y)[y]}isValid(){return null!==(0,h.A)(this,m)[m]&&!this.isExpired()}invalidate(){(0,h.A)(this,m)[m]=null,(0,h.A)(this,A)[A]=0,(0,h.A)(this,v)[v]=0}},x=({host:t,authType:e,inputType:i,tokenOutputType:s,refreshTokenOutputType:n})=>{const r=new URL(`https://${t}/${l[e]}`),a={jo:s,rto:n};let o;for(o in i&&(a.i=i),a){const t=a[o];void 0!==t&&r.searchParams.append(o,t)}return r.href};var E=(0,d.A)("refreshToken");function k(){return S.apply(this,arguments)}function S(){return(S=(0,c.A)((function*(){var t;const e=null==(t=this.refreshTokenCache)?void 0:t.get();let i,r=u.COOKIE,a="include";e&&(r=u.PAYLOAD,i=JSON.stringify({refresh_token:e}),a="omit");const l=x({host:this.host,authType:o.RENEW,inputType:r,tokenOutputType:this.tokenOutputType,refreshTokenOutputType:this.refreshTokenOutputType}),c=yield this.fetch.call(null,l,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:i,credentials:a}).catch((()=>{throw new n("Could not fetch JWT Token")}));if(!c.ok)throw new s("Could not fetch JWT Token");if(this.fetchShouldHaveReponse){var h,d;const{jwt:t,refresh_token:e}=yield c.json();null==(h=this.tokenCache)||h.set(t),null==(d=this.refreshTokenCache)||d.set(e)}return null}))).apply(this,arguments)}const C=class{get fetchShouldHaveReponse(){return this.tokenOutputType===u.PAYLOAD||this.refreshTokenOutputType===u.PAYLOAD}constructor({host:t,customFetch:e=globalThis.fetch,requestDelay:i=15,tokenOutputType:s=u.PAYLOAD,refreshTokenOutputType:n=u.COOKIE,refreshTokenCache:r}){Object.defineProperty(this,E,{value:k}),this.host=void 0,this.fetch=void 0,this.requestDelay=void 0,this.tokenOutputType=void 0,this.refreshTokenOutputType=void 0,this.tokenCache=null,this.refreshTokenCache=null,this.host=t,this.fetch=e,this.requestDelay=i,this.tokenOutputType=s,this.refreshTokenOutputType=n,this.tokenOutputType===u.PAYLOAD&&(this.tokenCache=new w(null,this.requestDelay)),this.refreshTokenOutputType===u.PAYLOAD&&(this.refreshTokenCache=r||new b)}getToken(){var t=this;return(0,c.A)((function*(){var e;if(null!=(e=t.tokenCache)&&e.isValid())return t.tokenCache.get();if(yield(0,h.A)(t,E)[E](),t.tokenCache&&t.tokenCache.get()){if(t.tokenCache.isValid())return t.tokenCache.get();throw new a("Could not fetch valid JWT Token")}return null}))()}invalidateCurrentToken(){var t,e;null==(t=this.tokenCache)||t.invalidate(),null==(e=this.refreshTokenCache)||e.invalidate()}logout(){var t=this;return(0,c.A)((function*(){t.invalidateCurrentToken();const e=`https://${t.host}/${l.LOGOUT}`;yield t.fetch.call(null,e,{method:"GET",credentials:"include"}).catch((()=>{throw new Error("Could not invalidate current tokens")}))}))()}},T=function(t){return class extends t{loginAsAnonymous(){var t=this;return(0,c.A)((function*(){const e=x({host:t.host,authType:o.ANONYMOUS,tokenOutputType:t.tokenOutputType,refreshTokenOutputType:t.refreshTokenOutputType}),i=yield t.fetch.call(null,e,{method:"GET",headers:{Accept:"application/json"}}).catch((()=>{throw new r("Could not fetch anonymous JWT Token")}));if(!i.ok)throw new s(`Could not log in as anonymous. Got error ${i.status}`);if(t.fetchShouldHaveReponse){var n;const{jwt:e}=yield i.json().catch((()=>{throw new r("Response does not contain a valid JWT Token")}));return null==(n=t.tokenCache)||n.set(e),e}return null}))()}}},N=function(t){return class extends t{loginWithArl(t,e){var i=this;return(0,c.A)((function*(){let n;t&&(n={arl:t,account_id:e});const a=x({host:i.host,authType:o.ARL,inputType:void 0!==n?u.PAYLOAD:u.COOKIE,tokenOutputType:i.tokenOutputType,refreshTokenOutputType:i.refreshTokenOutputType}),l=void 0!==n?{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}:{method:"POST",headers:{Accept:"application/json"},credentials:"include"},c=yield i.fetch.call(null,a,l).catch((()=>{throw new r("Could not fetch JWT Token with ARL")}));if(!c.ok)throw new s(`Could not fetch JWT Token with ARL. Got error ${c.status}`);if(i.fetchShouldHaveReponse){var h,d;const{jwt:t,refresh_token:e}=yield c.json().catch((()=>{throw new r("Response does not contain valid tokens")}));return null==(h=i.refreshTokenCache)||h.set(e),null==(d=i.tokenCache)||d.set(t),t}return null}))()}}}},DLZI:(t,e,i)=>{i.d(e,{A:()=>l});var s=i("/0+J"),n=i("MVPB"),r=i("4OMY"),a=(0,r.A)("api"),o=(0,r.A)("env");class l{constructor(t,e){Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),this.facebook=void 0,this.google=void 0,this.apple=void 0,(0,n.A)(this,a)[a]=t,(0,n.A)(this,o)[o]=e}init(t,e){var r=this;return(0,s.A)((function*(){const l=[];return(t=Array.isArray(t)?t:[t]).forEach((t=>{switch(t){case"facebook":const t=function(){var t=(0,s.A)((function*(){const{FacebookAuth:t}=yield i.e(3537).then(i.bind(i,"T53H"));r.facebook||(r.facebook=new t((0,n.A)(r,a)[a],null==e?void 0:e.facebook)),yield r.facebook.init({env:(0,n.A)(r,o)[o]})}));return function(){return t.apply(this,arguments)}}();l.push(t());break;case"google":const u=function(){var t=(0,s.A)((function*(){const{GoogleAuth:t}=yield i.e(5404).then(i.bind(i,"JtTf"));r.google||(r.google=new t((0,n.A)(r,a)[a],null==e?void 0:e.google)),yield r.google.init({})}));return function(){return t.apply(this,arguments)}}();l.push(u());break;case"apple":const c=function(){var t=(0,s.A)((function*(){const{AppleAuth:t}=yield i.e(9133).then(i.bind(i,"ALjf"));r.apple||(r.apple=new t((0,n.A)(r,a)[a],null==e?void 0:e.apple)),yield r.apple.init({})}));return function(){return t.apply(this,arguments)}}();l.push(c());break;default:return}})),Promise.allSettled(l)}))()}}},bDF2:(t,e,i)=>{i.d(e,{R2:()=>a,Fj:()=>r});var s=i("+9dH");let n=function(t){return t.CLICK="click",t.PAGE="updatepage",t}({});function r(t){var e;Object.keys(t).length&&((e=window).dataLayer||(e.dataLayer=[]),window.dataLayer.push(t))}function a(t){if(void 0===(e=t).eventcategory||void 0===e.eventaction)throw new Error("The following fields are missing or undefined: eventcategory, eventaction");var e;r((0,s.A)({event:n.CLICK},t))}},Homo:(t,e,i)=>{i.d(e,{VV:()=>s});class s{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(t,e=!1){return this.onePassHasher.start().appendStr(t).end(e)}static hashAsciiStr(t,e=!1){return this.onePassHasher.start().appendAsciiStr(t).end(e)}static _hex(t){const e=s.hexChars,i=s.hexOut;let n,r,a,o;for(o=0;o<4;o+=1)for(r=8*o,n=t[o],a=0;a<8;a+=2)i[r+1+a]=e.charAt(15&n),n>>>=4,i[r+0+a]=e.charAt(15&n),n>>>=4;return i.join("")}static _md5cycle(t,e){let i=t[0],s=t[1],n=t[2],r=t[3];i+=(s&n|~s&r)+e[0]-680876936|0,i=(i<<7|i>>>25)+s|0,r+=(i&s|~i&n)+e[1]-389564586|0,r=(r<<12|r>>>20)+i|0,n+=(r&i|~r&s)+e[2]+606105819|0,n=(n<<17|n>>>15)+r|0,s+=(n&r|~n&i)+e[3]-1044525330|0,s=(s<<22|s>>>10)+n|0,i+=(s&n|~s&r)+e[4]-176418897|0,i=(i<<7|i>>>25)+s|0,r+=(i&s|~i&n)+e[5]+1200080426|0,r=(r<<12|r>>>20)+i|0,n+=(r&i|~r&s)+e[6]-1473231341|0,n=(n<<17|n>>>15)+r|0,s+=(n&r|~n&i)+e[7]-45705983|0,s=(s<<22|s>>>10)+n|0,i+=(s&n|~s&r)+e[8]+1770035416|0,i=(i<<7|i>>>25)+s|0,r+=(i&s|~i&n)+e[9]-1958414417|0,r=(r<<12|r>>>20)+i|0,n+=(r&i|~r&s)+e[10]-42063|0,n=(n<<17|n>>>15)+r|0,s+=(n&r|~n&i)+e[11]-1990404162|0,s=(s<<22|s>>>10)+n|0,i+=(s&n|~s&r)+e[12]+1804603682|0,i=(i<<7|i>>>25)+s|0,r+=(i&s|~i&n)+e[13]-40341101|0,r=(r<<12|r>>>20)+i|0,n+=(r&i|~r&s)+e[14]-1502002290|0,n=(n<<17|n>>>15)+r|0,s+=(n&r|~n&i)+e[15]+1236535329|0,s=(s<<22|s>>>10)+n|0,i+=(s&r|n&~r)+e[1]-165796510|0,i=(i<<5|i>>>27)+s|0,r+=(i&n|s&~n)+e[6]-1069501632|0,r=(r<<9|r>>>23)+i|0,n+=(r&s|i&~s)+e[11]+643717713|0,n=(n<<14|n>>>18)+r|0,s+=(n&i|r&~i)+e[0]-373897302|0,s=(s<<20|s>>>12)+n|0,i+=(s&r|n&~r)+e[5]-701558691|0,i=(i<<5|i>>>27)+s|0,r+=(i&n|s&~n)+e[10]+38016083|0,r=(r<<9|r>>>23)+i|0,n+=(r&s|i&~s)+e[15]-660478335|0,n=(n<<14|n>>>18)+r|0,s+=(n&i|r&~i)+e[4]-405537848|0,s=(s<<20|s>>>12)+n|0,i+=(s&r|n&~r)+e[9]+568446438|0,i=(i<<5|i>>>27)+s|0,r+=(i&n|s&~n)+e[14]-1019803690|0,r=(r<<9|r>>>23)+i|0,n+=(r&s|i&~s)+e[3]-187363961|0,n=(n<<14|n>>>18)+r|0,s+=(n&i|r&~i)+e[8]+1163531501|0,s=(s<<20|s>>>12)+n|0,i+=(s&r|n&~r)+e[13]-1444681467|0,i=(i<<5|i>>>27)+s|0,r+=(i&n|s&~n)+e[2]-51403784|0,r=(r<<9|r>>>23)+i|0,n+=(r&s|i&~s)+e[7]+1735328473|0,n=(n<<14|n>>>18)+r|0,s+=(n&i|r&~i)+e[12]-1926607734|0,s=(s<<20|s>>>12)+n|0,i+=(s^n^r)+e[5]-378558|0,i=(i<<4|i>>>28)+s|0,r+=(i^s^n)+e[8]-2022574463|0,r=(r<<11|r>>>21)+i|0,n+=(r^i^s)+e[11]+1839030562|0,n=(n<<16|n>>>16)+r|0,s+=(n^r^i)+e[14]-35309556|0,s=(s<<23|s>>>9)+n|0,i+=(s^n^r)+e[1]-1530992060|0,i=(i<<4|i>>>28)+s|0,r+=(i^s^n)+e[4]+1272893353|0,r=(r<<11|r>>>21)+i|0,n+=(r^i^s)+e[7]-155497632|0,n=(n<<16|n>>>16)+r|0,s+=(n^r^i)+e[10]-1094730640|0,s=(s<<23|s>>>9)+n|0,i+=(s^n^r)+e[13]+681279174|0,i=(i<<4|i>>>28)+s|0,r+=(i^s^n)+e[0]-358537222|0,r=(r<<11|r>>>21)+i|0,n+=(r^i^s)+e[3]-722521979|0,n=(n<<16|n>>>16)+r|0,s+=(n^r^i)+e[6]+76029189|0,s=(s<<23|s>>>9)+n|0,i+=(s^n^r)+e[9]-640364487|0,i=(i<<4|i>>>28)+s|0,r+=(i^s^n)+e[12]-421815835|0,r=(r<<11|r>>>21)+i|0,n+=(r^i^s)+e[15]+530742520|0,n=(n<<16|n>>>16)+r|0,s+=(n^r^i)+e[2]-995338651|0,s=(s<<23|s>>>9)+n|0,i+=(n^(s|~r))+e[0]-198630844|0,i=(i<<6|i>>>26)+s|0,r+=(s^(i|~n))+e[7]+1126891415|0,r=(r<<10|r>>>22)+i|0,n+=(i^(r|~s))+e[14]-1416354905|0,n=(n<<15|n>>>17)+r|0,s+=(r^(n|~i))+e[5]-57434055|0,s=(s<<21|s>>>11)+n|0,i+=(n^(s|~r))+e[12]+1700485571|0,i=(i<<6|i>>>26)+s|0,r+=(s^(i|~n))+e[3]-1894986606|0,r=(r<<10|r>>>22)+i|0,n+=(i^(r|~s))+e[10]-1051523|0,n=(n<<15|n>>>17)+r|0,s+=(r^(n|~i))+e[1]-2054922799|0,s=(s<<21|s>>>11)+n|0,i+=(n^(s|~r))+e[8]+1873313359|0,i=(i<<6|i>>>26)+s|0,r+=(s^(i|~n))+e[15]-30611744|0,r=(r<<10|r>>>22)+i|0,n+=(i^(r|~s))+e[6]-1560198380|0,n=(n<<15|n>>>17)+r|0,s+=(r^(n|~i))+e[13]+1309151649|0,s=(s<<21|s>>>11)+n|0,i+=(n^(s|~r))+e[4]-145523070|0,i=(i<<6|i>>>26)+s|0,r+=(s^(i|~n))+e[11]-1120210379|0,r=(r<<10|r>>>22)+i|0,n+=(i^(r|~s))+e[2]+718787259|0,n=(n<<15|n>>>17)+r|0,s+=(r^(n|~i))+e[9]-343485551|0,s=(s<<21|s>>>11)+n|0,t[0]=i+t[0]|0,t[1]=s+t[1]|0,t[2]=n+t[2]|0,t[3]=r+t[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(s.stateIdentity),this}appendStr(t){const e=this._buffer8,i=this._buffer32;let n,r,a=this._bufferLength;for(r=0;r<t.length;r+=1){if(n=t.charCodeAt(r),n<128)e[a++]=n;else if(n<2048)e[a++]=192+(n>>>6),e[a++]=63&n|128;else if(n<55296||n>56319)e[a++]=224+(n>>>12),e[a++]=n>>>6&63|128,e[a++]=63&n|128;else{if(n=1024*(n-55296)+(t.charCodeAt(++r)-56320)+65536,n>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");e[a++]=240+(n>>>18),e[a++]=n>>>12&63|128,e[a++]=n>>>6&63|128,e[a++]=63&n|128}a>=64&&(this._dataLength+=64,s._md5cycle(this._state,i),a-=64,i[0]=i[16])}return this._bufferLength=a,this}appendAsciiStr(t){const e=this._buffer8,i=this._buffer32;let n,r=this._bufferLength,a=0;for(;;){for(n=Math.min(t.length-a,64-r);n--;)e[r++]=t.charCodeAt(a++);if(r<64)break;this._dataLength+=64,s._md5cycle(this._state,i),r=0}return this._bufferLength=r,this}appendByteArray(t){const e=this._buffer8,i=this._buffer32;let n,r=this._bufferLength,a=0;for(;;){for(n=Math.min(t.length-a,64-r);n--;)e[r++]=t[a++];if(r<64)break;this._dataLength+=64,s._md5cycle(this._state,i),r=0}return this._bufferLength=r,this}getState(){const t=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}}setState(t){const e=t.buffer,i=t.state,s=this._state;let n;for(this._dataLength=t.length,this._bufferLength=t.buflen,s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],n=0;n<e.length;n+=1)this._buffer8[n]=e.charCodeAt(n)}end(t=!1){const e=this._bufferLength,i=this._buffer8,n=this._buffer32,r=1+(e>>2);this._dataLength+=e;const a=8*this._dataLength;if(i[e]=128,i[e+1]=i[e+2]=i[e+3]=0,n.set(s.buffer32Identity.subarray(r),r),e>55&&(s._md5cycle(this._state,n),n.set(s.buffer32Identity)),a<=4294967295)n[14]=a;else{const t=a.toString(16).match(/(.*?)(.{0,8})$/);if(null===t)return;const e=parseInt(t[2],16),i=parseInt(t[1],16)||0;n[14]=e,n[15]=i}return s._md5cycle(this._state,n),t?this._state:s._hex(this._state)}}if(s.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),s.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s.hexChars="0123456789abcdef",s.hexOut=[],s.onePassHasher=new s,"5d41402abc4b2a76b9719d911017c592"!==s.hashStr("hello"))throw new Error("Md5 self test failed.")},wzJC:(t,e,i)=>{i.d(e,{j:()=>n,w:()=>s});const s={CustomEvent:"ce",Pr:"p",Eu:"pc",vc:"ca",Ka:"i",qs:"ie",M:"cci",R:"ccic",I:"ccc",F:"ccd",ql:"ss",xl:"se",Gi:"si",$i:"sc",Ei:"sbc",Cc:"sfe",mo:"iec",Bu:"lr",_u:"uae",O:"ci",$:"cc",Wu:"lcaa",Ku:"lcar",On:"inc",Ln:"add",Rn:"rem",$n:"set",Bn:"ncam",Gu:"sgu",Fr:"ffi"},n={Ar:"feed_displayed",Ec:"content_cards_displayed"}},HXl4:(t,e,i)=>{i.d(e,{A:()=>s});const s={W:function(){const t=(t=!1)=>{const e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e};return t()+t(!0)+t(!0)+t()}}},vRYs:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t,e){this.database=t,this.vd=e,this.parent="undefined"==typeof window?self:window,this.database=t,this.vd=e}Dd(){if("indexedDB"in this.parent)return this.parent.indexedDB}isSupported(){var t;try{if(null==this.Dd())return!1;{const e=null===(t=this.Dd())||void 0===t?void 0:t.open("Braze IndexedDB Support Test");if(e&&(e.onupgradeneeded=()=>e.result.close(),e.onsuccess=()=>e.result.close()),"undefined"!=typeof window){const t=window,e=t.chrome||t.browser||t.pd;if(e&&e.runtime&&e.runtime.id)return this.vd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}}catch(t){return this.vd.info("Not using IndexedDB for storage due to following error: "+t),!1}}Bd(t,e){var i;const s=null===(i=this.Dd())||void 0===i?void 0:i.open(this.database.Sd,this.database.VERSION);if(null==s)return"function"==typeof e&&e(),!1;const n=this;return s.onupgradeneeded=t=>{var e;n.vd.info("Upgrading indexedDB "+n.database.Sd+" to v"+n.database.VERSION+"...");const i=null===(e=t.target)||void 0===e?void 0:e.result;for(const t in n.database.ss){const e=t;n.database.ss.hasOwnProperty(t)&&!i.objectStoreNames.contains(n.database.ss[e])&&i.createObjectStore(n.database.ss[e])}},s.onsuccess=i=>{var s;const r=null===(s=i.target)||void 0===s?void 0:s.result;r.onversionchange=()=>{r.close(),"function"==typeof e&&e(),n.vd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},t(r)},s.onerror=t=>{var i;const s=t;return n.vd.info("Could not open indexedDB "+n.database.Sd+" v"+n.database.VERSION+": "+(null===(i=s.target)||void 0===i?void 0:i.errorCode)),"function"==typeof e&&e(),!0},!0}setItem(t,e,i,s,n){if(!this.isSupported())return"function"==typeof n&&n(),!1;const r=this;return this.Bd((a=>{if(!a.objectStoreNames.contains(t))return r.vd.error("Could not store object "+e+" in "+t+" on indexedDB "+r.database.Sd+" - "+t+" is not a valid objectStore"),"function"==typeof n&&n(),void a.close();const o=a.transaction([t],"readwrite");o.oncomplete=()=>a.close();const l=o.objectStore(t).put(i,e);l.onerror=()=>{r.vd.error("Could not store object "+e+" in "+t+" on indexedDB "+r.database.Sd),"function"==typeof n&&n()},l.onsuccess=()=>{"function"==typeof s&&s()}}),n)}getItem(t,e,i){if(!this.isSupported())return!1;const s=this;return this.Bd((n=>{if(!n.objectStoreNames.contains(t))return s.vd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+s.database.Sd+" - "+t+" is not a valid objectStore"),void n.close();const r=n.transaction([t],"readonly");r.oncomplete=()=>n.close();const a=r.objectStore(t).get(e);a.onerror=()=>{s.vd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+s.database.Sd)},a.onsuccess=t=>{var e;const s=null===(e=t.target)||void 0===e?void 0:e.result;null!=s&&i(s)}}))}jr(t,e,i){if(!this.isSupported())return"function"==typeof i&&i(),!1;const s=this;return this.Bd((n=>{if(!n.objectStoreNames.contains(t))return s.vd.error("Could not retrieve last record from "+t+" on indexedDB "+s.database.Sd+" - "+t+" is not a valid objectStore"),"function"==typeof i&&i(),void n.close();const r=n.transaction([t],"readonly");r.oncomplete=()=>n.close();const a=r.objectStore(t).openCursor(null,"prev");a.onerror=()=>{s.vd.error("Could not open cursor for "+t+" on indexedDB "+s.database.Sd),"function"==typeof i&&i()},a.onsuccess=t=>{var s;const n=null===(s=t.target)||void 0===s?void 0:s.result;null!=n&&null!=n.value&&null!=n.key?e(n.key,n.value):"function"==typeof i&&i()}}),i)}re(t,e){if(!this.isSupported())return!1;const i=this;return this.Bd((s=>{if(!s.objectStoreNames.contains(t))return i.vd.error("Could not delete record "+e+" from "+t+" on indexedDB "+i.database.Sd+" - "+t+" is not a valid objectStore"),void s.close();const n=s.transaction([t],"readwrite");n.oncomplete=()=>s.close(),n.objectStore(t).delete(e).onerror=()=>{i.vd.error("Could not delete record "+e+" from "+t+" on indexedDB "+i.database.Sd)}}))}Zt(t,e){if(!this.isSupported())return!1;const i=this;return this.Bd((s=>{if(!s.objectStoreNames.contains(t))return i.vd.error("Could not retrieve objects from "+t+" on indexedDB "+i.database.Sd+" - "+t+" is not a valid objectStore"),void s.close();const n=s.transaction([t],"readwrite");n.oncomplete=()=>s.close();const r=n.objectStore(t),a=r.openCursor(),o=[];a.onerror=()=>{o.length>0?(i.vd.info("Cursor closed midway through for "+t+" on indexedDB "+i.database.Sd),e(o)):i.vd.error("Could not open cursor for "+t+" on indexedDB "+i.database.Sd)},a.onsuccess=t=>{var i;const s=null===(i=t.target)||void 0===i?void 0:i.result;null!=s?(null!=s.value&&null!=s.key&&(r.delete(s.key).onsuccess=()=>{o.push(s.value)}),"function"==typeof s.continue&&s.continue()):o.length>0&&e(o)}}))}clearData(){if(!this.isSupported())return!1;const t=[];for(const e in this.database.ss){const i=e;this.database.ss.hasOwnProperty(e)&&this.database.ss[i]!==this.database.ss.ae&&t.push(this.database.ss[i])}const e=this;return this.Bd((function(i){const s=i.transaction(t,"readwrite");s.oncomplete=()=>i.close();for(let i=0;i<t.length;i++){const n=t[i];s.objectStore(n).clear().onerror=function(){e.vd.error("Could not clear "+this.source.name+" on indexedDB "+e.database.Sd)}}s.onerror=function(){e.vd.error("Could not clear object stores on indexedDB "+e.database.Sd)}}))}}s.Yt={Qt:{Sd:"AppboyServiceWorkerAsyncStorage",VERSION:6,ss:{La:"data",hr:"pushClicks",cu:"pushSubscribed",Cd:"fallbackDevice",ts:"cardUpdates",ae:"optOut",wr:"pendingData",jh:"sdkAuthenticationSignature"},ie:1}}},cqms:(t,e,i)=>{i.d(e,{A:()=>n});const s={init:function(t){void 0===t&&void 0!==s.zg||(s.zg=!!t),s.t||(s.t=!0)},destroy:function(){s.t=!1,s.zg=void 0,s.vd=void 0},setLogger:function(t){"function"==typeof t?(s.init(),s.vd=t):s.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){s.init(),s.zg?(console.log("Disabling Braze logging"),s.zg=!1):(console.log("Enabled Braze logging"),s.zg=!0)},info:function(t){if(s.zg){const e="Braze: "+t;null!=s.vd?s.vd(e):console.log(e)}},warn:function(t){if(s.zg){const e="Braze SDK Warning: "+t+" (v5.4.0)";null!=s.vd?s.vd(e):console.warn(e)}},error:function(t){if(s.zg){const e="Braze SDK Error: "+t+" (v5.4.0)";null!=s.vd?s.vd(e):console.error(e)}}},n=s},nO15:(t,e,i)=>{i.d(e,{A:()=>d});var s=i("vfwm"),n=i("Z43y"),r=i("Jdpe"),a=i("cqms"),o=i("wzJC"),l=i("jGgm");class u{constructor(t){this.u=t,this.u=t}h(t,e){const i=new r.A;if(t.p(),null==t.url||""===t.url)return a.A.info(`Card ${t.id} has no url. Not logging click to Braze servers.`),i;if(e&&t.id&&this.u){const e=this.u.j(l.d.C.v)||{};e[t.id]=!0,this.u.k(l.d.C.v,e)}const s=this.D([t]);if(null==s)return i;const u=e?o.w.I:o.w.$;return n.A.q(u,s)}B(t){const e=new r.A;if(!t.N())return a.A.info(`Card ${t.id} refused this dismissal. Ignoring analytics event.`),e;if(t.id&&this.u){const e=this.u.j(l.d.C.A)||{};e[t.id]=!0,this.u.k(l.d.C.A,e)}const i=this.D([t]);return null==i?e:n.A.q(o.w.F,i)}G(t,e){const i=new r.A(!0),a=[],u=[];let c={};this.u&&(c=e?this.u.j(l.d.C.H)||{}:this.u.j(l.d.C.J)||{});for(const e of t)e.K(),e instanceof s.A?u.push(e):a.push(e),e.id&&(c[e.id]=!0);const h=this.D(a),d=this.D(u);if(null==h&&null==d)return i.L=!1,i;if(this.u&&(e?this.u.k(l.d.C.H,c):this.u.k(l.d.C.J,c)),null!=h){const t=e?o.w.M:o.w.O,s=n.A.q(t,h);i.P(s)}if(null!=d&&e){const t=n.A.q(o.w.R,d);i.P(t)}return i}D(t){let e,i=null;for(let s=0;s<t.length;s++)e=t[s].id,null!=e&&""!==e&&(i=i||{},i.ids=i.ids||[],i.ids.push(e));return i}}var c=i("F7/r");const h={t:!1,i:null,m:()=>(h.o(),h.i||(h.i=new u(c.Ay.l())),h.i),o:()=>{h.t||(c.Ay.g(h),h.t=!0)},destroy:()=>{h.i=null,h.t=!1}},d=h},zW8y:(t,e,i)=>{i.d(e,{GH:()=>d,M4:()=>u,MX:()=>h,M_:()=>c,O_:()=>p,ZZ:()=>f,cM:()=>b,sf:()=>l});var s=i("L0Yc"),n=i("zxwP"),r=i("iXlr"),a=i("okAa"),o=i("HXl4");function l(t){return null!=t&&!!t.getAttribute("data-ab-had-top-impression")}function u(t){null!=t&&t.setAttribute("data-ab-had-top-impression","true")}function c(t){return null!=t&&!!t.getAttribute("data-ab-had-bottom-impression")}function h(t){null!=t&&t.setAttribute("data-ab-had-bottom-impression","true")}function d(t){if(null!=t){const e=t.querySelectorAll(".ab-unread-indicator")[0];null!=e&&(e.className+=" read")}}function p(t){return t.getAttribute("data-ab-card-id")}function b(t,e){const i=e.querySelectorAll(".ab-image-area");let s,n=0;i.length>0&&(n=i[0].offsetWidth);for(const e of t)if(s=e.T,s&&e.imageUrl&&"number"==typeof e.aspectRatio){const t=n/e.aspectRatio;t&&(s.style.height=`${t}px`)}}function f(t,e,i,l="ltr"){const u=document.createElement("div");u.dir=l,u.className="ab-card ab-effect-card "+t._,t.id&&(u.setAttribute("data-ab-card-id",t.id),u.setAttribute("id",t.id)),u.setAttribute("role","article"),u.setAttribute("tabindex","0");let c="",h=!1;t.url&&""!==t.url&&(c=t.url,h=!0);const p=s=>(d(u),h&&(e(t),(0,r.U)(c,i,s)),!1);if(t.pinned){const t=document.createElement("div");t.className="ab-pinned-indicator";const e=document.createElement("i");e.className="fa fa-star",t.appendChild(e),u.appendChild(t)}if(t.imageUrl&&""!==t.imageUrl){const e=document.createElement("div");e.dir=l,e.className="ab-image-area";const i=document.createElement("img");if(i.setAttribute("src",t.imageUrl),i.onload=()=>{u.style.height="auto"},function(t,e){let i="";t.title||t.description||(i="Feed Image"),e.setAttribute("alt",i)}(t,i),e.appendChild(i),u.className+=" with-image",h&&!t.S){const t=document.createElement("a");t.setAttribute("href",c),t.onclick=p,t.appendChild(e),u.appendChild(t)}else u.appendChild(e)}const b=document.createElement("div");if(b.className="ab-card-body",b.dir=l,t.dismissible){t.logCardDismissal=()=>(0,a.a)(t);const e=(0,s.p)("Dismiss Card",void 0,t.dismissCard.bind(t),l);u.appendChild(e),(0,n.sr)(b,n.X.U,(t=>{u.className+=" ab-swiped-left",e.onclick(t)})),(0,n.sr)(b,n.X.V,(t=>{u.className+=" ab-swiped-right",e.onclick(t)}))}let f="",g=!1;if(t.title&&""!==t.title&&(f=t.title,g=!0),g){const t=document.createElement("h1");if(t.className="ab-title",t.id=o.A.W(),u.setAttribute("aria-labelledby",t.id),h){const e=document.createElement("a");e.setAttribute("href",c),e.onclick=p,e.appendChild(document.createTextNode(f)),t.appendChild(e)}else t.appendChild(document.createTextNode(f));b.appendChild(t)}const m=document.createElement("div");if(m.className=g?"ab-description":"ab-description ab-no-title",m.id=o.A.W(),u.setAttribute("aria-describedby",m.id),t.description&&m.appendChild(document.createTextNode(t.description)),h){const e=document.createElement("div");e.className="ab-url-area";const i=document.createElement("a");i.setAttribute("href",c),t.linkText&&i.appendChild(document.createTextNode(t.linkText)),i.onclick=p,e.appendChild(i),m.appendChild(e)}b.appendChild(m),u.appendChild(b);const A=document.createElement("div");return A.className="ab-unread-indicator",t.viewed&&(A.className+=" read"),u.appendChild(A),t.T=u,u}},HiHM:(t,e,i)=>{i.d(e,{x:()=>l});var s=i("muIz"),n=i("nO15"),r=i("FggB"),a=i("F7/r"),o=i("cqms");function l(t,e){return!!a.Ay.X()&&(t instanceof s.A?n.A.m().h(t,e).L:(o.A.error("card "+r.s1),!1))}},okAa:(t,e,i)=>{i.d(e,{a:()=>l});var s=i("muIz"),n=i("nO15"),r=i("FggB"),a=i("F7/r"),o=i("cqms");function l(t){return!!a.Ay.X()&&(t instanceof s.A?n.A.m().B(t).L:(o.A.error("card "+r.s1),!1))}},ByVl:(t,e,i)=>{i.d(e,{j:()=>u});var s=i("muIz"),n=i("nO15"),r=i("F7/r"),a=i("azH7"),o=i("FggB"),l=i("cqms");function u(t,e){if(!r.Ay.X())return!1;if(!(0,a.cy)(t))return l.A.error("cards must be an array"),!1;for(const e of t)if(!(e instanceof s.A))return l.A.error(`Each card in cards ${o.s1}`),!1;return n.A.m().G(t,e).L}},"N+FJ":(t,e,i)=>{i.d(e,{A:()=>n});var s=i("muIz");class n extends s.A{constructor(t,e,i,s,n,r,a,o,l,u,c,h,d,p,b,f){super(t,e,i,s,n,r,a,o,l,u,c,h,d,p,b,f),this._="ab-captioned-image",this.S=!0,this.test=!1}Y(){const t={};return t[s.A.tt.Z]=s.A.it.st,t[s.A.tt.ht]=this.id,t[s.A.tt.et]=this.viewed,t[s.A.tt.rt]=this.title,t[s.A.tt.ot]=this.imageUrl,t[s.A.tt.ct]=this.description,t[s.A.tt.nt]=this.updated,t[s.A.tt.dt]=this.created,t[s.A.tt.ut]=this.categories,t[s.A.tt.lt]=this.expiresAt,t[s.A.tt.URL]=this.url,t[s.A.tt.ft]=this.linkText,t[s.A.tt.xt]=this.aspectRatio,t[s.A.tt.bt]=this.extras,t[s.A.tt.gt]=this.pinned,t[s.A.tt.jt]=this.dismissible,t[s.A.tt.zt]=this.clicked,t[s.A.tt.kt]=this.test,t}}},muIz:(t,e,i)=>{i.d(e,{A:()=>o});var s=i("7esM"),n=i("FggB"),r=i("TdiU"),a=i("cqms");class o{constructor(t,e,i,s,n,r,a,o,l,u,c,h,d,p,b,f){this.id=t,this.viewed=e,this.title=i,this.imageUrl=s,this.description=n,this.created=r,this.updated=a,this.categories=o,this.expiresAt=l,this.url=u,this.linkText=c,this.aspectRatio=h,this.extras=d,this.pinned=p,this.dismissible=b,this.clicked=f,this.id=t,this.viewed=e||!1,this.title=i||"",this.imageUrl=s,this.description=n||"",this.created=r||null,this.updated=a||null,this.categories=o||[],this.expiresAt=l||null,this.url=u,this.linkText=c,null==h?this.aspectRatio=null:(h=parseFloat(h.toString()),this.aspectRatio=isNaN(h)?null:h),this.extras=d||{},this.pinned=p||!1,this.dismissible=b||!1,this.dismissed=!1,this.clicked=f||!1,this.isControl=!1,this.test=!1,this.Et=null,this.Tt=null}subscribeToClickedEvent(t){return this.Nt().It(t)}subscribeToDismissedEvent(t){return this.St().It(t)}removeSubscription(t){this.Nt().removeSubscription(t),this.St().removeSubscription(t)}removeAllSubscriptions(){this.Nt().removeAllSubscriptions(),this.St().removeAllSubscriptions()}dismissCard(){if(!this.dismissible||this.dismissed)return;"function"==typeof this.logCardDismissal&&this.logCardDismissal();let t=this.T;!t&&this.id&&(t=document.getElementById(this.id)),t&&(t.style.height=t.offsetHeight+"px",t.className=t.className+" ab-hide",setTimeout((function(){t&&t.parentNode&&(t.style.height="0",t.style.margin="0",setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),o.At))}),n.RW))}Nt(){return null==this.Et&&(this.Et=new r.A),this.Et}St(){return null==this.Tt&&(this.Tt=new r.A),this.Tt}K(){this.viewed=!0}p(){this.viewed=!0,this.clicked=!0,this.Nt().Dt()}N(){return!(!this.dismissible||this.dismissed||(this.dismissed=!0,this.St().Dt(),0))}Ct(t){if(null==t||t[o.Rt.ht]!==this.id)return!0;if(t[o.Rt.Lt])return!1;if(null!=t[o.Rt.nt]&&null!=this.updated&&parseInt(t[o.Rt.nt])<(0,s.UK)(this.updated.valueOf()))return!0;if(t[o.Rt.et]&&!this.viewed&&(this.viewed=!0),t[o.Rt.zt]&&!this.clicked&&(this.clicked=t[o.Rt.zt]),null!=t[o.Rt.rt]&&(this.title=t[o.Rt.rt]),null!=t[o.Rt.ot]&&(this.imageUrl=t[o.Rt.ot]),null!=t[o.Rt.ct]&&(this.description=t[o.Rt.ct]),null!=t[o.Rt.nt]){const e=(0,s.Zo)(t[o.Rt.nt]);null!=e&&(this.updated=e)}if(null!=t[o.Rt.lt]){let e;e=t[o.Rt.lt]===o._t?null:(0,s.Zo)(t[o.Rt.lt]),this.expiresAt=e}if(null!=t[o.Rt.URL]&&(this.url=t[o.Rt.URL]),null!=t[o.Rt.ft]&&(this.linkText=t[o.Rt.ft]),null!=t[o.Rt.xt]){const e=parseFloat(t[o.Rt.xt].toString());this.aspectRatio=isNaN(e)?null:e}return null!=t[o.Rt.bt]&&(this.extras=t[o.Rt.bt]),null!=t[o.Rt.gt]&&(this.pinned=t[o.Rt.gt]),null!=t[o.Rt.jt]&&(this.dismissible=t[o.Rt.jt]),null!=t[o.Rt.kt]&&(this.test=t[o.Rt.kt]),!0}Y(){a.A.error("Must be implemented in a subclass")}}o._t=-1,o.Rt={ht:"id",et:"v",jt:"db",Lt:"r",nt:"ca",gt:"p",lt:"ea",bt:"e",Z:"tp",ot:"i",rt:"tt",ct:"ds",URL:"u",ft:"dm",xt:"ar",zt:"cl",kt:"t"},o.it={st:"captioned_image",Ot:"text_announcement",Mt:"short_news",Pt:"banner_image",Ut:"control"},o.tt={ht:"id",et:"v",jt:"db",dt:"cr",nt:"ca",gt:"p",ut:"t",lt:"ea",bt:"e",Z:"tp",ot:"i",rt:"tt",ct:"ds",URL:"u",ft:"dm",xt:"ar",zt:"cl",kt:"s"},o.Gt={Xt:"ADVERTISING",vt:"ANNOUNCEMENTS",Vt:"NEWS",Wt:"SOCIAL"},o.At=400},Os1q:(t,e,i)=>{i.d(e,{A:()=>n});var s=i("muIz");class n extends s.A{constructor(t,e,i,s,n,r,a,o,l,u,c,h,d,p,b,f){super(t,e,i,s,n,r,a,o,l,u,c,h,d,p,b,f),this._="ab-classic-card",this.S=!0}Y(){const t={};return t[s.A.tt.Z]=s.A.it.Mt,t[s.A.tt.ht]=this.id,t[s.A.tt.et]=this.viewed,t[s.A.tt.rt]=this.title,t[s.A.tt.ot]=this.imageUrl,t[s.A.tt.ct]=this.description,t[s.A.tt.nt]=this.updated,t[s.A.tt.dt]=this.created,t[s.A.tt.ut]=this.categories,t[s.A.tt.lt]=this.expiresAt,t[s.A.tt.URL]=this.url,t[s.A.tt.ft]=this.linkText,t[s.A.tt.xt]=this.aspectRatio,t[s.A.tt.bt]=this.extras,t[s.A.tt.gt]=this.pinned,t[s.A.tt.jt]=this.dismissible,t[s.A.tt.zt]=this.clicked,t[s.A.tt.kt]=this.test,t}}},vfwm:(t,e,i)=>{i.d(e,{A:()=>n});var s=i("muIz");class n extends s.A{constructor(t,e,i,s,n,r){super(t,e,null,null,null,null,i,null,s,null,null,null,n,r),this.isControl=!0,this._="ab-control-card",this.S=!1}Y(){const t={};return t[s.A.tt.Z]=s.A.it.Ut,t[s.A.tt.ht]=this.id,t[s.A.tt.et]=this.viewed,t[s.A.tt.nt]=this.updated,t[s.A.tt.lt]=this.expiresAt,t[s.A.tt.bt]=this.extras,t[s.A.tt.gt]=this.pinned,t[s.A.tt.kt]=this.test,t}}},o8vE:(t,e,i)=>{i.d(e,{A:()=>n});var s=i("muIz");class n extends s.A{constructor(t,e,i,s,n,r,a,o,l,u,c,h,d,p){super(t,e,null,i,null,s,n,r,a,o,l,u,c,h,d,p),this._="ab-image-only",this.S=!1,this.test=!1}Y(){const t={};return t[s.A.tt.Z]=s.A.it.Pt,t[s.A.tt.ht]=this.id,t[s.A.tt.et]=this.viewed,t[s.A.tt.ot]=this.imageUrl,t[s.A.tt.nt]=this.updated,t[s.A.tt.dt]=this.created,t[s.A.tt.ut]=this.categories,t[s.A.tt.lt]=this.expiresAt,t[s.A.tt.URL]=this.url,t[s.A.tt.ft]=this.linkText,t[s.A.tt.xt]=this.aspectRatio,t[s.A.tt.bt]=this.extras,t[s.A.tt.gt]=this.pinned,t[s.A.tt.jt]=this.dismissible,t[s.A.tt.zt]=this.clicked,t[s.A.tt.kt]=this.test,t}}},QKCW:(t,e,i)=>{i.d(e,{Fu:()=>h,R:()=>d,_l:()=>p});var s=i("muIz"),n=i("Os1q"),r=i("N+FJ"),a=i("o8vE"),o=i("vfwm"),l=i("7esM"),u=i("cqms");function c(t,e,i,l,c,h,d,p,b,f,g,m,A,v,y,w,x,E){let k;if(e===s.A.it.Ot||e===s.A.it.Mt)k=new n.A(t,i,l,c,h,d,p,b,f,g,m,A,v,y,w,x);else if(e===s.A.it.st)k=new r.A(t,i,l,c,h,d,p,b,f,g,m,A,v,y,w,x);else if(e===s.A.it.Pt)k=new a.A(t,i,c,d,p,b,f,g,m,A,v,y,w,x);else{if(e!==s.A.it.Ut)return u.A.error("Ignoring card with unknown type "+e),null;k=new o.A(t,i,p,f,v,y)}return E&&(k.test=E),k}function h(t){if(t[s.A.Rt.Lt])return null;const e=t[s.A.Rt.ht],i=t[s.A.Rt.Z],n=t[s.A.Rt.et],r=t[s.A.Rt.rt],a=t[s.A.Rt.ot],o=t[s.A.Rt.ct],u=(0,l.Zo)(t[s.A.Rt.nt]),h=u;let d;return d=t[s.A.Rt.lt]===s.A._t?null:(0,l.Zo)(t[s.A.Rt.lt]),c(e,i,n,r,a,o,h,u,null,d,t[s.A.Rt.URL],t[s.A.Rt.ft],t[s.A.Rt.xt],t[s.A.Rt.bt],t[s.A.Rt.gt],t[s.A.Rt.jt],t[s.A.Rt.zt],t[s.A.Rt.kt]||!1)}function d(t){return c(t.id,t.type,t.viewed,t.title,t.image,t.description,(0,l.Zo)(t.created),(0,l.Zo)(t.updated),t.categories,(0,l.Zo)(t.expires_at),t.url,t.domain,t.aspect_ratio,t.extras,!1,!1)}function p(t){return c(t[s.A.tt.ht],t[s.A.tt.Z],t[s.A.tt.et],t[s.A.tt.rt],t[s.A.tt.ot],t[s.A.tt.ct],(0,l.jU)(t[s.A.tt.dt]),(0,l.jU)(t[s.A.tt.nt]),t[s.A.tt.ut],(0,l.jU)(t[s.A.tt.lt]),t[s.A.tt.URL],t[s.A.tt.ft],t[s.A.tt.xt],t[s.A.tt.bt],t[s.A.tt.gt],t[s.A.tt.jt],t[s.A.tt.zt],t[s.A.tt.kt]||!1)||void 0}},FXju:(t,e,i)=>{i.d(e,{A:()=>w});var s=i("F7/r"),n=i("CgXj"),r=i("w7bV"),a=i("kkSs"),o=i("7esM"),l=i("DEgD"),u=i("QKCW"),c=i("jGgm"),h=i("TdiU"),d=i("Z43y"),p=i("J++8"),b=i("L0v4"),f=i("FggB"),g=i("vRYs"),m=i("cqms"),A=i("wzJC");class v extends r.A{constructor(t,e,i,n,r){super(),this.wt=t,this.u=e,this.yt=i,this.Ft=n,this.qt=r,this.wt=t,this.u=e,this.yt=i,this.Ft=n,this.qt=r,this.Jt=new h.A,s.Ay.$t(this.Jt),this.Bt=0,this.Ht=0,this.cards=[],this.Kt();const a=g.A.Yt.Qt;new g.A(a,m.A).Zt(a.ss.ts,(t=>{this.es(t)})),this.hs=null,this.rs=null,this.ns=null,this.os=null,this.ls=null,this.us=10,this.cs=0}fs(){return this.hs}ds(t){this.hs=t}ps(){return this.rs}vs(t){this.rs=t}Kt(){if(!this.u)return;const t=this.u.j(c.d.C.ws)||[],e=[];for(let i=0;i<t.length;i++){const s=(0,u._l)(t[i]);null!=s&&e.push(s)}this.cards=this.Cs(this.bs(e,!1)),this.Bt=this.u.j(c.d.C.gs)||this.Bt,this.Ht=this.u.j(c.d.C.ys)||this.Ht}js(t,e=!1,i=0,s=0){let n;if(e){n=[];for(const t of this.cards)t.test&&n.push(t)}else n=this.cards.slice();for(let i=0;i<t.length;i++){const s=t[i];let r=null;for(let t=0;t<this.cards.length;t++)if(s.id===this.cards[t].id){r=this.cards[t];break}if(e){const t=(0,u.Fu)(s);null!=r&&r.viewed&&t&&(t.viewed=!0),null!=t&&n.push(t)}else if(null==r){const t=(0,u.Fu)(s);null!=t&&n.push(t)}else if(!r.Ct(s))for(let t=0;t<n.length;t++)if(s.id===n[t].id){n.splice(t,1);break}}this.cards=this.Cs(this.bs(n,e)),this.Rs(),this.Bt=i,this.Ht=s,this.u&&(this.u.k(c.d.C.gs,this.Bt),this.u.k(c.d.C.ys,this.Ht))}Ns(t){if(this.Ts()&&null!=t&&t.cards){this.u&&this.u.k(c.d.C.Ss,s.Ay.Ds());const e=t.full_sync;e||this.Kt(),this.js(t.cards,e,t.last_full_sync_at,t.last_card_updated_at),this.Jt.Dt(this.Us(!0))}}ks(t){this.u&&this.u.k(c.d.C.As,t)}Fs(t,e,i){const s=()=>{this.xs(e,i,!0)},r=t?(0,n.s)(t):null;let a;if(this.zs(),!r||!r["retry-after"])return void this.ks(0);const o=r["retry-after"];if(isNaN(o)&&!isNaN(Date.parse(o)))a=Date.parse(o)-(new Date).getTime(),a<0&&s();else{if(isNaN(parseFloat(o.toString()))){const t="Received unexpected value for retry-after header in /sync response";return d.A.q(A.w.qs,{e:t+": "+o}),void this.ks(0)}a=1e3*parseFloat(o.toString())}this.ns=window.setTimeout((()=>{s()}),a);let l=0;this.u&&(l=this.u.j(c.d.C.As)),(null==l||isNaN(parseInt(l.toString())))&&(l=0),this.ks(parseInt(l.toString())+1)}es(t){var e;if(!this.Ts())return;this.Kt();const i=this.cards.slice();let s=null;s=null===(e=this.wt)||void 0===e?void 0:e.getUserId();for(let e=0;e<t.length;e++)if(s===t[e].userId||null==s&&null==t[e].userId){const s=t[e].card;let n=null;for(let t=0;t<this.cards.length;t++)if(s.id===this.cards[t].id){n=this.cards[t];break}if(null==n){const t=(0,u.Fu)(s);null!=t&&i.push(t)}else if(!n.Ct(s))for(let t=0;t<i.length;t++)if(s.id===i[t].id){i.splice(t,1);break}}this.cards=this.Cs(this.bs(i,!1)),this.Rs(),this.Jt.Dt(this.Us(!0))}bs(t,e){let i={},s={},n={};this.u&&(i=this.u.j(c.d.C.v)||{},s=this.u.j(c.d.C.H)||{},n=this.u.j(c.d.C.A)||{});const r={},a={},o={};for(let e=0;e<t.length;e++){const l=t[e].id;l&&(i[l]&&(t[e].clicked=!0,r[l]=!0),s[l]&&(t[e].viewed=!0,a[l]=!0),n[l]&&(t[e].dismissed=!0,o[l]=!0))}return e&&this.u&&(this.u.k(c.d.C.v,r),this.u.k(c.d.C.H,a),this.u.k(c.d.C.A,o)),t}Cs(t){const e=[],i=new Date;let s={};this.u&&(s=this.u.j(c.d.C.A)||{});let n=!1;for(let r=0;r<t.length;r++){const a=t[r].url;if(!this.Ft&&a&&(0,l.P)(a)){m.A.error(`Card with url ${a} will not be displayed because Javascript URLs are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable this card.`);continue}const o=t[r].expiresAt;let u=!0;if(null!=o&&(u=o>=i),u=u&&!t[r].dismissed,u)e.push(t[r]);else{const e=t[r].id;e&&(s[e]=!0),n=!0}}return n&&this.u&&this.u.k(c.d.C.A,s),e}Rs(){var t;const e=[];for(let t=0;t<this.cards.length;t++)e.push(this.cards[t].Y());null===(t=this.u)||void 0===t||t.k(c.d.C.ws,e)}zs(){this.ns&&(clearTimeout(this.ns),this.ns=null)}Es(){null!=this.os&&(clearTimeout(this.os),this.os=null)}Ls(t=1e3*this.us,e,i){this.Es(),this.os=window.setTimeout((()=>{this.xs(e,i,!0)}),t),this.ls=t}xs(t,e,i=!1,r=!0){var a;const o=this.qt,l=this.u;if(!o||!l)return void("function"==typeof e&&e());if(!i&&(this.zs(),this.ks(0)),!this.Ts())return void(null===(a=this.yt)||void 0===a||a.Is((()=>{this.xs(t,e)})));r&&this.Es();const u=o.Js({},!0);l.j(c.d.C.Ss)!==s.Ay.Ds()&&this.Ms(),u.last_full_sync_at=this.Bt,u.last_card_updated_at=this.Ht;const h=o.$s(u,p.A.Ps.Bs,i);let d=!1;o.Xs(u,((i=-1)=>{if(this.u){const t=(new Date).valueOf();p.A._s(this.u,p.A.Ps.Bs,t)}-1!==i&&h.push(["X-Braze-Req-Tokens-Remaining",i.toString()]),n.A.Gs({url:`${o.Hs()}/content_cards/sync`,data:u,headers:h,L:(i,s)=>{if(!o.Ks(u,i,h))return d=!0,void("function"==typeof e&&e());o.Os(),this.Fs(s,t,e),this.Ns(i),d=!1,p.A.Qs(this.u,p.A.Ps.Bs,1),"function"==typeof t&&t()},error:t=>{o.Vs(t,"retrieving content cards"),d=!0,"function"==typeof e&&e()},Ws:()=>{if(d&&r&&!this.os&&this.cs+1<f.PC){p.A.Ys(this.u,p.A.Ps.Bs);let i=this.ls;(null==i||i<1e3*this.us)&&(i=1e3*this.us),this.Ls(Math.min(3e5,(0,b.C)(1e3*this.us,3*i)),t,e),this.cs=this.cs+1}}})}),p.A.Ps.Bs,e)}Us(t){t||this.Kt();const e=this.Cs(this.cards);e.sort(((t,e)=>t.pinned&&!e.pinned?-1:e.pinned&&!t.pinned?1:t.updated&&e.updated&&t.updated>e.updated?-1:t.updated&&e.updated&&e.updated>t.updated?1:0));let i=Math.max(this.Ht||0,this.Bt||0);return 0===i&&(i=void 0),this.u&&this.u.j(c.d.C.ys)===this.Ht&&void 0===i&&(i=this.Ht),new a.A(e,(0,o.Zo)(i))}Zs(t){return this.Jt.It(t)}Ms(){this.Bt=0,this.Ht=0,this.u&&(this.u.ti(c.d.C.gs),this.u.ti(c.d.C.ys))}changeUser(t){t||(this.cards=[],this.Jt.Dt(new a.A(this.cards.slice(),null)),this.u&&(this.u.ti(c.d.C.ws),this.u.ti(c.d.C.v),this.u.ti(c.d.C.H),this.u.ti(c.d.C.A))),this.Ms()}clearData(t){this.Bt=0,this.Ht=0,this.cards=[],this.Jt.Dt(new a.A(this.cards.slice(),null)),t&&this.u&&(this.u.ti(c.d.C.ws),this.u.ti(c.d.C.v),this.u.ti(c.d.C.H),this.u.ti(c.d.C.A),this.u.ti(c.d.C.gs),this.u.ti(c.d.C.ys))}Ts(){return!(!this.yt||!this.yt.si()&&(0!==this.yt.ii()&&this.ei(),1))}ei(){this.Jt.Dt(new a.A([],new Date)),this.u&&this.u.ti(c.d.C.ws)}}const y={t:!1,provider:null,rr:()=>(y.o(),y.provider||(y.provider=new v(s.Ay.er(),s.Ay.l(),s.Ay.ir(),s.Ay.tr(),s.Ay.nr()),s.Ay.ar(y.provider)),y.provider),o:()=>{y.t||(s.Ay.g(y),y.t=!0)},destroy:()=>{y.provider=null,y.t=!1}},w=y},kkSs:(t,e,i)=>{i.d(e,{A:()=>o});var s=i("15I7"),n=i("ByVl"),r=i("HiHM"),a=i("oRs1");class o extends s.A{constructor(t,e){super(t,e)}getUnviewedCardCount(){return super.getUnreadCardCount()}logCardImpressions(t){(0,n.j)(t,!0)}logCardClick(t){return(0,r.x)(t,!0)}sr(){(0,a.J)()}dr(){return!0}}o.ur=6e4},oRs1:(t,e,i)=>{i.d(e,{J:()=>r});var s=i("F7/r"),n=i("FXju");function r(t,e){if(s.Ay.X())return n.A.rr().xs(t,e)}},"7nY/":(t,e,i)=>{i.d(e,{O:()=>r});var s=i("F7/r"),n=i("FXju");function r(t){if(!s.Ay.X())return;const e=n.A.rr(),i=e.Zs(t);if(!e.ps()){const t=s.Ay.cr();if(t){const i=t.mr((()=>{e.xs()}));i&&e.vs(i)}}return i}},PDhD:(t,e,i)=>{i.r(e),i.d(e,{changeUser:()=>l});var s=i("F7/r"),n=i("+aDo"),r=i("cqms"),a=i("TaGn"),o=i("TnFm");function l(t,e){if(!s.Ay.X())return;if(null==t||0===t.length||t!=t)return void r.A.error("changeUser requires a non-empty userId.");if((0,n.N)(t)>a.A.lr)return void r.A.error(`Rejected user id "${t}" because it is longer than ${a.A.lr} bytes.`);if(null!=e&&!(0,o.rK)(e,"set signature for new user","signature"))return;const i=s.Ay.cr();i&&i.changeUser(t.toString(),s.Ay.gr(),e)}},ndKy:(t,e,i)=>{i.d(e,{z:()=>r});var s=i("F7/r"),n=i("cqms");function r(){n.A.info("Destroying Braze instance"),s.Ay.destroy(!0)}},Ibo5:(t,e,i)=>{i.d(e,{A:()=>s});const s={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"}},groe:(t,e,i)=>{i.d(e,{w:()=>n});var s=i("F7/r");function n(){if(s.Ay.X())return s.Ay.pr()}},iXlr:(t,e,i)=>{i.d(e,{U:()=>d,V:()=>p});var s=i("cqms"),n=i("FggB"),r=i("F7/r"),a=i("l6Yh"),o=i("fXrE"),l=i("b8BB"),u=i("TnFm"),c=i("xoq4"),h=i("groe");function d(t,e,d){if(r.Ay.X())if(u.nx.test(t)){const e=(0,a.jj)(t);if(!e)return;const d=t=>{if(!(0,u.xs)(t))return void s.A.error(`Decoded Braze Action json is invalid: ${JSON.stringify(t,null,2)}`);const e=a.V.properties.type,p=a.V.properties.oo,b=a.V.properties.eo,f=t[e];if(f===a.V.types.ro){const e=t[p];for(const t of e)d(t)}else{const e=t[b];let u,d;switch(f){case a.V.types.logCustomEvent:Promise.resolve().then(i.bind(i,"2tha")).then((({logCustomEvent:t})=>{r.Ay.so()?(d=Array.prototype.slice.call(e),t(...d)):s.A.error(n.xE)}));break;case a.V.types.requestPushPermission:Promise.resolve().then(i.bind(i,"8j4a")).then((({requestPushPermission:t})=>{r.Ay.so()?"Safari"===o.A.browser&&o.A.OS===l.u.io?window.navigator.standalone&&t():t():s.A.error(n.xE)}));break;case a.V.types.setEmailNotificationSubscriptionType:case a.V.types.setPushNotificationSubscriptionType:case a.V.types.setCustomUserAttribute:case a.V.types.addToSubscriptionGroup:case a.V.types.removeFromSubscriptionGroup:case a.V.types.addToCustomAttributeArray:case a.V.types.removeFromCustomAttributeArray:u=(0,h.w)(),u&&u[f](...Array.prototype.slice.call(e));break;case a.V.types.no:case a.V.types.ao:d=Array.prototype.slice.call(e),c.uD.openUri(...d);break;default:s.A.info(`Ignoring unknown Braze Action: ${f}`)}}};d(e)}else c.uD.openUri(t,e,d)}function p(t,e){d(t,e)}},osUK:(t,e,i)=>{i.d(e,{n:()=>n});var s=i("F7/r");function n(t,e){return s.Ay.initialize(t,e)}},"2tha":(t,e,i)=>{i.r(e),i.d(e,{logCustomEvent:()=>h});var s=i("F7/r"),n=i("Z43y"),r=i("cqms"),a=i("wzJC"),o=i("87bj"),l=i("rv22"),u=i("TnFm"),c=i("FggB");function h(t,e){if(!s.Ay.X())return!1;if(null==t||t.length<=0)return r.A.error(`logCustomEvent requires a non-empty eventName, got "${t}". Ignoring event.`),!1;if(!(0,u.Dz)(t,"log custom event","the event name"))return!1;const[i,h]=(0,u.fB)(e,c.aV,"eventProperties",`log custom event "${t}"`,"event");if(!i)return!1;const d=s.Ay.ir();if(d&&d.me(t))return r.A.info(`Custom Event "${t}" is blocklisted, ignoring.`),!1;const p=n.A.q(a.w.CustomEvent,{n:t,p:h});if(p.L){r.A.info(`Logged custom event "${t}".`);for(const i of p.ge)l.B.rr().fe(o.A.ue,[t,e],i)}return p.L}},xLK9:(t,e,i)=>{i.r(e),i.d(e,{logPurchase:()=>h});var s=i("F7/r"),n=i("FggB"),r=i("cqms"),a=i("wzJC"),o=i("87bj"),l=i("rv22"),u=i("TnFm"),c=i("Z43y");function h(t,e,i,h,d){if(!s.Ay.X())return!1;if(null==i&&(i="USD"),null==h&&(h=1),null==t||t.length<=0)return r.A.error(`logPurchase requires a non-empty productId, got "${t}", ignoring.`),!1;if(!(0,u.Dz)(t,"log purchase","the purchase name"))return!1;if(null==e||isNaN(parseFloat(e.toString())))return r.A.error(`logPurchase requires a numeric price, got ${e}, ignoring.`),!1;const p=parseFloat(e.toString()).toFixed(2);if(null==h||isNaN(parseInt(h.toString())))return r.A.error(`logPurchase requires an integer quantity, got ${h}, ignoring.`),!1;const b=parseInt(h.toString());if(b<1||b>n.$k)return r.A.error(`logPurchase requires a quantity >1 and <${n.$k}, got ${b}, ignoring.`),!1;if(i=null!=i?i.toUpperCase():i,-1===["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYR","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMK","ZMW","ZWL"].indexOf(i))return r.A.error(`logPurchase requires a valid currencyCode, got ${i}, ignoring.`),!1;const[f,g]=(0,u.fB)(d,"logPurchase","purchaseProperties",`log purchase "${t}"`,"purchase");if(!f)return!1;const m=s.Ay.ir();if(m&&m.Dr(t))return r.A.info(`Purchase "${t}" is blocklisted, ignoring.`),!1;const A=c.A.q(a.w.Pr,{pid:t,c:i,p,q:b,pr:g});if(A.L){r.A.info(`Logged ${b} purchase${b>1?"s":""} of "${t}" for ${i} ${p}.`);for(const e of A.ge)l.B.rr().fe(o.A.Rr,[t,d],e)}return A.L}},vrNg:(t,e,i)=>{i.d(e,{f:()=>l});var s=i("F7/r"),n=i("vRYs"),r=i("cqms"),a=i("87bj"),o=i("rv22");function l(){if(!s.Ay.X())return;const t=s.Ay.cr();if(!t)return;t.openSession();const e=n.A.Yt.Qt,i=new n.A(e,r.A);i.jr(e.ss.hr,((s,n)=>{const l=n.lastClick,u=n.trackingString;r.A.info(`Firing push click trigger from ${u} push click at ${l}`);const c=t.kr(l,u),h=function(){o.B.rr().fe(a.A.vr,[u],c)};t.$r(h,h),i.re(e.ss.hr,s)})),i.Zt(e.ss.wr,(function(e){t.yr(e)}))}},wzQJ:(t,e,i)=>{i.d(e,{a:()=>n});var s=i("F7/r");function n(t){s.Ay.X()&&s.Ay.removeSubscription(t)}},"1m90":(t,e,i)=>{i.r(e),i.d(e,{requestImmediateDataFlush:()=>n});var s=i("F7/r");function n(t){if(!s.Ay.X())return;const e=s.Ay.cr();e&&e.requestImmediateDataFlush(t)}},Au1S:(t,e,i)=>{i.d(e,{o:()=>l});var s=i("F7/r"),n=i("azH7"),r=i("cqms"),a=i("vRYs"),o=i("FggB");function l(){const t=s.Ay.l();if(null==t)return void r.A.warn(o.xE);t.clearData();const e=(0,n.HP)(a.A.Yt);for(let t=0;t<e.length;t++){const i=e[t],s=a.A.Yt[i];new a.A(s,r.A).clearData()}if(s.Ay.X())for(const t of s.Ay.gr())t.clearData(!0)}},FOzX:(t,e,i)=>{i.d(e,{A:()=>n});var s=i("cqms");class n{constructor(t,e=!1,i={},s){this.id=t,this.enabled=e,this.properties=i,this.trackingString=s,this.id=t,this.enabled=e,this.properties=i,this.trackingString=s}he(t,e,i){const s=this.properties[t];return null==s?(this.ye(t),null):e(s)?s.value:(this.Pe(i),null)}getStringProperty(t){return this.he(t,this.be,"string")}getNumberProperty(t){return this.he(t,this.Ie,"number")}getBooleanProperty(t){return this.he(t,this.de,"boolean")}getImageProperty(t){return this.he(t,this.Te,"image")}getJsonProperty(t){return this.he(t,this.Ee,"jsonobject")}getTimestampProperty(t){return this.he(t,this.Ne,"datetime")}Y(){const t={};return t[n.tt.ht]=this.id,t[n.tt.le]=this.enabled,t[n.tt.pe]=this.properties,t[n.tt.Fe]=this.trackingString,t}Pe(t){s.A.info(`Property is not of type ${t}.`)}ye(t){s.A.info(`${t} not found in feature flag properties.`)}be(t){return"string"===t.type&&"string"==typeof t.value}Ie(t){return"number"===t.type&&"number"==typeof t.value}de(t){return"boolean"===t.type&&"boolean"==typeof t.value}Te(t){return"image"===t.type&&"string"==typeof t.value}Ee(t){return"jsonobject"===t.type&&"object"==typeof t.value&&t.value.constructor==Object}Ne(t){return"datetime"===t.type&&"number"==typeof t.value}}n.tt={ht:"id",le:"e",pe:"pr",Fe:"fts"},n.Rt={ht:"id",le:"enabled",pe:"properties",Fe:"fts"}},gxpy:(t,e,i)=>{i.d(e,{A:()=>g});var s=i("F7/r"),n=i("cqms"),r=i("w7bV"),a=i("jGgm"),o=i("TdiU"),l=i("L0v4"),u=i("CgXj"),c=i("FOzX");function h(t){if(t[c.A.Rt.ht]&&"boolean"==typeof t[c.A.Rt.le])return new c.A(t[c.A.Rt.ht],t[c.A.Rt.le],t[c.A.Rt.pe],t[c.A.Rt.Fe]);n.A.info(`Unable to create feature flag from ${JSON.stringify(t,null,2)}`)}function d(t){if(t[c.A.tt.ht]&&"boolean"==typeof t[c.A.tt.le])return new c.A(t[c.A.tt.ht],t[c.A.tt.le],t[c.A.tt.pe],t[c.A.tt.Fe]);n.A.info(`Unable to deserialize feature flag from ${JSON.stringify(t,null,2)}`)}var p=i("J++8");class b extends r.A{constructor(t,e,i,n){super(),this.yt=t,this.qt=e,this.u=i,this.ri=n,this.hi=[],this.oi=0,this.yt=t,this.qt=e,this.u=i,this.ri=n,this.ai=null,this.ni=new o.A,this.li=10,this.ui=null,this.fi=null,s.Ay.$t(this.ni)}Ns(t){var e;if((null===(e=this.yt)||void 0===e?void 0:e.ci())&&null!=t&&t.feature_flags){this.hi=[];for(const e of t.feature_flags){const t=h(e);t&&this.hi.push(t)}this.oi=(new Date).getTime(),this.di(),this.ni.Dt(this.hi)}}mi(){let t={};this.u&&(t=this.u.j(a.d.C.gi));const e={};for(const i in t){const s=d(t[i]);s&&(e[s.id]=s)}return e}Fi(){var t;return(null===(t=this.u)||void 0===t?void 0:t.j(a.d.C.vi))||{}}pi(t){this.u&&this.u.k(a.d.C.vi,t)}Zs(t){return this.ni.It(t)}refreshFeatureFlags(t,e,i=!1,s=!0){const n=()=>{"function"==typeof e&&e(),this.ni.Dt(this.hi)};if(!this.wi(i))return!this.ai&&this.yt&&(this.ai=this.yt.ji((()=>{this.refreshFeatureFlags(t,e)}))),void n();const r=this.qt;if(!r)return void n();s&&this.yi();const a=r.Js({},!0),o=r.$s(a,p.A.Ps.bi);let c=!1;r.Xs(a,((r=-1)=>{if(!this.qt)return void n();const h=(new Date).valueOf();p.A._s(this.u,p.A.Ps.bi,h),-1!==r&&o.push(["X-Braze-Req-Tokens-Remaining",r.toString()]),u.A.Gs({url:`${this.qt.Hs()}/feature_flags/sync`,headers:o,data:a,L:e=>{if(!this.qt.Ks(a,e,o))return c=!0,void n();this.qt.Os(),this.Ns(e),c=!1,p.A.Qs(this.u,p.A.Ps.bi,1),"function"==typeof t&&t()},error:t=>{this.qt.Vs(t,"retrieving feature flags"),c=!0,n()},Ws:()=>{if(s&&c&&!this.fi){p.A.Ys(this.u,p.A.Ps.bi);let s=this.ui;(null==s||s<1e3*this.li)&&(s=1e3*this.li),this.Ci(Math.min(3e5,(0,l.C)(1e3*this.li,3*s)),t,e,i)}}})}),p.A.Ps.bi,e)}yi(){null!=this.fi&&(clearTimeout(this.fi),this.fi=null)}Ci(t=1e3*this.li,e,i,s=!1){this.yi(),this.fi=window.setTimeout((()=>{this.refreshFeatureFlags(e,i,s)}),t),this.ui=t}wi(t){if(!this.yt)return!1;if(!t){const t=this.yt.Ri();if(null==t)return!1;let e=!1;if(!isNaN(t)){if(-1===t)return n.A.info("Feature flag refreshes not allowed"),!1;e=(new Date).getTime()>=(this.oi||0)+1e3*t}if(!e)return n.A.info(`Feature flag refreshes were rate limited to ${t} seconds`),!1}return this.yt.ci()}Ti(){var t;return(null===(t=this.u)||void 0===t?void 0:t.j(a.d.C.Di))||null}Ii(){var t,e;null===(t=this.u)||void 0===t||t.k(a.d.C.Di,null===(e=this.ri)||void 0===e?void 0:e.Si())}qi(){var t;const e=null===(t=this.ri)||void 0===t?void 0:t.Si(),i=this.Ti();return null==i||e===i}di(){if(!this.u)return;const t={};for(const e of this.hi){const i=e.Y();t[e.id]=i}this.u.k(a.d.C.gi,t),this.u.k(a.d.C.xi,this.oi),this.Ii()}}const f={t:!1,provider:null,rr:()=>(f.o(),f.provider||(f.provider=new b(s.Ay.ir(),s.Ay.nr(),s.Ay.l(),s.Ay.zr()),s.Ay.ar(f.provider)),f.provider),o:()=>{f.t||(s.Ay.g(f),f.t=!0)},destroy:()=>{f.provider=null,f.t=!1}},g=f},"64cp":(t,e,i)=>{i.r(e),i.d(e,{default:()=>o,refreshFeatureFlags:()=>a});var s=i("F7/r"),n=i("gxpy");function r(t,e,i=!1){if(s.Ay.X())return n.A.rr().refreshFeatureFlags(t,e,i)}function a(t,e){r(t,e)}const o=r},"5fch":(t,e,i)=>{i.d(e,{A:()=>d});var s=i("F7/r"),n=i("w7bV"),r=i("IID/"),a=i("QKCW"),o=i("7esM"),l=i("jGgm"),u=i("TdiU");class c extends n.A{constructor(t,e){super(),this.u=t,this.zi=e,this.cards=[],this.Ni=null,this.u=t,this.zi=e,this.Jt=new u.A,s.Ay.$t(this.Jt),this.Kt()}Kt(){let t=[];this.u&&(t=this.u.j(l.d.C.Ui)||[]);const e=[];for(let i=0;i<t.length;i++){const s=(0,a._l)(t[i]);null!=s&&e.push(s)}this.cards=e,this.u&&(this.Ni=(0,o.jU)(this.u.j(l.d.C.ki)))}Ai(t){const e=[];let i=null,s={};this.u&&(s=this.u.j(l.d.C.J)||{});const n={};for(let r=0;r<t.length;r++){i=t[r];const o=(0,a.R)(i);if(null!=o){const t=o.id;t&&s[t]&&(o.viewed=!0,n[t]=!0),e.push(o)}}this.cards=e,this.Rs(),this.Ni=new Date,this.u&&(this.u.k(l.d.C.J,n),this.u.k(l.d.C.ki,this.Ni))}Rs(){var t;const e=[];for(let t=0;t<this.cards.length;t++)e.push(this.cards[t].Y());null===(t=this.u)||void 0===t||t.k(l.d.C.Ui,e)}Ns(t){null!=t&&t.feed&&(this.Kt(),this.Ai(t.feed),this.Jt.Dt(new r.A(this.cards.slice(),this.Ni)))}Bi(){this.Kt();const t=[],e=new Date;for(let i=0;i<this.cards.length;i++){const s=this.cards[i].expiresAt;let n=!0;null!=s&&(n=s>=e),n&&t.push(this.cards[i])}return new r.A(t,this.Ni)}xs(){this.zi&&this.zi.requestFeedRefresh()}Zs(t){return this.Jt.It(t)}clearData(t){null==t&&(t=!1),this.cards=[],this.Ni=null,t&&this.u&&(this.u.ti(l.d.C.Ui),this.u.ti(l.d.C.ki)),this.Jt.Dt(new r.A(this.cards.slice(),this.Ni))}}const h={t:!1,provider:null,rr:()=>(h.o(),h.provider||(h.provider=new c(s.Ay.l(),s.Ay.cr()),s.Ay.ar(h.provider)),h.provider),o:()=>{h.t||(s.Ay.g(h),h.t=!0)},destroy:()=>{h.provider=null,h.t=!1}},d=h},"IID/":(t,e,i)=>{i.d(e,{A:()=>o});var s=i("15I7"),n=i("ByVl"),r=i("HiHM"),a=i("E8S9");class o extends s.A{constructor(t,e){super(t,e)}logCardImpressions(t){(0,n.j)(t,!1)}logCardClick(t){return(0,r.x)(t,!1)}sr(){(0,a.R)()}dr(){return!1}}},VB97:(t,e,i)=>{i.d(e,{o:()=>r});var s=i("F7/r"),n=i("wzJC");function r(){var t;if(s.Ay.X())return null===(t=s.Ay.nr())||void 0===t?void 0:t.qr(n.j.Ar).L}},E8S9:(t,e,i)=>{i.d(e,{R:()=>r});var s=i("F7/r"),n=i("5fch");function r(){if(s.Ay.X())return n.A.rr().xs()}},IfEg:(t,e,i)=>{i.d(e,{k:()=>r});var s=i("F7/r"),n=i("5fch");function r(t){if(s.Ay.X())return n.A.rr().Zs(t)}},RBYJ:(t,e,i)=>{i.r(e),i.d(e,{showFeed:()=>p});var s=i("F7/r"),n=i("x6Ot"),r=i("IID/"),a=i("IfEg"),o=i("VB97"),l=i("5fch"),u=i("azH7"),c=i("zW8y"),h=i("CaYi"),d=i("cqms");function p(t,e,i){if(!s.Ay.X())return;(0,h.s)();const p=(t,e)=>{if(null==e)return t;const i=[];for(let t=0;t<e.length;t++)i.push(e[t].toLowerCase());const s=[];for(let e=0;e<t.length;e++){const n=[],r=t[e].categories||[];for(let t=0;t<r.length;t++)n.push(r[t].toLowerCase());(0,u.E$)(n,i).length>0&&s.push(t[e])}return s},b=s.Ay.nn(s.lw.tn)||s.Ay.nn(s.lw.en)||!1;let f=!1;null==t&&(t=document.body,f=!0);let g,m=!1;null==e?(g=l.A.rr().Bi(),(0,n.Z7)(g,p(g.cards,i),g.lastUpdated,null,b),m=!0):g=new r.A(p(e,i),new Date);const A=(0,n.Nc)(g,b,f);if(m){(null==g.lastUpdated||(new Date).valueOf()-g.lastUpdated.valueOf()>r.A.ur)&&(d.A.info(`Cached feed was older than max TTL of ${r.A.ur} ms, requesting an update from the server.`),(0,n.Y9)(g,A));const t=(new Date).valueOf(),e=(0,a.k)((function(e){const s=A.querySelectorAll(".ab-refresh-button")[0];if(null!=s){let e=500;e-=(new Date).valueOf()-t;const i=A.getAttribute(n.Ql);if(i){const t=parseInt(i);isNaN(t)||(e-=(new Date).valueOf()-t)}setTimeout((function(){s.className=s.className.replace(/fa-spin/g,"")}),Math.max(e,0))}(0,n.Z7)(g,p(e.cards,i),e.lastUpdated,A,b)}));(0,n.kz)(e,A)}const v=t=>{const e=t.querySelectorAll(".ab-feed");let i=null;for(let s=0;s<e.length;s++)e[s].parentNode===t&&(i=e[s]);null!=i?((0,n.ID)(i),i.parentNode&&i.parentNode.replaceChild(A,i)):t.appendChild(A),setTimeout((function(){A.className=A.className.replace("ab-hide","ab-show")}),0),f&&A.focus(),(0,o.o)(),(0,n.UH)(g,A),g&&(0,c.cM)(g.cards,t)};var y;null!=t?v(t):window.onload=(y=window.onload,function(){"function"==typeof y&&y(new Event("oldLoad")),v(document.body)})}},Rl7B:(t,e,i)=>{i.d(e,{g:()=>h,x:()=>d});var s=i("LbZy"),n=i("rvbG"),r=i("+/8Z"),a=i("I0nJ"),o=i("yBih"),l=i("QVqW"),u=i("u56O"),c=i("cqms");function h(t){if(!t)return null;if(t.is_control)return n.A.fromJson(t);let e=t.type;null!=e&&(e=e.toUpperCase());const i=t.message,h=t.text_align_message,d=t.slide_from,p=t.extras,b=t.trigger_id,f=t.click_action,g=t.uri,m=t.open_target,A=t.message_close,v=t.duration,y=t.icon,w=t.image_url,x=t.image_style,E=t.icon_color,k=t.icon_bg_color,S=t.bg_color,C=t.text_color,T=t.close_btn_color,N=t.header,_=t.text_align_header,O=t.header_text_color,I=t.frame_color,D=[];let z=t.btns;null==z&&(z=[]);for(let t=0;t<z.length;t++)D.push(o.A.fromJson(z[t]));const R=t.crop_type,P=t.orientation,L=t.animate_in,B=t.animate_out;let M=t.html_id,F=t.css;null!=M&&""!==M&&null!=F&&""!==F||(M=void 0,F=void 0);const U=t.message_extras;let q;if(e===l.A.it||e===s.A.Be.Ue)q=new l.A(i,h,p,b,f,g,m,A,v,y,w,x,E,k,S,C,T,L,B,N,_,O,I,D,R,M,F,U);else if(e===r.A.it)q=new r.A(i,h,p,b,f,g,m,A,v,y,w,x,E,k,S,C,T,L,B,N,_,O,I,D,R,P,M,F,U);else if(e===u.A.it)q=new u.A(i,h,d,p,b,f,g,m,A,v,y,w,E,k,S,C,T,L,B,M,F,U);else{if(e!==a.A.it&&e!==s.A.Be.Me&&e!==s.A.Be.Ve)return void c.A.error("Ignoring message with unknown type "+e);{const e=t.message_fields;q=new a.A(i,p,b,A,v,L,B,I,M,F,e,U),q.trusted=t.trusted||!1}}return q.xe=e,q}function d(t){const e=[];for(const i of t)e.push(new o.A(i.text,i.backgroundColor,i.textColor,i.borderColor,i.clickAction,i.uri,i.id));return e}},D1mP:(t,e,i)=>{i.d(e,{A:()=>T});var s=i("CgXj"),n=i("F7/r"),r=i("rvbG"),a=i("I0nJ"),o=i("LbZy"),l=i("yBih"),u=i("Z43y"),c=i("Rl7B"),h=i("L0v4"),d=i("Jdpe"),p=i("wzJC"),b=i("cqms"),f=i("TdiU"),g=i("Vqo0"),m=i("TnFm"),A=i("l6Yh"),v=i("eis7"),y=i("J++8"),w=i("jGgm"),x=i("+/8Z"),E=i("QVqW"),k=i("u56O");class S{constructor(t,e,i,s){this.qt=t,this.ri=e,this.u=i,this.wt=s,this.qt=t,this.ri=e,this.u=i,this.wt=s,this._e=new f.A,n.Ay.$t(this._e),this.Xe=1e3,this.We=6e4,this.Ye=null}Ze(){return this._e}Mi(t){return this._e.It(t)}_i(){return this.Ye}Pi(t){this.Ye=t}q(t,e,i,s){const n=new d.A;let o;if(t instanceof r.A)o={trigger_ids:[t.triggerId]};else{if(e===p.w.$i||t instanceof a.A&&e===p.w.Ei){if(!t.p(s))return b.A.info("This in-app message has already received a click. Ignoring analytics event."),n}else if(e===p.w.Gi&&!t.K())return b.A.info("This in-app message has already received an impression. Ignoring analytics event."),n;o=this.Oi(t)}return null==o?n:(t.messageExtras&&(o.message_extras=t.messageExtras),null!=i&&(o.bid=i),u.A.q(e,o))}Xi(t,e){const i=new d.A;if(!t.p())return b.A.info("This in-app message button has already received a click. Ignoring analytics event."),i;const s=this.Oi(e);return null==s?i:t.id===l.A.Hi?(b.A.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),i):(null!=t.id&&(s.bid=t.id),u.A.q(p.w.Ei,s))}Ji(t){const e=t.messageFields;return null!=e&&e.is_push_primer||!1}Ki(t){if(!(t instanceof o.A))return;const e=t=>{if(!t)return;const e=(0,A.jj)(t);return(0,A.qj)(e)?(0,A.$6)(A.mY.Li,"In-App Message"):(0,A.dy)(e)&&!v.A.Qi()?(0,A.$6)(A.mY.Vi,"In-App Message"):void 0};if(this.Ji(t)&&!v.A.Qi())return"In-App Message contains a push prompt, but is not eligible for a push prompt. Ignoring.";const i=t.buttons||[];let s;for(const t of i)if(t.clickAction===o.A.ClickAction.URI&&t.uri&&m.nx.test(t.uri)&&(s=e(t.uri),s))return s;return t.clickAction===o.A.ClickAction.URI&&t.uri&&m.nx.test(t.uri)?e(t.uri):void 0}Wi(t,e,i,n){const r=this.qt;if(!r)return;const a=r.Yi(!1,!1),o=r.Js(a);o.template={trigger_id:t.triggerId,trigger_event_type:e},null!=i&&(o.template.data=i.Zi());const l=r.$s(o,y.A.Ps.Ir);r.Xs(o,((r=-1)=>{if(!this.qt)return;const a=(new Date).valueOf();y.A._s(this.u,y.A.Ps.Ir,a),-1!==r&&l.push(["X-Braze-Req-Tokens-Remaining",r.toString()]),s.A.Gs({url:`${this.qt.Hs()}/template/`,data:o,headers:l,L:e=>{if(y.A.Qs(this.u,y.A.Ps.Ir,1),!this.qt.Ks(o,e,l))return void("function"==typeof t.Mr&&t.Mr());if(this.qt.Os(),null==e||null==e.templated_message)return;const i=e.templated_message;if(i.type!==g.A.Br.Tr)return;const s=(0,c.g)(i.data);if(null==s)return;const n=this.Ki(s);if(n)return b.A.error(n),void("function"==typeof t.Mr&&t.Mr());"function"==typeof t._r&&t._r(s)},error:s=>{let r=`getting user personalization for message ${t.triggerId}`;if((new Date).valueOf()-t.Er<t.Gr){y.A.Ys(this.u,y.A.Ps.Ir);const s=Math.min(t.Gr,this.We),a=this.Xe;null==n&&(n=a);const o=Math.min(s,(0,h.C)(a,3*n));r+=`. Retrying in ${o} ms`,setTimeout((()=>{this.Wi(t,e,i,o)}),o)}this.qt.Vs(s,r)}})}),y.A.Ps.Ir)}Oi(t){if(null==t.triggerId)return b.A.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;const e={};return null!=t.triggerId&&(e.trigger_ids=[t.triggerId]),e}je(t){return!!this.u&&!(!(t&&t instanceof o.A&&t.constructor!==o.A)||t instanceof r.A)&&this.u.k(w.d.C.Nr,t.Y())}Se(){if(!this.u)return null;const t=this.u.j(w.d.C.Nr);if(!t)return null;let e;switch(t.type){case o.A.Be.Or:e=x.A.Xr(t);break;case o.A.Be.Hr:case o.A.Be.Me:case o.A.Be.Ve:e=a.A.Xr(t);break;case o.A.Be.Jr:case o.A.Be.Ue:e=E.A.Xr(t);break;case o.A.Be.Kr:e=k.A.Xr(t)}return e&&this.Lr(),e}Lr(){this.u&&this.u.ti(w.d.C.Nr)}}const C={i:null,t:!1,m:()=>(C.o(),C.i||(C.i=new S(n.Ay.nr(),n.Ay.zr(),n.Ay.l(),n.Ay.er())),C.i),o:()=>{C.t||(n.Ay.g(C),C.t=!0)},destroy:()=>{C.i=null,C.t=!1}},T=C},SfNv:(t,e,i)=>{i.d(e,{K:()=>h});var s=i("F7/r"),n=i("FggB"),r=i("LbZy"),a=i("yBih"),o=i("D1mP"),l=i("cqms"),u=i("87bj"),c=i("rv22");function h(t,e){var i;if(!s.Ay.X())return!1;if(!(t instanceof a.A))return l.A.error("button must be an InAppMessageButton object"),!1;if(!(e instanceof r.A))return l.A.error(n.fX),!1;const h=o.A.m().Xi(t,e);if(h.L)for(let s=0;s<h.ge.length;s++)c.B.rr().fe(u.A.Qr,[e.triggerId,null===(i=t.id)||void 0===i?void 0:i.toString()],h.ge[s]);return h.L}},ikR4:(t,e,i)=>{i.d(e,{q:()=>d});var s=i("F7/r"),n=i("LbZy"),r=i("D1mP"),a=i("5QSF"),o=i("FggB"),l=i("cqms"),u=i("wzJC"),c=i("87bj"),h=i("rv22");function d(t){if(!s.Ay.X())return!1;if(!(t instanceof n.A))return l.A.error(o.fX),!1;const e=r.A.m().q(t,u.w.$i);if(e){t.Ur()||(0,a.z)(t);for(let i=0;i<e.ge.length;i++)h.B.rr().fe(c.A.Qr,[t.triggerId],e.ge[i])}return e.L}},xAw5:(t,e,i)=>{i.d(e,{h:()=>c});var s=i("F7/r"),n=i("I0nJ"),r=i("D1mP"),a=i("cqms"),o=i("wzJC"),l=i("87bj"),u=i("rv22");function c(t,e,i){if(!s.Ay.X())return!1;if(!(t instanceof n.A))return a.A.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;let c=o.w.$i;null!=e&&(c=o.w.Ei);const h=r.A.m().q(t,c,e,i);if(h.L)for(let i=0;i<h.ge.length;i++)u.B.rr().fe(l.A.Qr,[t.triggerId,e],h.ge[i]);return h.L}},"5QSF":(t,e,i)=>{i.d(e,{z:()=>c});var s=i("F7/r"),n=i("rvbG"),r=i("LbZy"),a=i("D1mP"),o=i("FggB"),l=i("cqms"),u=i("wzJC");function c(t){if(!s.Ay.X())return!1;if(!(t instanceof r.A||t instanceof n.A))return l.A.error(o.fX),!1;const e=t instanceof n.A?u.w.mo:u.w.Gi;return a.A.m().q(t,e).L}},rvbG:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t,e){this.triggerId=t,this.messageExtras=e,this.triggerId=t,this.messageExtras=e,this.extras={},this.isControl=!0}static fromJson(t){return new s(t.trigger_id,t.message_extras)}}},"+/8Z":(t,e,i)=>{i.d(e,{A:()=>r});var s=i("Rl7B"),n=i("LbZy");class r extends n.A{constructor(t,e,i,s,r,a,o,l,u,c,h,d,p,b,f,g,m,A,v,y,w,x,E,k,S,C,T,N,_){l=l||n.A.DismissType.MANUAL,C=C||n.A.Orientation.PORTRAIT,super(t,e,void 0,i,s,r,a,o,l,u,c,h,d,p,b,f,g,m,A,v,y,w,x,E,k,S=S||n.A.CropType.CENTER_CROP,C,T,N,_),this.qe=n.A.TextAlignment.CENTER}Y(){return super.Y(r.it)}static Xr(t){return new r(t[n.A.tt.Vr],t[n.A.tt.Wr],t[n.A.tt.bt],t[n.A.tt.Yr],t[n.A.tt.Zr],t[n.A.tt.URI],t[n.A.tt.ea],t[n.A.tt.ra],t[n.A.tt.sa],t[n.A.tt.ta],t[n.A.tt.ot],t[n.A.tt.ia],t[n.A.tt.aa],t[n.A.tt.oa],t[n.A.tt.pa],t[n.A.tt.ma],t[n.A.tt.na],t[n.A.tt.ua],t[n.A.tt.ca],t[n.A.tt.fa],t[n.A.tt.da],t[n.A.tt.la],t[n.A.tt.ga],(0,s.x)(t[n.A.tt.ja]),t[n.A.tt.xa],t[n.A.tt.za],t[n.A.tt.ha],t[n.A.tt.CSS],t[n.A.tt.va])}}r.it=n.A.Be.Or},I0nJ:(t,e,i)=>{i.d(e,{A:()=>n});var s=i("LbZy");class n extends s.A{constructor(t,e,i,n,r,a,o,l,u,c,h,d){super(t,void 0,void 0,e,i,void 0,void 0,void 0,n=n||s.A.DismissType.MANUAL,r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,o,void 0,void 0,void 0,l,void 0,void 0,void 0,u,c,d),this.messageFields=h,this.messageFields=h}do(){return!1}p(t){if(this.xe===s.A.Be.Hr){if(this.vo)return!1;this.vo=!0}return this.Et.Dt(t),!0}Y(){const t=super.Y(n.it);return t[s.A.tt.uo]=this.messageFields,t}static Xr(t){return new n(t[s.A.tt.Vr],t[s.A.tt.bt],t[s.A.tt.Yr],t[s.A.tt.ra],t[s.A.tt.sa],t[s.A.tt.ua],t[s.A.tt.ca],t[s.A.tt.ga],t[s.A.tt.ha],t[s.A.tt.CSS],t[s.A.tt.uo],t[s.A.tt.va])}}n.it=s.A.Be.Hr},yBih:(t,e,i)=>{i.d(e,{A:()=>r});var s=i("LbZy"),n=i("TdiU");class r{constructor(t,e,i,a,o,l,u){this.text=t,this.backgroundColor=e,this.textColor=i,this.borderColor=a,this.clickAction=o,this.uri=l,this.id=u,this.text=t||"",this.backgroundColor=e||s.A.th.sh,this.textColor=i||s.A.th.ih,this.borderColor=a||this.backgroundColor,this.clickAction=o||s.A.ClickAction.NONE,this.uri=l,null==u&&(u=r.Hi),this.id=u,this.vo=!1,this.Et=new n.A}subscribeToClickedEvent(t){return this.Et.It(t)}removeSubscription(t){this.Et.removeSubscription(t)}removeAllSubscriptions(){this.Et.removeAllSubscriptions()}p(){return!this.vo&&(this.vo=!0,this.Et.Dt(),!0)}static fromJson(t){return new r(t.text,t.bg_color,t.text_color,t.border_color,t.click_action,t.uri,t.id)}}r.Hi=-1},LbZy:(t,e,i)=>{i.d(e,{A:()=>u});var s=i("F7/r"),n=i("fXrE"),r=i("zxwP"),a=i("KiAB"),o=i("TdiU"),l=i("N2JA");class u{constructor(t,e,i,s,n,r,a,l,c,h,d,p,b,f,g,m,A,v,y,w,x,E,k,S,C,T,N,_,O,I){this.message=t,this.messageAlignment=e,this.slideFrom=i,this.extras=s,this.triggerId=n,this.clickAction=r,this.uri=a,this.openTarget=l,this.dismissType=c,this.duration=h,this.icon=d,this.imageUrl=p,this.imageStyle=b,this.iconColor=f,this.iconBackgroundColor=g,this.backgroundColor=m,this.textColor=A,this.closeButtonColor=v,this.animateIn=y,this.animateOut=w,this.header=x,this.headerAlignment=E,this.headerTextColor=k,this.frameColor=S,this.buttons=C,this.cropType=T,this.orientation=N,this.htmlId=_,this.css=O,this.messageExtras=I,this.message=t,this.messageAlignment=e||u.TextAlignment.CENTER,this.duration=h||5e3,this.slideFrom=i||u.SlideFrom.BOTTOM,this.extras=s||{},this.triggerId=n,this.clickAction=r||u.ClickAction.NONE,this.uri=a,this.openTarget=l||u.OpenTarget.NONE,this.dismissType=c||u.DismissType.AUTO_DISMISS,this.icon=d,this.imageUrl=p,this.imageStyle=b||u.ImageStyle.TOP,this.iconColor=f||u.th.ih,this.iconBackgroundColor=g||u.th.sh,this.backgroundColor=m||u.th.ih,this.textColor=A||u.th.hh,this.closeButtonColor=v||u.th.eh,this.animateIn=y,null==this.animateIn&&(this.animateIn=!0),this.animateOut=w,null==this.animateOut&&(this.animateOut=!0),this.header=x,this.headerAlignment=E||u.TextAlignment.CENTER,this.headerTextColor=k||u.th.hh,this.frameColor=S||u.th.Eh,this.buttons=C||[],this.cropType=T||u.CropType.FIT_CENTER,this.orientation=N,this.htmlId=_,this.css=O,this.isControl=!1,this.messageExtras=I,this.nh=!1,this.Th=!1,this.vo=!1,this.oh=!1,this.Re=null,this.ke=null,this.Et=new o.A,this.rh=new o.A,this.qe=u.TextAlignment.CENTER}subscribeToClickedEvent(t){return this.Et.It(t)}subscribeToDismissedEvent(t){return this.rh.It(t)}removeSubscription(t){this.Et.removeSubscription(t),this.rh.removeSubscription(t)}removeAllSubscriptions(){this.Et.removeAllSubscriptions(),this.rh.removeAllSubscriptions()}closeMessage(){this.Cr(this.Re)}$e(){return!0}do(){return this.$e()}Ce(){return null!=this.htmlId&&this.htmlId.length>4}ve(){return this.Ce()&&null!=this.css&&this.css.length>0}we(){if(this.Ce()&&this.ve())return this.htmlId+"-css"}K(){return!this.Th&&(this.Th=!0,!0)}Ur(){return this.Th}p(t){return!this.vo&&(this.vo=!0,this.Et.Dt(),!0)}N(){return!this.oh&&(this.oh=!0,this.rh.Dt(),!0)}hide(t){if(t&&t.parentNode){let e=t.closest(".ab-iam-root");if(null==e&&(e=t),this.$e()&&null!=e.parentNode){const t=e.parentNode.classList;t&&t.contains(u.lh)&&t.remove(u.lh),document.body.removeEventListener("touchmove",u.uh)}e.className=e.className.replace(u.ah,u.Ih)}return this.animateOut||!1}Cr(t,e){if(null==t)return;let i;this.Re=null,i=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t;let s=!1;i&&(s=this.hide(i));const r=document.body;let a;null!=r&&(a=r.scrollTop);const o=()=>{if(t&&t.parentNode){let e=t.closest(".ab-iam-root");null==e&&(e=t),e.parentNode&&e.parentNode.removeChild(e)}const i=this.we();if(null!=i){const t=document.getElementById(i);t&&t.parentNode&&t.parentNode.removeChild(t)}null!=r&&"Safari"===n.A.browser&&(r.scrollTop=a),e?e():this.N()};s?setTimeout(o,u.Ah):o(),this.ke&&this.ke.focus()}Ge(){return document.createTextNode(this.message||"")}Ae(t){let e="";this.message||this.header||!this.$e()||(e="Modal Image"),t.setAttribute("alt",e)}static uh(t){if(t.targetTouches&&t.targetTouches.length>1)return;const e=t.target;e&&e.classList&&e.classList.contains("ab-message-text")&&e.scrollHeight>e.clientHeight||document.querySelector(`.${u.lh}`)&&t.cancelable&&t.preventDefault()}Oh(t){const e=t.parentNode;this.$e()&&null!=e&&this.orientation!==u.Orientation.LANDSCAPE&&(null!=e.classList&&e.classList.add(u.lh),document.body.addEventListener("touchmove",u.uh,!!(0,r.CF)()&&{passive:!1})),t.className+=" "+u.ah}static _h(t){if(t.keyCode===a.c.mh&&!s.Ay.nn(s.lw.Lh)&&document.querySelectorAll(".ab-modal-interactions").length>0){const t=document.getElementsByClassName("ab-html-message");let e=!1;for(const i of t){let t=null;(0,l.B)(i)&&i.contentWindow&&(t=i.contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0]),null!=t&&((0,r.jp)(t),e=!0)}if(!e){const t=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=t&&(0,r.jp)(t)}}}Nh(){this.nh||s.Ay.nn(s.lw.Lh)||(document.addEventListener("keydown",u._h,!1),s.Ay.Sh((()=>{document.removeEventListener("keydown",u._h)})),this.nh=!0)}Y(t){const e={};return t?(e[u.tt.Vr]=this.message,e[u.tt.Wr]=this.messageAlignment,e[u.tt.Rh]=this.slideFrom,e[u.tt.bt]=this.extras,e[u.tt.Yr]=this.triggerId,e[u.tt.Zr]=this.clickAction,e[u.tt.URI]=this.uri,e[u.tt.ea]=this.openTarget,e[u.tt.ra]=this.dismissType,e[u.tt.sa]=this.duration,e[u.tt.ta]=this.icon,e[u.tt.ot]=this.imageUrl,e[u.tt.ia]=this.imageStyle,e[u.tt.aa]=this.iconColor,e[u.tt.oa]=this.iconBackgroundColor,e[u.tt.pa]=this.backgroundColor,e[u.tt.ma]=this.textColor,e[u.tt.na]=this.closeButtonColor,e[u.tt.ua]=this.animateIn,e[u.tt.ca]=this.animateOut,e[u.tt.fa]=this.header,e[u.tt.da]=this.headerAlignment,e[u.tt.la]=this.headerTextColor,e[u.tt.ga]=this.frameColor,e[u.tt.ja]=this.buttons,e[u.tt.xa]=this.cropType,e[u.tt.za]=this.orientation,e[u.tt.ha]=this.htmlId,e[u.tt.CSS]=this.css,e[u.tt.Z]=t,e[u.tt.va]=this.messageExtras,e):e}}u.th={hh:4281545523,ih:4294967295,sh:4278219733,Mh:4293914607,Dh:4283782485,Eh:3224580915,eh:4288387995},u.Le={Ch:"hd",ze:"ias",dh:"of",Uh:"do",bh:"umt",Ph:"tf",ph:"te"},u.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},u.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},u.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},u.OpenTarget={NONE:"NONE",BLANK:"BLANK"},u.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},u.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},u.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},u.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},u.Be={Kr:"SLIDEUP",Jr:"MODAL",Ue:"MODAL_STYLED",Or:"FULL",Hr:"WEB_HTML",Me:"HTML",Ve:"HTML_FULL"},u.Ah=500,u.fh=200,u.ah="ab-show",u.Ih="ab-hide",u.lh="ab-pause-scrolling",u.tt={Vr:"m",Wr:"ma",Rh:"sf",bt:"e",Yr:"ti",Zr:"ca",URI:"u",ea:"oa",ra:"dt",sa:"d",ta:"i",ot:"iu",ia:"is",aa:"ic",oa:"ibc",pa:"bc",ma:"tc",na:"cbc",ua:"ai",ca:"ao",fa:"h",da:"ha",la:"htc",ga:"fc",ja:"b",xa:"ct",za:"o",ha:"hi",CSS:"css",Z:"type",uo:"messageFields",va:"me"}},QVqW:(t,e,i)=>{i.d(e,{A:()=>r});var s=i("Rl7B"),n=i("LbZy");class r extends n.A{constructor(t,e,i,s,r,a,o,l,u,c,h,d,p,b,f,g,m,A,v,y,w,x,E,k,S,C,T,N){super(t,e,void 0,i,s,r,a,o,l=l||n.A.DismissType.MANUAL,u,c,h,d,p,b,f,g,m,A,v,y,w,x,E,k,S=S||n.A.CropType.FIT_CENTER,void 0,C,T,N),this.qe=n.A.TextAlignment.CENTER}Y(){return super.Y(r.it)}static Xr(t){return new r(t[n.A.tt.Vr],t[n.A.tt.Wr],t[n.A.tt.bt],t[n.A.tt.Yr],t[n.A.tt.Zr],t[n.A.tt.URI],t[n.A.tt.ea],t[n.A.tt.ra],t[n.A.tt.sa],t[n.A.tt.ta],t[n.A.tt.ot],t[n.A.tt.ia],t[n.A.tt.aa],t[n.A.tt.oa],t[n.A.tt.pa],t[n.A.tt.ma],t[n.A.tt.na],t[n.A.tt.ua],t[n.A.tt.ca],t[n.A.tt.fa],t[n.A.tt.da],t[n.A.tt.la],t[n.A.tt.ga],(0,s.x)(t[n.A.tt.ja]),t[n.A.tt.xa],t[n.A.tt.ha],t[n.A.tt.CSS],t[n.A.tt.va])}}r.it=n.A.Be.Jr},u56O:(t,e,i)=>{i.d(e,{A:()=>r});var s=i("LbZy"),n=i("zxwP");class r extends s.A{constructor(t,e,i,n,r,a,o,l,u,c,h,d,p,b,f,g,m,A,v,y,w,x){g=g||s.A.th.Dh,f=f||s.A.th.Mh,super(t,e=e||s.A.TextAlignment.START,i,n,r,a,o,l,u,c,h,d,void 0,p,b,f,g,m,A,v,void 0,void 0,void 0,void 0,void 0,void 0,void 0,y,w,x),this.qe=s.A.TextAlignment.START}$e(){return!1}Ge(){const t=document.createElement("span");return t.appendChild(document.createTextNode(this.message||"")),t}Oh(t){const e=t.getElementsByClassName("ab-in-app-message")[0];n.e0.po(e,!0,!0)||(this.slideFrom===s.A.SlideFrom.TOP?e.style.top="0px":e.style.bottom="0px"),super.Oh(t)}Y(){return super.Y(r.it)}static Xr(t){return new r(t[s.A.tt.Vr],t[s.A.tt.Wr],t[s.A.tt.Rh],t[s.A.tt.bt],t[s.A.tt.Yr],t[s.A.tt.Zr],t[s.A.tt.URI],t[s.A.tt.ea],t[s.A.tt.ra],t[s.A.tt.sa],t[s.A.tt.ta],t[s.A.tt.ot],t[s.A.tt.aa],t[s.A.tt.oa],t[s.A.tt.pa],t[s.A.tt.ma],t[s.A.tt.na],t[s.A.tt.ua],t[s.A.tt.ca],t[s.A.tt.ha],t[s.A.tt.CSS],t[s.A.tt.va])}}r.it=s.A.Be.Kr},"+P3E":(t,e,i)=>{i.d(e,{z:()=>r});var s=i("F7/r"),n=i("D1mP");function r(t){if(s.Ay.X())return"function"!=typeof t?null:n.A.m().Mi((function(e){return t(e[0]),e.slice(1)}))}},FyZC:(t,e,i)=>{i.d(e,{v:()=>L});var s=i("F7/r"),n=i("rvbG"),r=i("I0nJ"),a=i("LbZy"),o=i("u56O"),l=i("+/8Z"),u=i("QVqW"),c=i("zxwP"),h=i("L0Yc");function d(t,e){return null==t?"":(t=parseInt(t.toString()),isNaN(t)?"":(e&&!isNaN(parseFloat(e.toString()))||(e=1),"rgba("+[(16711680&(t>>>=0))>>>16,(65280&t)>>>8,255&t,((4278190080&t)>>>24)/255*e].join(",")+")"))}var p=i("ikR4"),b=i("iXlr"),f=i("fXrE"),g=i("b8BB"),m=i("groe"),A=i("azH7"),v=i("DEgD"),y=i("xoq4"),w=i("xAw5"),x=i("cqms"),E=i("FggB");const k=(t,e,i,s)=>{const n=i.getAttribute("href"),r=i.onclick;return o=>{if(null!=r&&"function"==typeof r&&!1===r.bind(i)(o))return;let l=(0,v.y)(n).abButtonId;if(null!=l&&""!==l||(l=i.getAttribute("id")||void 0),null!=n&&""!==n&&0!==n.indexOf("#")){const r="blank"===(i.getAttribute("target")||"").toLowerCase().replace("_",""),u=s||t.openTarget===a.A.OpenTarget.BLANK||r,c=()=>{(0,w.h)(t,l,n),y.uD.openUri(n,u,o)};u?c():t.Cr(e,c)}else(0,w.h)(t,l,n||void 0);return o.stopPropagation(),!1}},S=(t,e,i)=>{const s=`([\\w]+)\\s*=\\s*document.createElement\\(['"]${i}['"]\\)`,n=t.match(new RegExp(s));if(n){const i=`${n[1]}.setAttribute("nonce", "${e}")`;return`${t.slice(0,n.index+n[0].length)};${i};${t.slice(n.index+n[0].length)}`}return null},C=(t,e,n)=>{const r={closeMessage:function(){t.Cr(e)},logClick:function(){(0,w.h)(t,...arguments)},display:{},web:{}},a=function(){return function(){const t=arguments;Promise.resolve().then(i.bind(i,"8j4a")).then((e=>{s.Ay.so()?e.requestPushPermission(...Array.prototype.slice.call(t)):x.A.error(E.xE)}))}},o={requestImmediateDataFlush:function(){const t=arguments;Promise.resolve().then(i.bind(i,"1m90")).then((({requestImmediateDataFlush:e})=>{s.Ay.so()?e(...Array.prototype.slice.call(t)):x.A.error(E.xE)}))},logCustomEvent:function(){const t=arguments;Promise.resolve().then(i.bind(i,"2tha")).then((({logCustomEvent:e})=>{s.Ay.so()?e(...Array.prototype.slice.call(t)):x.A.error(E.xE)}))},logPurchase:function(){const t=arguments;Promise.resolve().then(i.bind(i,"xLK9")).then((({logPurchase:e})=>{s.Ay.so()?e(...Array.prototype.slice.call(t)):x.A.error(E.xE)}))},unregisterPush:function(){const t=arguments;Promise.resolve().then(i.bind(i,"ykN8")).then((({unregisterPush:e})=>{s.Ay.so()?e(...Array.prototype.slice.call(t)):x.A.error(E.xE)}))},requestPushPermission:a(),changeUser:function(){const t=arguments;Promise.resolve().then(i.bind(i,"PDhD")).then((({changeUser:e})=>{s.Ay.so()?e(...Array.prototype.slice.call(t)):x.A.error(E.xE)}))}},l=function(t){return function(){o[t](...Array.prototype.slice.call(arguments))}};for(const t of(0,A.HP)(o))r[t]=l(t);const u=["setFirstName","setLastName","setEmail","setGender","setDateOfBirth","setCountry","setHomeCity","setEmailNotificationSubscriptionType","setLanguage","addAlias","setPushNotificationSubscriptionType","setPhoneNumber","setCustomUserAttribute","addToCustomAttributeArray","removeFromCustomAttributeArray","incrementCustomUserAttribute","setCustomLocationAttribute","addToSubscriptionGroup","removeFromSubscriptionGroup"],c=function(t){return function(){const e=(0,m.w)();e&&e[t](...Array.prototype.slice.call(arguments))}},h={};for(let t=0;t<u.length;t++)h[u[t]]=c(u[t]);r.getUser=function(){return h};const d={showFeed:n},p=function(i){return function(){const s=arguments;t.Cr(e,(function(){d[i](...Array.prototype.slice.call(s))}))}},b=r.display;for(const t of(0,A.HP)(d))b[t]=p(t);const f={registerAppboyPushMessages:a()},g=function(t){return function(){f[t](...Array.prototype.slice.call(arguments))}},v=r.web;for(const t of(0,A.HP)(f))v[t]=g(t);return r};var T=i("SfNv"),N=i("KiAB");const _={Je:t=>{const e=t.querySelectorAll(".ab-close-button, .ab-message-text, .ab-message-button");let i;for(let t=0;t<e.length;t++)i=e[t],i.tabIndex=0;if(e.length>0){const i=e[0],s=e[e.length-1];t.addEventListener("keydown",(e=>{const n=document.activeElement;e.keyCode===N.c.lo&&(e.shiftKey||n!==s&&n!==t?!e.shiftKey||n!==i&&n!==t||(e.preventDefault(),s.focus()):(e.preventDefault(),i.focus()))}))}},Ke:(t,e)=>{e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-label","Modal Message"),t&&e.setAttribute("aria-labelledby",t)},He:(t,e,i,s)=>{if(t.buttons&&t.buttons.length>0){const n=document.createElement("div");n.className="ab-message-buttons",i.appendChild(n);const r=i.getElementsByClassName("ab-message-text")[0];null!=r&&(r.className+=" ab-with-buttons");const o=n=>r=>(t.Cr(i,(()=>{(0,T.K)(n,t),n.clickAction===a.A.ClickAction.URI?(0,b.U)(n.uri||"",s||t.openTarget===a.A.OpenTarget.BLANK,r):n.clickAction===a.A.ClickAction.NEWS_FEED&&e()})),r.stopPropagation(),!1);for(let e=0;e<t.buttons.length;e++){const i=t.buttons[e],s=document.createElement("button");s.className="ab-message-button",s.setAttribute("type","button"),(0,c.P4)(s,"touchstart");let r=i.text;""===i.text&&(r=" "),s.appendChild(document.createTextNode(r)),t.ve()||(s.style.backgroundColor=d(i.backgroundColor),s.style.color=d(i.textColor),s.style.borderColor=d(i.borderColor)),s.onclick=o(i),n.appendChild(s)}}}};var O=i("HXl4");function I(t,e,i,s,n,m,A,v=document.body,y="ltr"){if(t.ke=document.activeElement,t instanceof r.A)return function(t,e,i,s,n,r){const o=document.createElement("iframe");o.setAttribute("title","Modal Message"),n&&(o.style.zIndex=(n+1).toString());let l=null;if(null!=r){l=document.createElement("html"),l.innerHTML=t.message||"";const e=l.getElementsByTagName("style");for(let t=0;t<e.length;t++)e[t].setAttribute("nonce",r);const i=l.getElementsByTagName("script");for(let t=0;t<i.length;t++){i[t].setAttribute("nonce",r),i[t].innerHTML=i[t].innerHTML.replace(/<style>/g,`<style nonce='${r}'>`);const e=S(i[t].innerHTML,r,"script");e&&(i[t].innerHTML=e);const s=S(i[t].innerHTML,r,"style");s&&(i[t].innerHTML=s)}}if(o.srcdoc=l?l.innerHTML:t.message||"",o.onload=()=>{const n=o.contentWindow;n.focus();const l=n.document.getElementsByTagName("head")[0];if(null!=l){if(t.ve()){const e=document.createElement("style");e.innerHTML=t.css||"",e.id=t.we()||"",null!=r&&e.setAttribute("nonce",r),l.appendChild(e)}const e=n.document.createElement("base");null!=e&&(e.setAttribute("target","_parent"),l.appendChild(e))}const u=n.document.getElementsByTagName("title");u&&u.length>0&&o.setAttribute("title",u[0].textContent||"");const c=C(t,o,e);if(n.appboyBridge=c,n.brazeBridge=c,t.xe!==a.A.Be.Me){const e=n.document.getElementsByTagName("a");for(let i=0;i<e.length;i++)e[i].onclick=k(t,o,e[i],s);const i=n.document.getElementsByTagName("button");for(let e=0;e<i.length;e++)i[e].onclick=k(t,o,i[e],s)}const h=n.document.body;if(null!=h){t.Ce()&&(h.id=t.htmlId||"");const e=document.createElement("hidden");e.onclick=c.closeMessage,e.className="ab-programmatic-close-button",h.appendChild(e)}n.dispatchEvent(new CustomEvent("ab.BridgeReady")),-1!==o.className.indexOf("ab-start-hidden")&&(o.className=o.className.replace("ab-start-hidden",""),i(o))},o.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",f.A.OS===g.u.io){const e=document.createElement("div");return e.className="ab-ios-scroll-wrapper",e.appendChild(o),t.Re=e,e}return t.Re=o,o}(t,e,i,n,m,A);const w=function(t,e,i,s,n,r,o=document.body,l="ltr"){let u=null;const f=document.createElement("div");var g;f.dir=l,f.className="ab-in-app-message ab-start-hidden ab-background",r&&(f.style.zIndex=(r+1).toString()),t.$e()&&(f.className+=" ab-modal-interactions",f.setAttribute("tabindex","-1")),t.ve()||(f.style.color=d(t.textColor),f.style.backgroundColor=d(t.backgroundColor),null!=(g=t.backgroundColor)&&(g=parseInt(g.toString()),!isNaN(g)&&(4278190080&g)>>>24==0)&&(f.className+=" ab-no-shadow"));const m=()=>{-1!==f.className.indexOf("ab-start-hidden")&&(f.className=f.className.replace("ab-start-hidden",""),document.querySelectorAll(".ab-iam-img-loading").length>0?s(`Cannot show in-app message ${t.message} because another message is being shown.`,a.A.Le.ze):i(f))},A=(e=!0)=>{let i=document.querySelectorAll(".ab-iam-root");i&&0!==i.length||(i=o.querySelectorAll(".ab-iam-root")),i&&i.length>0&&(i[0].classList.remove("ab-iam-img-loading"),u&&(clearTimeout(u),u=null),e?m():x.A.error(`Cannot show in-app message ${t.message} because the image failed to load.`))};t.imageStyle===a.A.ImageStyle.GRAPHIC&&(f.className+=" graphic"),t.orientation===a.A.Orientation.LANDSCAPE&&(f.className+=" landscape"),null!=t.buttons&&0===t.buttons.length&&(t.clickAction!==a.A.ClickAction.NONE&&(f.className+=" ab-clickable"),f.onclick=i=>(t.Cr(f,(()=>{(0,p.q)(t),t.clickAction===a.A.ClickAction.URI?(0,b.U)(t.uri||"",n||t.openTarget===a.A.OpenTarget.BLANK,i):t.clickAction===a.A.ClickAction.NEWS_FEED&&e()})),i.stopPropagation(),!1));const v=(0,h.p)("Close Message",t.ve()?void 0:d(t.closeButtonColor),(()=>{t.Cr(f)}),l);f.appendChild(v),r&&(v.style.zIndex=(r+2).toString());const y=document.createElement("div");y.className="ab-message-text",y.dir=l;const w=(t.messageAlignment||t.qe).toLowerCase();y.className+=" "+w+"-aligned";let E=!1;const k=document.createElement("div");if(k.className="ab-image-area",t.imageUrl){if(t.cropType===a.A.CropType.CENTER_CROP){const e=document.createElement("span");e.className="ab-center-cropped-img",e.style.backgroundImage="url("+t.imageUrl+")",e.setAttribute("role","img"),e.setAttribute("aria-label","Modal Image"),t.Ae(e),k.appendChild(e)}else{const e=document.createElement("img");if(e.setAttribute("src",t.imageUrl),t.Ae(e),0===document.querySelectorAll(".ab-iam-img-loading").length){E=!0;const t=document.querySelectorAll(".ab-iam-root");t&&t.length>0&&t[0].classList.add("ab-iam-img-loading"),u=window.setTimeout((()=>{A(!1)}),6e4),e.onload=()=>{A()},e.onerror=()=>{A(!1)}}k.appendChild(e)}f.appendChild(k),y.className+=" ab-with-image"}else if(t.icon){k.className+=" ab-icon-area";const e=document.createElement("span");e.className="ab-icon",t.ve()||(e.style.backgroundColor=d(t.iconBackgroundColor),e.style.color=d(t.iconColor));const i=document.createElement("i");i.className="fa",i.appendChild(document.createTextNode(t.icon)),i.setAttribute("aria-hidden","true"),e.appendChild(i),k.appendChild(e),f.appendChild(k),y.className+=" ab-with-icon"}if((0,c.P4)(y,"touchstart"),t.header&&t.header.length>0){const e=document.createElement("h1");e.className="ab-message-header",t.De=O.A.W(),e.id=t.De;const i=(t.headerAlignment||a.A.TextAlignment.CENTER).toLowerCase();e.className+=" "+i+"-aligned",t.ve()||(e.style.color=d(t.headerTextColor)),e.appendChild(document.createTextNode(t.header)),y.appendChild(e)}return y.appendChild(t.Ge()),f.appendChild(y),E||m(),t.Re=f,f}(t,e,i,s,n,m,v,y);if(t instanceof l.A||t instanceof u.A){const i=t instanceof l.A?"ab-fullscreen":"ab-modal";w.className+=` ${i} ab-centered`,_.He(t,e,w,n),_.Je(w),_.Ke(t.De,w)}else if(t instanceof o.A){w.className+=" ab-slideup";const e=w.getElementsByClassName("ab-close-button")[0];if(null!=e){const i=(0,c.RJ)("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",t.ve()?void 0:d(t.closeButtonColor));i.setAttribute("class","ab-chevron"),e.appendChild(i)}let i,s;(0,c.sr)(w,c.X.U,(t=>{w.className+=" ab-swiped-left",null!=e&&null!=e.onclick&&e.onclick(t)})),(0,c.sr)(w,c.X.V,(t=>{w.className+=" ab-swiped-right",null!=e&&null!=e.onclick&&e.onclick(t)})),t.slideFrom===a.A.SlideFrom.TOP?(i=c.X.Oe,s=" ab-swiped-up"):(i=c.X.Qe,s=" ab-swiped-down"),(0,c.sr)(w,i,(t=>{w.className+=s,null!=e&&null!=e.onclick&&e.onclick(t)}))}return w}var D=i("5QSF"),z=i("IoO2"),R=i("N2JA"),P=i("uogo");function L(t,e,c){if(!s.Ay.X())return;if((0,z.B)(),null==t)return!1;if(t instanceof n.A)return x.A.info("User received control for a multivariate test, logging to Braze servers."),(0,D.z)(t),!0;if(!(t instanceof a.A))return!1;if(t.constructor===a.A)return!1;t.Nh();const h=t instanceof r.A;if(h&&!t.trusted&&!s.Ay.tr())return x.A.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these messages.'),!1;if(null==e&&(e=document.body),t.$e()&&e.querySelectorAll(".ab-modal-interactions").length>0)return x.A.info(`Cannot show in-app message ${t.message} because another message is being shown.`),!1;if(y.uD.fo()){const e=y.uD.co();if(e===y.j3.PORTRAIT&&t.orientation===a.A.Orientation.LANDSCAPE||e===y.j3.LANDSCAPE&&t.orientation===a.A.Orientation.PORTRAIT){const i=e===y.j3.PORTRAIT?"portrait":"landscape",s=t.orientation===a.A.Orientation.PORTRAIT?"portrait":"landscape";return x.A.info(`Not showing ${s} in-app message ${t.message} because the screen is currently ${i}`),!1}}if(!s.Ay.tr()){let e=!1;if(t.buttons&&t.buttons.length>0){const i=t.buttons;for(let t=0;t<i.length;t++)if(i[t].clickAction===a.A.ClickAction.URI){const s=i[t].uri;e=(0,v.P)(s)}}else t.clickAction===a.A.ClickAction.URI&&(e=(0,v.P)(t.uri));if(e)return x.A.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these actions.'),!1}const p=document.createElement("div");if(p.className="ab-iam-root v3",p.className+=function(t){let e="";return t.animateIn&&(e+=" ab-animate-in"),t.animateOut&&(e+=" ab-animate-out"),t instanceof l.A?e+=" ab-effect-fullscreen":t instanceof r.A?e+=" ab-effect-html":t instanceof u.A?e+=" ab-effect-modal":t instanceof o.A&&(e+=" ab-effect-slide"),e}(t),p.setAttribute("role","complementary"),t.Ce()&&(p.id=t.htmlId),s.Ay.nn(s.lw.jo)&&(p.style.zIndex=(s.Ay.nn(s.lw.jo)+1).toString()),e.appendChild(p),t.ve()){const e=document.createElement("style");e.innerHTML=t.css,e.id=t.we(),null!=s.Ay.nn(s.lw.bo)&&e.setAttribute("nonce",s.Ay.nn(s.lw.bo)),document.getElementsByTagName("head")[0].appendChild(e)}const b=t instanceof o.A,f=I(t,(()=>{Promise.resolve().then(i.bind(i,"RBYJ")).then((t=>{s.Ay.so()?t.showFeed():x.A.error(E.xE)}))}),(e=>{if(t.$e()&&t.do()){const i=document.createElement("div");if(i.className="ab-page-blocker",t.ve()||(i.style.backgroundColor=d(t.frameColor)),s.Ay.nn(s.lw.jo)&&(i.style.zIndex=s.Ay.nn(s.lw.jo).toString()),p.appendChild(i),!s.Ay.nn(s.lw.Lh)){const s=(new Date).valueOf();i.onclick=i=>{(new Date).valueOf()-s>a.A.fh&&(t.Cr(e),i.stopPropagation())}}p.appendChild(e),e.focus(),t.Oh(p)}else if(b){const i=document.querySelectorAll(".ab-slideup");let s=null;for(let t=i.length-1;t>=0;t--)if(i[t]!==e){s=i[t];break}if(t.slideFrom===a.A.SlideFrom.TOP){let t=0;null!=s&&(t=s.offsetTop+s.offsetHeight),e.style.top=Math.max(t,0)+"px"}else{let t=0;null!=s&&(t=(window.innerHeight||document.documentElement.clientHeight)-s.offsetTop),e.style.bottom=Math.max(t,0)+"px"}}else if(h&&!s.Ay.nn(s.lw.Lh)){const i=t;(0,R.B)(e)&&e.contentWindow&&e.contentWindow.addEventListener("keydown",(function(t){t.keyCode===N.c.mh&&i.closeMessage()}))}(0,D.z)(t),t.dismissType===a.A.DismissType.AUTO_DISMISS&&setTimeout((()=>{p.contains(e)&&t.Cr(e)}),t.duration),"function"==typeof c&&c()}),(t=>{x.A.info(t)}),s.Ay.nn(s.lw.ho),s.Ay.nn(s.lw.jo),s.Ay.nn(s.lw.bo),e,P.A.m().wo());return(h||b)&&(p.appendChild(f),t.Oh(p)),!0}},N2JA:(t,e,i)=>{i.d(e,{B:()=>s});const s=t=>null!==t&&"IFRAME"===t.tagName},oBfN:(t,e,i)=>{i.r(e),i.d(e,{default:()=>b});var s=i("F7/r"),n=i("azH7"),r=i("J/SO"),a=i("cqms");const o_Tn=function(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),s=new Uint8Array(i.length);for(let t=0;t<i.length;++t)s[t]=i.charCodeAt(t);return s};var l=i("jGgm"),u=i("TaGn"),c=i("eis7"),h=i("LltV");class d{constructor(t,e,i,s,n,r,a,o,l,u,h){this.sn=t,this.rn=e,this.on=i,this.un=n,this.an=r,this.hn=a,this.yt=o,this.cn=l,this.fn=u,this.u=h,this.sn=t,this.rn=e,this.on=i,this.ln=s+"/safari/"+e,this.un=n||"/service-worker.js",this.hn=a,this.yt=o,this.cn=l||!1,this.fn=u||!1,this.u=h,this.dn=c.A.pn(),this.bn=c.A.yn()}mn(){return this.fn}gn(t,e,i,s,n){t.unsubscribe().then((t=>{t?this.vn(e,i,s,n):(a.A.error("Failed to unsubscribe device from push."),"function"==typeof n&&n(!1))})).catch((t=>{a.A.error("Push unsubscription error: "+t),"function"==typeof n&&n(!1)}))}wn(t,e,i){var s;const n=(t=>{if("string"==typeof t)return t;if(0!==t.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return t.endpoint;let e=t.endpoint;const i=t;return i.kn&&-1===t.endpoint.indexOf(i.kn)&&(e=t.endpoint+"/"+i.kn),e})(t);let r=null,o=null;const l=t;if(null!=l.getKey)try{const t=Array.from(new Uint8Array(l.getKey("p256dh"))),e=Array.from(new Uint8Array(l.getKey("auth")));r=btoa(String.fromCharCode.apply(null,t)),o=btoa(String.fromCharCode.apply(null,e))}catch(t){a.A.error((0,h.u)(t))}const u=(t=>{let e;return t.options&&(e=t.options.applicationServerKey)&&e.byteLength&&e.byteLength>0?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))).replace(/\+/g,"-").replace(/\//g,"_"):null})(l);null===(s=this.sn)||void 0===s||s.Pn(n,e,r,o,u),n&&"function"==typeof i&&i(n,r,o)}Dn(){var t;null===(t=this.sn)||void 0===t||t.Sn(!0)}An(t,e){var i;null===(i=this.sn)||void 0===i||i.Sn(!1),a.A.info(t),"function"==typeof e&&e(!1)}jn(t,e,i,s){var n;if("default"===e.permission)try{window.safari.pushNotification.requestPermission(this.ln,t,{api_key:this.rn,device_id:(null===(n=this.on)||void 0===n?void 0:n.ce().id)||""},(e=>{"granted"===e.permission&&this.sn&&this.sn.setPushNotificationSubscriptionType(u.A.NotificationSubscriptionTypes.OPTED_IN),this.jn(t,e,i,s)}))}catch(t){this.An("Could not request permission for push: "+t,s)}else"denied"===e.permission?this.An("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",s):"granted"===e.permission&&(a.A.info("Device successfully subscribed to push."),this.wn(e.deviceToken,new Date,i))}requestPermission(t,e,i){const s=s=>{switch(s){case"granted":return void("function"==typeof t&&t());case"default":return void("function"==typeof e&&e());case"denied":return void("function"==typeof i&&i());default:a.A.error("Received unexpected permission result "+s)}};let n=!1;if("default"!==window.Notification.permission)s(Notification.permission);else{const t=window.Notification.requestPermission((t=>{n&&s(t)}));t?t.then((t=>{s(t)})):n=!0}}vn(t,e,i,s){const n={userVisibleOnly:!0};null!=e&&(n.applicationServerKey=e),t.pushManager.subscribe(n).then((t=>{a.A.info("Device successfully subscribed to push."),this.wn(t,new Date,i)})).catch((t=>{c.A.isPushBlocked()?(a.A.info("Permission for push notifications was denied."),"function"==typeof s&&s(!1)):(a.A.error("Push subscription failed: "+t),"function"==typeof s&&s(!0))}))}xn(){if(this.cn)return navigator.serviceWorker.getRegistration(this.un);const t=this.an?{scope:this.an}:void 0;return navigator.serviceWorker.register(this.un,t).then((()=>navigator.serviceWorker.ready.then((t=>(t&&"function"==typeof t.update&&t.update().catch((t=>{a.A.info("ServiceWorker update failed: "+t)})),t)))))}Nn(t){this.cn||(t.unregister(),a.A.info("Service worker successfully unregistered."))}subscribe(t,e){if(!c.A.isPushSupported())return a.A.info(d.Un),void("function"==typeof e&&e(!1));if(this.dn){if(!this.cn&&null!=window.location){let t=this.un;-1===t.indexOf(window.location.host)&&(t=window.location.host+t),-1===t.indexOf(window.location.protocol)&&(t=window.location.protocol+"//"+t)}if(c.A.isPushBlocked())return void this.An("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",e);if(this.yt&&!this.yt.Wn()&&0===this.yt.ii())return a.A.info("Waiting for VAPID key from server config before subscribing to push."),void this.yt._n((()=>{this.subscribe(t,e)}));const i=()=>{a.A.info("Permission for push notifications was denied."),"function"==typeof e&&e(!1)},s=()=>{let t="Permission for push notifications was ignored.";c.A.isPushBlocked()&&(t+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),a.A.info(t),"function"==typeof e&&e(!0)},h=c.A.isPushPermissionGranted(),d=()=>{!h&&this.sn&&this.sn.setPushNotificationSubscriptionType(u.A.NotificationSubscriptionTypes.OPTED_IN),this.xn().then((i=>{if(null==i)return a.A.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof e&&e(!0));i.pushManager.getSubscription().then((s=>{var u;let c=null;if(null!=(null===(u=this.yt)||void 0===u?void 0:u.Wn())&&(c=o_Tn(this.yt.Wn())),s){let o,u=null,h=null;if(this.u&&(o=this.u.j(l.d.C.In)),o&&!(0,n.cy)(o)){let t;try{t=r.A.qn(o).Vn}catch(e){t=null}null==t||isNaN(t.getTime())||0===t.getTime()||(u=t,h=new Date(u),h.setMonth(u.getMonth()+6))}null!=c&&s.options&&s.options.applicationServerKey&&s.options.applicationServerKey.byteLength&&s.options.applicationServerKey.byteLength>0&&!(0,n.n4)(c,new Uint8Array(s.options.applicationServerKey))?(s.options.applicationServerKey.byteLength>12?a.A.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):a.A.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.gn(s,i,c,t,e)):s.expirationTime&&new Date(s.expirationTime).valueOf()<=(new Date).valueOf()?(a.A.info("Push subscription is expired, creating new subscription."),this.gn(s,i,c,t,e)):o&&(0,n.cy)(o)?this.gn(s,i,c,t,e):null==h?(a.A.info("No push subscription creation date found, creating new subscription."),this.gn(s,i,c,t,e)):h.valueOf()<=(new Date).valueOf()?(a.A.info("Push subscription older than 6 months, creating new subscription."),this.gn(s,i,c,t,e)):(a.A.info("Device already subscribed to push, sending existing subscription to backend."),this.wn(s,u,t))}else this.vn(i,c,t,e)})).catch((t=>{a.A.error("Error checking current push subscriptions: "+t)}))})).catch((t=>{a.A.error("ServiceWorker registration failed: "+t)}))};this.requestPermission(d,s,i)}else if(this.bn){if(null==this.hn||""===this.hn)return a.A.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari"),void("function"==typeof e&&e(!0));const i=window.safari.pushNotification.permission(this.hn);this.jn(this.hn,i,t,e)}}unsubscribe(t,e){if(!c.A.isPushSupported())return a.A.info(d.Un),void("function"==typeof e&&e());this.dn?navigator.serviceWorker.getRegistration(this.un).then((i=>{i?i.pushManager.getSubscription().then((s=>{s?(this.Dn(),s.unsubscribe().then((s=>{s?(a.A.info("Device successfully unsubscribed from push."),"function"==typeof t&&t()):(a.A.error("Failed to unsubscribe device from push."),"function"==typeof e&&e()),this.Nn(i)})).catch((t=>{a.A.error("Push unsubscription error: "+t),"function"==typeof e&&e()}))):(a.A.info("Device already unsubscribed from push."),"function"==typeof t&&t())})).catch((t=>{a.A.error("Error unsubscribing from push: "+t),"function"==typeof e&&e()})):(a.A.info("Device already unsubscribed from push."),"function"==typeof t&&t())})):this.bn&&(this.Dn(),a.A.info("Device unsubscribed from push."),"function"==typeof t&&t())}}d.Un="Push notifications are not supported in this browser.";const p={t:!1,i:null,m:()=>(p.o(),p.i||(p.i=new d(s.Ay.pr(),s.Ay.ba(),s.Ay.te(),s.Ay.Hs(),s.Ay.nn(s.lw.wa),s.Ay.nn(s.lw.ya),s.Ay.nn(s.lw.Ma),s.Ay.ir(),s.Ay.nn(s.lw._a),s.Ay.nn(s.lw.ka),s.Ay.l())),p.i),o:()=>{p.t||(s.Ay.g(p),p.t=!0)},destroy:()=>{p.i=null,p.t=!1}},b=p},"8j4a":(t,e,i)=>{i.r(e),i.d(e,{requestPushPermission:()=>r});var s=i("F7/r"),n=i("oBfN");function r(t,e){if(s.Ay.X())return n.default.m().subscribe(((e,i,n)=>{const r=s.Ay.cr();r&&r.requestImmediateDataFlush(),"function"==typeof t&&t(e,i,n)}),e)}},ykN8:(t,e,i)=>{i.r(e),i.d(e,{unregisterPush:()=>r});var s=i("F7/r"),n=i("oBfN");function r(t,e){if(s.Ay.X())return n.default.m().unsubscribe(t,e)}},eis7:(t,e,i)=>{i.d(e,{A:()=>n});const s={pn:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,yn:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>s.pn()||s.yn(),isPushBlocked:()=>{const t=s.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,e=s.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return t||e},isPushPermissionGranted:()=>s.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Qi:()=>!s.isPushBlocked()&&s.isPushSupported()&&!s.isPushPermissionGranted()},n=s},TaGn:(t,e,i)=>{i.d(e,{A:()=>u});var s=i("azH7"),n=i("cqms"),r=i("wzJC"),a=i("TnFm"),o=i("FggB"),l=i("7esM");class u{constructor(t,e){this.wt=t,this.zi=e,this.wt=t,this.zi=e}getUserId(t){const e=this.wt.getUserId();if("function"!=typeof t)return e;n.A.warn("The callback for getUserId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getUser().getUserId()`)"),t(e)}addAlias(t,e){return!(0,a.rK)(t,"add alias","the alias",!1)||t.length<=0?(n.A.error("addAlias requires a non-empty alias"),!1):!(0,a.rK)(e,"add alias","the label",!1)||e.length<=0?(n.A.error("addAlias requires a non-empty label"),!1):this.zi.Cn(t,e).L}setFirstName(t){return!!(0,a.rK)(t,"set first name","the firstName",!0)&&this.wt.nu("first_name",t)}setLastName(t){return!!(0,a.rK)(t,"set last name","the lastName",!0)&&this.wt.nu("last_name",t)}setEmail(t){return null===t||(0,a.B9)(t)?this.wt.nu("email",t):(n.A.error(`Cannot set email address - "${t}" did not pass RFC-5322 validation.`),!1)}setGender(t){return"string"==typeof t&&(t=t.toLowerCase()),!(null!==t&&!(0,s.BY)(u.Genders,t,`Gender "${t}" is not a valid gender.`,"User.Genders"))&&this.wt.nu("gender",t)}setDateOfBirth(t,e,i){return null===t&&null===e&&null===i?this.wt.nu("dob",null):(t=null!=t?parseInt(t.toString()):null,e=null!=e?parseInt(e.toString()):null,i=null!=i?parseInt(i.toString()):null,null==t||null==e||null==i||isNaN(t)||isNaN(e)||isNaN(i)||e>12||e<1||i>31||i<1?(n.A.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.wt.nu("dob",`${t}-${e}-${i}`))}setCountry(t){return!!(0,a.rK)(t,"set country","the country",!0)&&this.wt.nu("country",t)}setHomeCity(t){return!!(0,a.rK)(t,"set home city","the homeCity",!0)&&this.wt.nu("home_city",t)}setLanguage(t){return!!(0,a.rK)(t,"set language","the language",!0)&&this.wt.nu("language",t)}setEmailNotificationSubscriptionType(t){return!!(0,s.BY)(u.NotificationSubscriptionTypes,t,`Email notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.wt.nu("email_subscribe",t)}setPushNotificationSubscriptionType(t){return!!(0,s.BY)(u.NotificationSubscriptionTypes,t,`Push notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.wt.nu("push_subscribe",t)}setPhoneNumber(t){return!!(0,a.rK)(t,"set phone number","the phoneNumber",!0)&&(null===t||t.match(u.En)?this.wt.nu("phone",t):(n.A.error(`Cannot set phone number - "${t}" did not pass validation.`),!1))}setLastKnownLocation(t,e,i,s,r){return null==t||null==e?(n.A.error("Cannot set last-known location - latitude and longitude are required."),!1):(t=parseFloat(t.toString()),e=parseFloat(e.toString()),null!=i&&(i=parseFloat(i.toString())),null!=s&&(s=parseFloat(s.toString())),null!=r&&(r=parseFloat(r.toString())),isNaN(t)||isNaN(e)||null!=i&&isNaN(i)||null!=s&&isNaN(s)||null!=r&&isNaN(r)?(n.A.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):t>90||t<-90||e>180||e<-180?(n.A.error("Cannot set last-known location - latitude and longitude are bounded by ±90 and ±180 respectively."),!1):null!=i&&i<0||null!=r&&r<0?(n.A.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.zi.setLastKnownLocation(this.wt.getUserId(),t,e,s,i,r).L)}setCustomUserAttribute(t,e,i){if(!(0,a.ZJ)(t))return!1;const n=e=>{const[i]=(0,a.fB)(e,o.KG,"attribute value",`set custom user attribute "${t}"`,"custom user attribute");return i};if((0,s.cy)(e)){const[i,s]=(0,a.Z2)(t,e);if(!i&&!s&&0!==e.length)return!1;if(i||0===e.length)return this.zi.Fn(r.w.$n,t,e).L;for(const t of e)if(!n(t))return!1}else if((0,s.Gv)(e)){if(!n(e))return!1;if(i)return this.zi.Fn(r.w.Bn,t,e).L}else{if(void 0===e||!(0,a.uZ)(e))return!1;if((0,s.$P)(e)&&(e=(0,l.EQ)(e)),"string"==typeof e&&!(0,a.Dz)(e,`set custom user attribute "${t}"`,"the element in the given array"))return!1}return this.wt.setCustomUserAttribute(t,e)}addToCustomAttributeArray(t,e){return!!(0,a.Dz)(t,"add to custom user attribute array","the given key")&&!(null!=e&&!(0,a.Dz)(e,"add to custom user attribute array","the given value"))&&this.zi.Fn(r.w.Ln,t,e).L}removeFromCustomAttributeArray(t,e){return!!(0,a.Dz)(t,"remove from custom user attribute array","the given key")&&!(null!=e&&!(0,a.Dz)(e,"remove from custom user attribute array","the given value"))&&this.zi.Fn(r.w.Rn,t,e).L}incrementCustomUserAttribute(t,e){if(!(0,a.Dz)(t,"increment custom user attribute","the given key"))return!1;null==e&&(e=1);const i=parseInt(e.toString());return isNaN(i)||i!==parseFloat(e.toString())?(n.A.error(`Cannot increment custom user attribute because the given incrementValue "${e}" is not an integer.`),!1):this.zi.Fn(r.w.On,t,i).L}setCustomLocationAttribute(t,e,i){return!!(0,a.Dz)(t,"set custom location attribute","the given key")&&((null!==e||null!==i)&&(e=null!=e?parseFloat(e.toString()):null,i=null!=i?parseFloat(i.toString()):null,null==e&&null!=i||null!=e&&null==i||null!=e&&(isNaN(e)||e>90||e<-90)||null!=i&&(isNaN(i)||i>180||i<-180))?(n.A.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by ±90 and ±180 respectively, or must both be null for removal."),!1):this.zi.Gn(t,e,i).L)}addToSubscriptionGroup(t){return!(0,a.rK)(t,"add user to subscription group","subscription group ID",!1)||t.length<=0?(n.A.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.zi.Hn(t,u.Kn.SUBSCRIBED).L}removeFromSubscriptionGroup(t){return!(0,a.rK)(t,"remove user from subscription group","subscription group ID",!1)||t.length<=0?(n.A.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.zi.Hn(t,u.Kn.UNSUBSCRIBED).L}Pn(t,e,i,s,n){this.wt.Pn(t,e,i,s,n),this.zi.Mn()}Sn(t){this.wt.Sn(t)}}u.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},u.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},u.En=/^[0-9 .\\(\\)\\+\\-]+$/,u.Kn={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},u.Yn="user_id",u.lu="custom",u.lr=997},"15I7":(t,e,i)=>{i.d(e,{A:()=>r});var s=i("cqms"),n=i("vfwm");class r{constructor(t,e){this.cards=t,this.lastUpdated=e,this.cards=t,this.lastUpdated=e}getUnreadCardCount(){let t=0;for(const e of this.cards)e.viewed||e instanceof n.A||t++;return t}dr(){s.A.error("Must be implemented in a subclass")}logCardImpressions(t){s.A.error("Must be implemented in a subclass")}logCardClick(t){s.A.error("Must be implemented in a subclass")}sr(){s.A.error("Must be implemented in a subclass")}}r.ur=6e4,r.Ah=500,r.Co=1e4},w7bV:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(){}Ns(t){}changeUser(t=!1){}clearData(t=!1){}}},FggB:(t,e,i)=>{i.d(e,{$k:()=>s,Fn:()=>h,KG:()=>l,PC:()=>p,RW:()=>a,aV:()=>o,et:()=>b,fX:()=>n,mO:()=>d,s1:()=>r,uy:()=>c,xE:()=>u});const s=100,n="inAppMessage must be an InAppMessage object",r="must be a Card object",a=500,o="logCustomEvent",l="setCustomUserAttribute",u="Braze must be initialized before calling methods.",c=30,h=30,d=72e5,p=3,b=1},Z43y:(t,e,i)=>{i.d(e,{A:()=>o});var s=i("cqms"),n=i("F7/r"),r=i("KuXe"),a=i("Jdpe");const o={q:(t,e,i)=>{var o,l;const u=new a.A,c=n.Ay.zr();if(!c)return s.A.info(`Not logging event with type "${t}" because the current session ID could not be found.`),u;const h=c.xo();return u.ge.push(new r.A(i||(null===(o=n.Ay.er())||void 0===o?void 0:o.getUserId()),t,(new Date).valueOf(),h,e)),u.L=(null===(l=n.Ay.l())||void 0===l?void 0:l.zo(u.ge))||!1,u}}},x6Ot:(t,e,i)=>{i.d(e,{ID:()=>A,Nc:()=>x,Ql:()=>g,UH:()=>y,Y9:()=>w,Z7:()=>E,kz:()=>k});var s=i("15I7"),n=i("zW8y"),r=i("zxwP"),a=i("vfwm"),o=i("muIz"),l=i("azH7"),u=i("KiAB"),c=i("uogo"),h=i("wzQJ"),d=i("cqms"),p=i("HXl4"),b=i("TnFm"),f=i("l6Yh");const g="data-last-requested-refresh",m={};function A(t){t&&(t.className=t.className.replace("ab-show","ab-hide"),setTimeout((()=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),s.A.Ah));const e=t.getAttribute("data-update-subscription-id");null!=e&&(0,h.a)(e);const i=t.getAttribute("data-listener-id");null!=i&&(window.removeEventListener("scroll",m[i]),delete m[i])}function v(t,e){const i=c.A.m(),s=document.createElement("div");if(s.className="ab-feed-body",s.setAttribute("aria-label","Feed"),s.setAttribute("role","feed"),null==t.lastUpdated){const t=document.createElement("div");t.className="ab-no-cards-message";const e=document.createElement("i");e.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",t.appendChild(e),s.appendChild(t)}else{let r=!1;const o=e=>t.logCardClick(e);for(const l of t.cards){const u=l instanceof a.A;!u||t.dr()?(s.appendChild((0,n.ZZ)(l,o,e,i.wo())),r=r||!u):d.A.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.")}if(!r){const t=document.createElement("div");t.className="ab-no-cards-message",t.innerHTML=i.get("NO_CARDS_MESSAGE")||"",t.setAttribute("role","article"),s.appendChild(t)}}return s}function y(t,e){if(null!=t&&null!=e){const i=[],s=e.querySelectorAll(".ab-card");t.yo||(t.yo={});for(let e=0;e<s.length;e++){const a=(0,n.O_)(s[e]),o=(0,r.Kz)(s[e]),l=(0,r.K)(s[e]);if(t.yo[a]){o||l||(0,n.GH)(s[e]);continue}let u=(0,n.sf)(s[e]),c=(0,n.M_)(s[e]);const h=u,d=c;if(!u&&o&&(u=!0,(0,n.M4)(s[e])),!c&&l&&(c=!0,(0,n.MX)(s[e])),u&&c){if(h&&d)continue;for(const e of t.cards)if(e.id===a){t.yo[e.id]=!0,i.push(e);break}}}i.length>0&&t.logCardImpressions(i)}}function w(t,e){if(null==t||null==e)return;e.setAttribute("aria-busy","true");const i=e.querySelectorAll(".ab-refresh-button")[0];null!=i&&(i.className+=" fa-spin");const n=(new Date).valueOf().toString();e.setAttribute("data-last-requested-refresh",n),setTimeout((()=>{if(e.getAttribute("data-last-requested-refresh")===n){const t=e.querySelectorAll(".fa-spin");for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/fa-spin/g,"");const i=e.querySelectorAll(".ab-initial-spinner")[0];if(null!=i){const t=document.createElement("span");t.innerHTML=c.A.m().get("FEED_TIMEOUT_MESSAGE")||"",null!=i.parentNode&&(i.parentNode.appendChild(t),i.parentNode.removeChild(i))}"true"===e.getAttribute("aria-busy")&&e.setAttribute("aria-busy","false")}}),s.A.Co),t.sr()}function x(t,e,i){const s=document.createElement("div");s.className="ab-feed ab-hide ab-effect-slide",s.setAttribute("role","dialog"),s.setAttribute("aria-label","Feed"),s.setAttribute("tabindex","-1");const n=document.createElement("div");n.className="ab-feed-buttons-wrapper",n.setAttribute("role","group"),s.appendChild(n);const r=document.createElement("i");r.className="fa fa-times ab-close-button",r.setAttribute("aria-label","Close Feed"),r.setAttribute("tabindex","0"),r.setAttribute("role","button");const a=t=>{A(s),t.stopPropagation()};r.addEventListener("keydown",(t=>{t.keyCode!==u.c.Fo&&t.keyCode!==u.c.To||a(t)})),r.onclick=a;const o=document.createElement("i");o.className="fa fa-refresh ab-refresh-button",t&&null==t.lastUpdated&&(o.className+=" fa-spin"),o.setAttribute("aria-label","Refresh Feed"),o.setAttribute("tabindex","0"),o.setAttribute("role","button");const l=e=>{w(t,s),e.stopPropagation()};o.addEventListener("keydown",(t=>{t.keyCode!==u.c.Fo&&t.keyCode!==u.c.To||l(t)})),o.onclick=l,n.appendChild(o),n.appendChild(r),s.appendChild(v(t,e));const c=()=>y(t,s);if(s.addEventListener("scroll",c),!i){window.addEventListener("scroll",c);const t=p.A.W();m[t]=c,s.setAttribute("data-listener-id",t)}return s}function E(t,e,i,s,n){if(!(0,l.cy)(e))return;const r=[];for(const t of e)if(t instanceof o.A){if(t.url&&b.nx.test(t.url)){const e=(0,f.jj)(t.url);if((0,f.qj)(e)){d.A.error((0,f.$6)(f.mY.Li,"Content Card"));continue}}r.push(t)}if(t.cards=r,t.lastUpdated=i,null!=s)if(s.setAttribute("aria-busy","false"),null==t.lastUpdated)A(s);else{const e=s.querySelectorAll(".ab-feed-body")[0];if(null!=e){const i=v(t,n);e.parentNode&&e.parentNode.replaceChild(i,e),y(t,i.parentNode)}}}function k(t,e){t&&e.setAttribute("data-update-subscription-id",t)}},Y2Vj:(t,e,i)=>{i.r(e),i.d(e,{BrazeSdkMetadata:()=>C,CaptionedImage:()=>r.A,Card:()=>s.A,ClassicCard:()=>a.A,ContentCards:()=>p.A,ControlCard:()=>o.A,ControlMessage:()=>ht.A,DeviceProperties:()=>I.A,FeatureFlag:()=>Rt.A,Feed:()=>tt.A,FullScreenMessage:()=>dt.A,HtmlMessage:()=>pt.A,ImageOnly:()=>n.A,InAppMessage:()=>ut.A,InAppMessageButton:()=>ct.A,ModalMessage:()=>bt.A,SlideUpMessage:()=>ft.A,User:()=>zt.A,WindowUtils:()=>$t.uD,addSdkMetadata:()=>N,automaticallyShowInAppMessages:()=>yt,changeUser:()=>_.changeUser,deferInAppMessage:()=>St,destroy:()=>O.z,destroyFeed:()=>st,disableSDK:()=>R,enableSDK:()=>P,getAllFeatureFlags:()=>Mt,getCachedContentCards:()=>g,getCachedFeed:()=>it,getDeferredInAppMessage:()=>Ct,getDeviceId:()=>L,getFeatureFlag:()=>Bt,getUser:()=>B.w,handleBrazeAction:()=>Q.V,hideContentCards:()=>A,initialize:()=>M.n,isDisabled:()=>F,isInitialized:()=>U,isPushBlocked:()=>Nt,isPushPermissionGranted:()=>_t,isPushSupported:()=>Ot,logCardClick:()=>l.x,logCardDismissal:()=>u.a,logCardImpressions:()=>c.j,logContentCardClick:()=>d,logContentCardImpressions:()=>h,logCustomEvent:()=>q.logCustomEvent,logFeatureFlagImpression:()=>jt,logFeedDisplayed:()=>nt.o,logInAppMessageButtonClick:()=>wt.K,logInAppMessageClick:()=>xt.q,logInAppMessageHtmlClick:()=>Et.h,logInAppMessageImpression:()=>kt.z,logPurchase:()=>j.logPurchase,openSession:()=>$.f,refreshFeatureFlags:()=>Pt.refreshFeatureFlags,removeAllSubscriptions:()=>G,removeSubscription:()=>J.a,requestContentCardsRefresh:()=>v.J,requestFeedRefresh:()=>rt.R,requestImmediateDataFlush:()=>X.requestImmediateDataFlush,requestPushPermission:()=>It.requestPushPermission,setLogger:()=>H,setSdkAuthenticationSignature:()=>Y,showContentCards:()=>k,showFeed:()=>at.showFeed,showInAppMessage:()=>At.v,subscribeToContentCardsUpdates:()=>y.O,subscribeToFeatureFlagsUpdates:()=>Ft,subscribeToFeedUpdates:()=>ot.k,subscribeToInAppMessage:()=>vt.z,subscribeToSdkAuthenticationFailures:()=>V,toggleContentCards:()=>S,toggleFeed:()=>lt,toggleLogging:()=>W,unregisterPush:()=>Dt.unregisterPush,wipeData:()=>Z.o});var s=i("muIz"),n=i("o8vE"),r=i("N+FJ"),a=i("Os1q"),o=i("vfwm"),l=i("HiHM"),u=i("okAa"),c=i("ByVl");function h(t){return(0,c.j)(t,!0)}function d(t){return(0,l.x)(t,!0)}var p=i("kkSs"),b=i("FXju"),f=i("F7/r");function g(){if(f.Ay.X())return b.A.rr().Us(!1)}var m=i("x6Ot");function A(t){if(!f.Ay.X())return;const e=document.querySelectorAll(".ab-feed");for(let i=0;i<e.length;i++)(null==t||null!=t&&e[i].parentNode===t)&&(0,m.ID)(e[i])}var v=i("oRs1"),y=i("7nY/"),w=i("zW8y"),x=i("CaYi"),E=i("cqms");function k(t,e){if(!f.Ay.X())return;(0,x.s)();let i=!1;null==t&&(t=document.body,i=!0);const s=f.Ay.nn(f.lw.tn)||f.Ay.nn(f.lw.en)||!1,n=b.A.rr().Us(!1);"function"==typeof e&&(0,m.Z7)(n,e(n.cards.slice()),n.lastUpdated,null,s);const r=(0,m.Nc)(n,s,i),a=b.A.rr(),o=a.fs();(null==n.lastUpdated||(new Date).valueOf()-n.lastUpdated.valueOf()>p.A.ur)&&(null==o||(new Date).valueOf()-o>p.A.ur)&&(E.A.info(`Cached content cards were older than max TTL of ${p.A.ur} ms, requesting an update from the server.`),(0,m.Y9)(n,r),a.ds((new Date).valueOf()));const l=(new Date).valueOf(),u=(0,y.O)((function(t){const i=r.querySelectorAll(".ab-refresh-button")[0];if(null!=i){let t=500,e=t-=(new Date).valueOf()-l;const s=r.getAttribute(m.Ql);s&&(e=parseInt(s),isNaN(e)||(t-=(new Date).valueOf()-e)),setTimeout((function(){i.className=i.className.replace(/fa-spin/g,"")}),Math.max(t,0))}let a=t.cards;"function"==typeof e&&(a=e(a.slice())),(0,m.Z7)(n,a,t.lastUpdated,r,s)}));(0,m.kz)(u,r);const c=function(t){const e=t.querySelectorAll(".ab-feed");let s=null;for(let i=0;i<e.length;i++)e[i].parentNode===t&&(s=e[i]);null!=s?((0,m.ID)(s),null!=s.parentNode&&s.parentNode.replaceChild(r,s)):t.appendChild(r),setTimeout((function(){r.className=r.className.replace("ab-hide","ab-show")}),0),i&&r.focus(),(0,m.UH)(n,r),(0,w.cM)(n.cards,t)};var h;null!=t?c(t):window.onload=(h=window.onload,function(){"function"==typeof h&&h(new Event("oldLoad")),c(document.body)})}function S(t,e){f.Ay.X()&&(document.querySelectorAll(".ab-feed").length>0?A():k(t,e))}const C={GOOGLE_TAG_MANAGER:"gg",MPARTICLE:"mp",SEGMENT:"sg",TEALIUM:"tl",MANUAL:"manu",NPM:"npm",CDN:"wcd",SHOPIFY:"shp"};var T=i("azH7");function N(t){if(!f.Ay.X())return;const e=f.Ay.nr();if(e){if(!(0,T.cy)(t))return E.A.error("Cannot set SDK metadata because metadata is not an array."),!1;for(const e of t)if(!(0,T.BY)(C,e,"sdkMetadata contained an invalid value.","BrazeSdkMetadata"))return!1;return e.addSdkMetadata(t),!0}}var _=i("PDhD"),O=i("ndKy"),I=i("Ibo5"),D=i("vRYs"),z=i("jGgm");function R(){const t=f.Ay.cr();t&&t.requestImmediateDataFlush();const e=new z.A.ee(null,!0),i="This-cookie-will-expire-in-"+e.ne();e.store(z.d.se,i);const s=D.A.Yt.Qt;new D.A(s,E.A).setItem(s.ss.ae,s.ie,!0),E.A.info("disableSDK was called"),f.Ay.destroy(!1),f.Ay.oe(!0)}function P(){new z.A.ee(null,!0).remove(z.d.se);const t=D.A.Yt.Qt;new D.A(t,E.A).re(t.ss.ae,t.ie),E.A.info("enableSDK was called"),f.Ay.destroy(!1),f.Ay.oe(!1)}function L(t){if(!f.Ay.X())return;const e=f.Ay.te();if(!e)return;const i=e.ce().id;if("function"!=typeof t)return i;E.A.warn("The callback for getDeviceId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getDeviceId()`)"),t(i)}var B=i("groe"),M=i("osUK");function F(){return!!new z.A.ee(null,!0).br(z.d.se)}function U(){return f.Ay.so()}var q=i("2tha"),j=i("xLK9"),$=i("vrNg");function G(){f.Ay.X()&&f.Ay.removeAllSubscriptions()}var J=i("wzQJ"),X=i("1m90");function H(t){E.A.setLogger(t)}var K=i("TnFm");function Y(t){if(!f.Ay.X())return!1;if(""===t||!(0,K.rK)(t,"set signature","signature",!1))return!1;const e=f.Ay.Sr();return!!e&&(e.setSdkAuthenticationSignature(t),!0)}function V(t){var e;if(f.Ay.X())return null===(e=f.Ay.Sr())||void 0===e?void 0:e.subscribeToSdkAuthenticationFailures(t)}function W(){E.A.toggleLogging()}var Z=i("Au1S"),Q=i("iXlr"),tt=i("IID/"),et=i("5fch");function it(){if(f.Ay.X())return et.A.rr().Bi()}function st(){if(!f.Ay.X())return;const t=document.querySelectorAll(".ab-feed");for(let e=0;e<t.length;e++)(0,m.ID)(t[e])}var nt=i("VB97"),rt=i("E8S9"),at=i("RBYJ"),ot=i("IfEg");function lt(t,e,i){f.Ay.X()&&(document.querySelectorAll(".ab-feed").length>0?st():(0,at.showFeed)(t,e,i))}var ut=i("LbZy"),ct=i("yBih"),ht=i("rvbG"),dt=i("+/8Z"),pt=i("I0nJ"),bt=i("QVqW"),ft=i("u56O"),gt=i("D1mP"),mt=i("IoO2"),At=i("FyZC"),vt=i("+P3E");function yt(){if(!f.Ay.X())return;(0,mt.B)();const t=gt.A.m();if(null==t._i()){const e=(0,vt.z)((t=>(0,At.v)(t)));t.Pi(e)}return t._i()}var wt=i("SfNv"),xt=i("ikR4"),Et=i("xAw5"),kt=i("5QSF");function St(t){if(f.Ay.X())return t instanceof ht.A?(E.A.info("Not deferring since this is a ControlMessage."),!1):t instanceof ut.A?gt.A.m().je(t):(E.A.info("Not an instance of InAppMessage, ignoring."),!1)}function Ct(){if(f.Ay.X())return gt.A.m().Se()}var Tt=i("eis7");function Nt(){if(f.Ay.X())return Tt.A.isPushBlocked()}function _t(){if(f.Ay.X())return Tt.A.isPushPermissionGranted()}function Ot(){if(f.Ay.X())return Tt.A.isPushSupported()}var It=i("8j4a"),Dt=i("ykN8"),zt=i("TaGn"),Rt=i("FOzX"),Pt=i("64cp"),Lt=i("gxpy");function Bt(t){if(!f.Ay.X())return;const e=f.Ay.ir();if(e&&!e.ci())return E.A.info("Feature flags are not enabled."),null;const i=Lt.A.rr().mi();return i[t]?i[t]:null}function Mt(){if(!f.Ay.X())return;const t=[],e=f.Ay.ir();if(e&&!e.ci())return E.A.info("Feature flags are not enabled."),t;const i=Lt.A.rr().mi();for(const e in i)t.push(i[e]);return t}function Ft(t){if(!f.Ay.X())return;const e=Lt.A.rr();if(e.qi()){const e=Mt();e&&"function"==typeof t&&t(e)}return e.Zs(t)}var Ut=i("wzJC"),qt=i("Z43y");function jt(t){if(!f.Ay.X())return;if(!t)return!1;const e="Not logging a feature flag impression. The feature flag was not part of any matching experiment.",i=Lt.A.rr().mi();if(!i[t])return E.A.info(e),!1;const s=i[t].trackingString;if(!s)return E.A.info(e),!1;const n=Lt.A.rr().Fi();if(n[s])return E.A.info("Not logging another feature flag impression. This ID was already logged this session."),!1;n[s]=!0,Lt.A.rr().pi(n);const r={fid:t,fts:s};return qt.A.q(Ut.w.Fr,r).L}var $t=i("xoq4")},uogo:(t,e,i)=>{i.d(e,{A:()=>u});var s=i("F7/r"),n=i("fXrE"),r=i("cqms");const a={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"ليس لدينا أي تحديث. يرجى التحقق مرة أخرى لاحقاً",FEED_TIMEOUT_MESSAGE:"يرجى تكرار المحاولة لاحقا"},cs:{NO_CARDS_MESSAGE:"V tuto chvíli pro vás nemáme žádné aktualizace.<br/>Zkontrolujte prosím znovu později.",FEED_TIMEOUT_MESSAGE:"Prosím zkuste to znovu později."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Prøv venligst senere.",FEED_TIMEOUT_MESSAGE:"Prøv venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verfügbar.<br/>Bitte später noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte später noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor compruébelo más tarde.",FEED_TIMEOUT_MESSAGE:"Por favor inténtelo más tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualización.<br/>Vuelva a verificar más tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo más tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"Päivityksiä ei ole saatavilla.<br/>Tarkista myöhemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yritä myöhemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise à jour disponible.<br/>Veuillez vérifier ultérieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez réessayer ultérieurement."},he:{NO_CARDS_MESSAGE:".אין לנו עדכונים. בבקשה בדוק שוב בקרוב",FEED_TIMEOUT_MESSAGE:".בבקשה נסה שוב בקרוב"},hi:{NO_CARDS_MESSAGE:"हमारे पास कोई अपडेट नहीं हैं। कृपया बाद में फिर से जाँच करें.।",FEED_TIMEOUT_MESSAGE:"कृपया बाद में दोबारा प्रयास करें।."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare più tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare più tardi."},ja:{NO_CARDS_MESSAGE:"アップデートはありません。<br/>後でもう一度確認してください。",FEED_TIMEOUT_MESSAGE:"後でもう一度試してください。"},ko:{NO_CARDS_MESSAGE:"업데이트가 없습니다. 다음에 다시 확인해 주십시오.",FEED_TIMEOUT_MESSAGE:"나중에 다시 시도해 주십시오."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst prøv igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Proszę sprawdzić ponownie później.",FEED_TIMEOUT_MESSAGE:"Proszę spróbować ponownie później."},pt:{NO_CARDS_MESSAGE:"Não temos atualizações.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"Não temos nenhuma atualização.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:"Обновления недоступны.<br/>Пожалуйста, проверьте снова позже.",FEED_TIMEOUT_MESSAGE:"Пожалуйста, повторите попытку позже."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>Försök igen senare.",FEED_TIMEOUT_MESSAGE:"Försök igen senare."},th:{NO_CARDS_MESSAGE:"เราไม่มีการอัพเดต กรุณาตรวจสอบภายหลัง.",FEED_TIMEOUT_MESSAGE:"กรุณาลองใหม่ภายหลัง."},uk:{NO_CARDS_MESSAGE:"Оновлення недоступні.<br/>ласка, перевірте знову пізніше.",FEED_TIMEOUT_MESSAGE:"Будь ласка, спробуйте ще раз пізніше."},vi:{NO_CARDS_MESSAGE:"Chúng tôi không có cập nhật nào.<br/>Vui lòng kiểm tra lại sau.",FEED_TIMEOUT_MESSAGE:"Vui lòng thử lại sau."},"zh-hk":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},"zh-hans":{NO_CARDS_MESSAGE:"暂时没有更新.<br/>请稍后再试.",FEED_TIMEOUT_MESSAGE:"请稍候再试."},"zh-hant":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},"zh-tw":{NO_CARDS_MESSAGE:"暫時沒有更新.<br/>請稍候再試.",FEED_TIMEOUT_MESSAGE:"請稍候再試."},zh:{NO_CARDS_MESSAGE:"暂时没有更新.<br/>请稍后再试.",FEED_TIMEOUT_MESSAGE:"请稍候再试."}};class o{constructor(t,e=!1){if(this.language=t,null!=t&&(t=t.toLowerCase()),null!=t&&null==a[t]){const e=t.indexOf("-");e>0&&(t=t.substring(0,e))}if(null==a[t]){const i="Braze does not yet have a localization for language "+t+", defaulting to English. Please contact us if you are willing and able to help us translate our SDK into this language.";e?r.A.error(i):r.A.info(i),t="en"}this.language=t}get(t){return a[this.language][t]}wo(){switch(this.language){case"ar":case"he":case"fa":return"rtl";default:return"ltr"}}}const l={t:!1,i:null,m:()=>{if(l.o(),!l.i){let t=n.A.language,e=!1;s.Ay.nn(s.lw.zn)&&(t=s.Ay.nn(s.lw.zn),e=!0),l.i=new o(t,e)}return l.i},o:()=>{l.t||(s.Ay.g(l),l.t=!0)},destroy:()=>{l.i=null,l.t=!1}},u=l},"F7/r":(t,e,i)=>{i.d(e,{lw:()=>G,Ay:()=>J});var s=i("jGgm"),n=i("TdiU"),r=i("vRYs"),a=i("cqms");class o{constructor(t,e,i){this.u=t,this.Jn=e,this.Qn=i,this.u=t,this.Jn=e||!1,this.Qn=i,this.Xn=new n.A,this.Zn=0,this.gh=1}Fh(){return this.Jn}kh(){return this.u.j(s.d.C.wh)}setSdkAuthenticationSignature(t){const e=this.kh();this.u.k(s.d.C.wh,t);const i=r.A.Yt.Qt;new r.A(i,a.A).setItem(i.ss.jh,this.gh,t),e!==t&&this.Os()}xh(){this.u.ti(s.d.C.wh);const t=r.A.Yt.Qt;new r.A(t,a.A).re(t.ss.jh,this.gh)}subscribeToSdkAuthenticationFailures(t){return this.Qn.It(t)}qh(t){this.Qn.Dt(t)}yh(){this.Xn.removeAllSubscriptions()}Bh(){this.Zn+=1}Gh(){return this.Zn}Os(){this.Zn=0}}var l=i("w7bV"),u=i("fXrE");class c{constructor(t){this.id=t,this.id=t}Zi(){const t={};return null!=this.browser&&(t.browser=this.browser),null!=this.Ta&&(t.browser_version=this.Ta),null!=this.os&&(t.os_version=this.os),null!=this.resolution&&(t.resolution=this.resolution),null!=this.language&&(t.locale=this.language),null!=this.timeZone&&(t.time_zone=this.timeZone),null!=this.userAgent&&(t.user_agent=this.userAgent),t}}var h=i("Ibo5"),d=i("dQ1G"),p=i("HXl4"),b=i("azH7"),f=i("LltV");class g{constructor(t,e){this.u=t,this.Ia=e,this.u=t,null==e&&(e=(0,b.zu)(h.A)),this.Ia=e}ce(t=!0){let e=this.u.tu(s.d.iu.Uo);null==e&&(e=new d.A(p.A.W()),t&&this.u.uu(s.d.iu.Uo,e));const i=new c(e.eu);for(let t=0;t<this.Ia.length;t++)switch(this.Ia[t]){case h.A.BROWSER:i.browser=u.A.browser;break;case h.A.BROWSER_VERSION:i.Ta=u.A.version;break;case h.A.OS:i.os=this.Da();break;case h.A.RESOLUTION:i.Sa=screen.width+"x"+screen.height;break;case h.A.LANGUAGE:i.language=u.A.language;break;case h.A.TIME_ZONE:i.timeZone=this.Oa(new Date);break;case h.A.USER_AGENT:i.userAgent=u.A.userAgent}return i}Da(){if(u.A.Ca())return u.A.Ca();const t=this.u.j(s.d.C.Fa);return t&&t.os_version?t.os_version:u.A.Da()}Oa(t){let e=!1;if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){const t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=t&&""!==t)return t}}catch(t){a.A.info("Intl.DateTimeFormat threw an error, cannot detect user's time zone:"+(0,f.u)(t)),e=!0}if(e)return"";const i=t.getTimezoneOffset();return this.Ga(i)}Ga(t){const e=Math.trunc(t/60),i=Math.trunc(t%60);let s="GMT";return 0!==t&&(s+=t<0?"+":"-",s+=("00"+Math.abs(e)).slice(-2)+":"+("00"+Math.abs(i)).slice(-2)),s}}var m=i("QOIJ"),A=i("KuXe"),v=i("7esM"),y=i("Z43y"),w=i("wzJC"),x=i("J++8"),E=i("FggB"),k=i("4j5/");class S{constructor(t,e,i,s,n,r,a,o,l,u,c,h){this.on=t,this.u=e,this.Ko=i,this.wt=s,this.ri=n,this.yt=r,this.rn=a,this.Go=o,this.Bo=l,this.Vo=u,this.appVersion=c,this.Xh=h,this.Hh=t=>null==t?"":`${t} `,this.on=t,this.u=e,this.Ko=i,this.wt=s,this.ri=n,this.yt=r,this.rn=a,this.Go=o,this.Bo=l,this.Vo=u,this.appVersion=c,this.Xh=h,this.Yh=["npm"]}Js(t,e=!1,i=!1){const n=this.on.ce(!i),r=n.Zi(),a=this.u.j(s.d.C.Fa);(0,b.n4)(a,r)||(t.device=r),t.api_key=this.rn,t.time=(0,v.UK)((new Date).valueOf(),!0);const o=this.u.j(s.d.C.Jh)||[],l=this.u.j(s.d.C.Qh)||"";if(this.Yh.length>0&&(!(0,b.n4)(o,this.Yh)||l!==this.ri.Si())&&(t.sdk_metadata=this.Yh),t.sdk_version=this.Bo,this.Vo&&(t.sdk_flavor=this.Vo),t.app_version=this.appVersion,t.app_version_code=this.Xh,t.device_id=n.id,e){const e=this.wt.getUserId();null!=e&&(t.user_id=e)}if(!t.user_id&&!this.Ko.Fh()){const e=(0,k.b)(this.u);e&&(t.alias=e)}return t}Ks(t,e,i){const s=e.auth_error,n=e.error;if(!s&&!n)return!0;if(s){let e;this.Ko.Bh();const n={errorCode:s.error_code};for(const t of i)(0,b.cy)(t)&&"X-Braze-Auth-Signature"===t[0]&&(n.signature=t[1]);t.respond_with&&t.respond_with.user_id?n.userId=t.respond_with.user_id:t.user_id&&(n.userId=t.user_id);const r=s.reason;return r?(n.reason=r,e=`due to ${r}`):e=`with error code ${s.error_code}.`,this.Ko.Fh()||(e+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),a.A.error(`SDK Authentication failed ${e}`),this.Zh(t.events||[],t.attributes||[]),this.Ko.qh(n),!1}if(n){let i,s=n;switch(s){case m.A.Ra:return i="Received successful response with empty body.",y.A.q(w.w.qs,{e:i}),a.A.info(i),!1;case m.A.qa:return i="Received successful response with invalid JSON",y.A.q(w.w.qs,{e:i+": "+e.response}),a.A.info(i),!1;case m.A.Aa:s=`The API key "${t.api_key}" is invalid for the baseUrl ${this.Go}`;break;case m.A.Ba:s="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case m.A.Na:s="No device identifier. Please contact support@braze.com"}a.A.error("Backend error: "+s)}return!1}Xa(t,e,i,s){return!!(t&&0!==t.length||e&&0!==e.length||i||s)}$a(t,e,i,s,n=!1){const r=[],a=t=>t||"",o=a(this.wt.getUserId());let l=this.Yi(t,e);const u=[],c=[];let h,d=null;if(i.length>0){const t=[];for(const e of i){if(h=e.Zi(),this.Ko.Fh()){if(o&&!h.user_id){d||(d={}),d.events||(d.events=[]),d.events.push(h);continue}if(a(h.user_id)!==o){c.push(h);continue}}t.push(h)}t.length>0&&(l.events=t)}if(s.length>0){const t=[];for(const e of s)e&&(this.Ko.Fh()&&a(e.user_id)!==o?u.push(e):t.push(e));t.length>0&&(l.attributes=t)}if(this.Zh(c,u),l=this.Js(l,!0,n),d){d=this.Js(d,!1,n);const t={requestData:d,headers:this.$s(d,x.A.Ps.La)};r.push(t)}if(l&&!this.Xa(l.events,l.attributes,t,e))return d?r:null;const p={requestData:l,headers:this.$s(l,x.A.Ps.La)};return r.push(p),r}Zh(t,e){if(t){const e=[];for(const i of t){const t=A.A.fromJson(i);t.time=(0,v.YX)(t.time),e.push(t)}this.u.zo(e)}if(e)for(const t of e)this.u.Ea(t)}Vs(t,e){let i="HTTP error ";null!=t&&(i+=t+" "),i+=e,a.A.error(i)}qr(t){return y.A.q(w.w.Ka,{n:t})}Yi(t,e,i){const s={};t&&(s.feed=!0),e&&(s.triggers=!0);const n=null!=i?i:this.wt.getUserId();if(n&&(s.user_id=n),!s.user_id&&!this.Ko.Fh()){const t=(0,k.b)(this.u);t&&(s.alias=t)}return s.config={config_time:this.yt.ii()},{respond_with:s}}Pa(t){const e=(new Date).valueOf();let i=E.mO.toString();const s=x.A.Ua(this.u,t);return-1!==s&&(i=(e-s).toString()),i}$s(t,e,i=!1){const n=[["X-Braze-Api-Key",this.rn]],r=this.Pa(e);n.push(["X-Braze-Last-Req-Ms-Ago",r]);const a=x.A.Ha(this.u,e).toString();n.push(["X-Braze-Req-Attempt",a]);let o=!1;if(null!=t.respond_with&&t.respond_with.triggers&&(n.push(["X-Braze-TriggersRequest","true"]),o=!0),null!=t.respond_with&&t.respond_with.feed&&(n.push(["X-Braze-FeedRequest","true"]),o=!0),e===x.A.Ps.Bs){n.push(["X-Braze-ContentCardsRequest","true"]);let t=this.u.j(s.d.C.As);t&&i||(t=0,this.u.k(s.d.C.As,t)),n.push(["BRAZE-SYNC-RETRY-COUNT",t.toString()]),o=!0}if(e===x.A.Ps.bi&&(n.push(["X-Braze-FeatureFlagsRequest","true"]),o=!0),o&&n.push(["X-Braze-DataRequest","true"]),this.Ko.Fh()){const t=this.Ko.kh();null!=t&&n.push(["X-Braze-Auth-Signature",t])}return n}Wa(t,e,i,s){window.setTimeout((()=>{a.A.info(`Retrying rate limited ${this.Hh(s)}SDK request.`),this.Xs(e,i,s)}),t)}Xs(t,e,i,n){if(!this.Ya(i))return a.A.info(`${this.Hh(i)}SDK request being rate limited.`),void("function"==typeof n&&n());const r=this.Ja();if(!r.Qa)return a.A.info(`${this.Hh(i)}SDK request being rate limited. Request will be retried in ${Math.trunc(r.Va/1e3)} seconds.`),void this.Wa(r.Va,t,e,i);this.u.k(s.d.C.Za,(new Date).valueOf());const o=t.device;o&&o.os_version instanceof Promise?o.os_version.then((i=>{t.device.os_version=i,e(r.au)})):e(r.au)}du(t){var e;null===(e=this.u)||void 0===e||e.k(s.d.C.fu,t)}vu(t,e){let i=this.Ru();null==i&&(i={}),i[t]=e,this.u.k(s.d.C.gu,i)}pu(){var t;return null===(t=this.u)||void 0===t?void 0:t.j(s.d.C.fu)}Ru(){var t;return null===(t=this.u)||void 0===t?void 0:t.j(s.d.C.gu)}bu(t,e,i,s,n=""){let r;if(n){const t=this.Ru();r=null==t||isNaN(t[n])?e:t[n]}else r=this.pu(),(null==r||isNaN(r))&&(r=e);const a=(t-s)/1e3;return r=Math.min(r+a/i,e),r}qu(t,e){return Math.max(0,(1-t)*e*1e3)}Au(t,e=""){var i,n,r,a,o;const l={Qa:!0,au:-1,Va:0};if(null==t&&(t=!0),!t&&!e)return l;let u,c,h=null;if(t)h=null===(i=this.u)||void 0===i?void 0:i.j(s.d.C.Za);else{const t=x.A.Du(this.u);if(null==t||null==t[e])return l;h=t[e]}if(null==h||isNaN(h))return l;if(t?(u=(null===(n=this.yt)||void 0===n?void 0:n.Tu())||-1,c=(null===(r=this.yt)||void 0===r?void 0:r.ku())||-1):(u=(null===(a=this.yt)||void 0===a?void 0:a.Cu(e))||-1,c=(null===(o=this.yt)||void 0===o?void 0:o.Su(e))||-1),-1===u||-1===c)return l;const d=(new Date).valueOf();let p=this.bu(d,u,c,h,e);return p<1?(l.Qa=!1,l.Va=this.qu(p,c),l):(p=Math.trunc(p)-1,l.au=p,t?this.du(p):this.vu(e,p),l)}Ja(){return this.Au(!0)}Ya(t){const e=this.Au(!1,t);return!(e&&!e.Qa)}Os(){this.Ko.Os()}Hs(){return this.Go}addSdkMetadata(t){for(const e of t)-1===this.Yh.indexOf(e)&&this.Yh.push(e)}}var C=i("CgXj"),T=i("L0v4"),N=i("Jdpe"),_=i("eis7");class O{constructor(t,e,i,s,r,a,o,l,u,c){this.rn=t,this.baseUrl=e,this.ri=i,this.on=s,this.wt=r,this.yt=a,this.u=o,this.wu=l,this.Ko=u,this.qt=c,this.rn=t,this.baseUrl=e,this.yu=0,this.fE=o.dE()||0,this.ju=null,this.ri=i,this.on=s,this.wt=r,this.yt=a,this.u=o,this.Ko=u,this.qt=c,this.wu=l,this.$u=new n.A,this.Fu=null,this.Lu=50,this.Mu=!1}Pu(t,e){return!t&&!e&&this.Ko.Gh()>=this.Lu}xu(t){let e=this.ri.Gl();if(t.length>0){const i=this.wt.getUserId();for(const s of t){const t=!s.userId&&!i||s.userId===i;s.type===w.w.ql&&t&&(e=!0)}}return e}Iu(t=!1,e=!1,i=!0,n,r,o,l=!1,u=!1){i&&this.Nu();const c=this.u.AE(),h=this.u.OE();let d=!1;const p=(t,e,a=-1)=>{let l=!1;const u=(new Date).valueOf();x.A._s(this.u,x.A.Ps.La,u),-1!==a&&e.push(["X-Braze-Req-Tokens-Remaining",a.toString()]),C.A.Gs({url:this.baseUrl+"/data/",data:t,headers:e,L:i=>{null!=t.respond_with&&t.respond_with.triggers&&(this.yu=Math.max(this.yu-1,0)),this.qt.Ks(t,i,e)?(this.Ko.Os(),this.yt.al(i),null!=t.respond_with&&t.respond_with.user_id!=this.wt.getUserId()||(null!=t.device&&this.u.k(s.d.C.Fa,t.device),null!=t.sdk_metadata&&(this.u.k(s.d.C.Jh,t.sdk_metadata),this.u.k(s.d.C.Qh,this.ri.Si())),this.wu(i),x.A.Qs(this.u,x.A.Ps.La,1),"function"==typeof n&&n())):i.auth_error&&(l=!0)},error:()=>{null!=t.respond_with&&t.respond_with.triggers&&(this.yu=Math.max(this.yu-1,0)),this.qt.Zh(t.events,t.attributes),"function"==typeof r&&r()},Ws:t=>{if("function"==typeof o&&o(t),i&&!d){if(t&&!l)this.Ou();else{x.A.Ys(this.u,x.A.Ps.La);let t=this.ju;(null==t||t<1e3*this.fE)&&(t=1e3*this.fE),this.Ou(Math.min(3e5,(0,T.C)(1e3*this.fE,3*t)))}d=!0}}})},b=this.xu(c),f=e||b;if(this.Pu(l,b))return void a.A.info("Declining to flush data due to 50 consecutive authentication failures");if(i&&!this.qt.Xa(c,h,t,f))return this.Ou(),void("function"==typeof o&&o(!0));const g=this.qt.$a(t,f,c,h,u);f&&this.yu++;let m=!1;if(g)for(const t of g)this.qt.Xs(t.requestData,(e=>p(t.requestData,t.headers,e)),x.A.Ps.La,r),m=!0;this.Ko.Fh()&&i&&!m?this.Ou():b&&(a.A.info("Invoking new session subscriptions"),this.$u.Dt())}zu(){return this.yu>0}Ou(t=1e3*this.fE){this.Mu||(this.Nu(),this.Fu=window.setTimeout((()=>{if(document.hidden){const t="visibilitychange",e=()=>{document.hidden||(document.removeEventListener(t,e,!1),this.Iu())};document.addEventListener(t,e,!1)}else this.Iu()}),t),this.ju=t)}Nu(){null!=this.Fu&&(clearTimeout(this.Fu),this.Fu=null)}initialize(){this.Mu=!1,this.Ou()}destroy(){this.$u.removeAllSubscriptions(),this.Ko.yh(),this.Nu(),this.Mu=!0,this.Iu(void 0,void 0,!1,void 0,void 0,void 0,void 0,!0),this.Fu=null}mr(t){return this.$u.It(t)}openSession(){const t=this.ri.Si()!==this.ri.xo();t&&(this.u.cE(s.d.iu.Uo),this.u.cE(s.d.iu.su)),this.Iu(void 0,!1,void 0,(()=>{this.u.ti(s.d.C.vi)})),this.Mn(),t&&Promise.resolve().then(i.bind(i,"oBfN")).then((t=>{if(this.Mu)return;const e=t.default.m();if(null!=e&&(_.A.isPushPermissionGranted()||_.A.isPushBlocked())){const t=()=>{e.mn()?a.A.info("Push token maintenance is disabled, not refreshing token for backend."):e.subscribe()},i=(e,i)=>{i&&t()},n=()=>{const e=this.u.j(s.d.C.In);(null==e||e)&&t()},o=r.A.Yt.Qt;new r.A(o,a.A).jr(o.ss.cu,i,n)}}))}Uu(){this.u.ti(s.d.C.gi),this.u.ti(s.d.C.ws),this.u.ti(s.d.C.Nr)}changeUser(t,e,i){const n=this.wt.getUserId();if(n!==t){this.ri.yl(),this.Uu(),null!=n&&this.Iu(void 0,!1,void 0,void 0,void 0),this.wt.ou(t),i?this.Ko.setSdkAuthenticationSignature(i):this.Ko.xh();for(let t=0;t<e.length;t++)e[t].changeUser(null==n);null!=n&&this.u.ti(s.d.C.J),this.u.ti(s.d.C.Fa),this.u.ti(s.d.C.nE),this.u.ti(s.d.C._E),this.openSession(),a.A.info('Changed user to "'+t+'".')}else{let e="Doing nothing.";i&&this.Ko.kh()!==i&&(this.Ko.setSdkAuthenticationSignature(i),e="Updated SDK authentication signature"),a.A.info(`Current user is already ${t}. ${e}`)}}requestImmediateDataFlush(t){this.Nu(),this.ri.xo(),this.Iu(void 0,void 0,void 0,void 0,(()=>{a.A.error("Failed to flush data, request will be retried automatically.")}),t,!0)}requestFeedRefresh(){this.ri.xo(),this.Iu(!0)}$r(t,e){this.ri.xo(),a.A.info("Requesting explicit trigger refresh."),this.Iu(void 0,!0,void 0,t,e)}Cn(t,e){const i=w.w._u,n={a:t,l:e},r=y.A.q(i,n);return r&&(a.A.info(`Logged alias ${t} with label ${e}`),this.u.k(s.d.C._E,n)),r}Fn(t,e,i){if(this.yt.hu(e))return a.A.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new N.A;const s={key:e,value:i},n=y.A.q(t,s);if(n){const t="object"==typeof i?JSON.stringify(i,null,2):i;a.A.info(`Logged custom attribute: ${e} with value: ${t}`)}return n}setLastKnownLocation(t,e,i,s,n,r){const o={latitude:e,longitude:i};null!=s&&(o.altitude=s),null!=n&&(o.ll_accuracy=n),null!=r&&(o.alt_accuracy=r);const l=y.A.q(w.w.Bu,o,t||void 0);return l&&a.A.info(`Set user last known location as ${JSON.stringify(o,null,2)}`),l}kr(t,e){const i=this.ri.xo();return new A.A(this.wt.getUserId(),w.w.Eu,t,i,{cid:e})}Ju(t,e){return new r.A(t,e)}Mn(){const t=r.A.Yt.Qt;this.Ju(t,a.A).setItem(t.ss.La,1,{baseUrl:this.baseUrl,data:{api_key:this.rn,device_id:this.on.ce().id},userId:this.wt.getUserId(),sdkAuthEnabled:this.Ko.Fh()})}yr(t){for(const e of t)if(e.api_key===this.rn)this.qt.Zh(e.events,e.attributes);else{const t=r.A.Yt.Qt;new r.A(t,a.A).setItem(t.ss.wr,p.A.W(),e)}}Gn(t,e,i){if(this.yt.hu(t))return a.A.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new N.A;let s,n;return null===e&&null===i?(s=w.w.Ku,n={key:t}):(s=w.w.Wu,n={key:t,latitude:e,longitude:i}),y.A.q(s,n)}Hn(t,e){const i={group_id:t,status:e};return y.A.q(w.w.Gu,i)}}class I{constructor(t=0,e=[],i=[],s=[],n=null,r=null,a={enabled:!1},o={enabled:!1,refresh_rate_limit:void 0},l={enabled:!0,capacity:E.uy,refill_rate:E.Fn,endpoint_overrides:{}}){this.hl=t,this.gl=e,this.fl=i,this.bl=s,this.Rl=n,this.cl=r,this.ml=a,this.hi=o,this.ol=l,this.hl=t,this.gl=e,this.fl=i,this.bl=s,this.Rl=n,this.cl=r,this.ml=a,this.hi=o,this.ol=l}Y(){return{s:"5.4.0",l:this.hl,e:this.gl,a:this.fl,p:this.bl,m:this.Rl,v:this.cl,c:this.ml,f:this.hi,grl:this.ol}}static qn(t){let e=t.l;return"5.4.0"!==t.s&&(e=0),new I(e,t.e,t.a,t.p,t.m,t.v,t.c,t.f,t.grl)}}class D{constructor(t){this.u=t,this.u=t,this.tl=new n.A,this.el=new n.A,this.il=new n.A,this.sl=null,this.rl=null}ll(){if(null==this.rl){const t=this.u.j(s.d.C.ul);this.rl=null!=t?I.qn(t):new I}return this.rl}ii(){return this.ll().hl}al(t){if(null!=t&&null!=t.config){const e=t.config;if(e.time>this.ll().hl){const t=t=>null==t?this.ll().ol:t,i=new I(e.time,e.events_blacklist,e.attributes_blacklist,e.purchases_blacklist,e.messaging_session_timeout,e.vapid_public_key,e.content_cards,e.feature_flags,t(e.global_request_rate_limit));let n=!1;null!=i.cl&&this.Wn()!==i.cl&&(n=!0);let r=!1;null!=i.ml.enabled&&this.si()!==i.ml.enabled&&(r=!0);let a=!1;null!=i.hi.enabled&&this.ci()!==i.hi.enabled&&(a=!0),this.rl=i,this.u.k(s.d.C.ul,i.Y()),n&&this.tl.Dt(),r&&this.el.Dt(),a&&this.il.Dt()}}}_n(t){const e=this.tl.It(t);return this.sl&&this.tl.removeSubscription(this.sl),this.sl=e,e}Is(t){return this.el.It(t)}ji(t){return this.il.It(t)}me(t){return-1!==this.ll().gl.indexOf(t)}hu(t){return-1!==this.ll().fl.indexOf(t)}Dr(t){return-1!==this.ll().bl.indexOf(t)}dl(){return this.ll().Rl}Wn(){return this.ll().cl}si(){return this.ll().ml.enabled||!1}Cl(){const t=this.ll().ol;return!(!t||null==t.enabled)&&t.enabled}Tu(){if(!this.Cl())return-1;const t=this.ll().ol;return null==t.capacity||t.capacity<10?-1:t.capacity}ku(){if(!this.Cl())return-1;const t=this.ll().ol;return null==t.refill_rate||t.refill_rate<=0?-1:t.refill_rate}vl(t){const e=this.ll().ol.endpoint_overrides;return null==e?null:e[t]}Cu(t){const e=this.vl(t);return null==e||isNaN(e.capacity)||e.capacity<=0?-1:e.capacity}Su(t){const e=this.vl(t);return null==e||isNaN(e.refill_rate)||e.refill_rate<=0?-1:e.refill_rate}ci(){return this.ll().hi.enabled&&null==this.Ri()?(y.A.q(w.w.qs,{e:"Missing feature flag refresh_rate_limit."}),!1):this.ll().hi.enabled||!1}Ri(){return this.ll().hi.refresh_rate_limit}}class z{constructor(t,e,i,s){this.u=t,this.wt=e,this.yt=i,this.wl=s,this.u=t,this.wt=e,this.yt=i,this.Sl=1e3,(null==s||isNaN(s))&&(s=1800),s<this.Sl/1e3&&(a.A.info("Specified session timeout of "+s+"s is too small, using the minimum session timeout of "+this.Sl/1e3+"s instead."),s=this.Sl/1e3),this.wl=s}jl(t,e){return new A.A(this.wt.getUserId(),w.w.xl,t,e.eu,{d:(0,v.UK)(t-e.Dl)})}Si(){const t=this.u.tu(s.d.iu.El);return null==t?null:t.eu}Gl(){const t=(new Date).valueOf(),e=this.yt.dl(),i=this.u.j(s.d.C.Nl);if(null!=i&&null==e)return!1;let n=!1;return null==i?n=!0:null!=e&&(n=t-i>1e3*e),n&&this.u.k(s.d.C.Nl,t),n}zl(t,e){return null==e||null==e.Hl||!(t-e.Dl<this.Sl)&&e.Hl<t}xo(){const t=(new Date).valueOf(),e=t+1e3*this.wl,i=this.u.tu(s.d.iu.El);if(this.zl(t,i)){let n="Generating session start event with time "+t;if(null!=i){let t=i.Wl;t-i.Dl<this.Sl&&(t=i.Dl+this.Sl),this.u.kl(this.jl(t,i)),n+=" (old session ended "+t+")"}n+=". Will expire "+e.valueOf(),a.A.info(n);const r=new d.A(p.A.W(),e);return this.u.kl(new A.A(this.wt.getUserId(),w.w.ql,t,r.eu)),this.u.uu(s.d.iu.El,r),null==this.u.j(s.d.C.Nl)&&this.u.k(s.d.C.Nl,t),r.eu}if(null!=i)return i.Wl=t,i.Hl=e,this.u.uu(s.d.iu.El,i),i.eu}yl(){const t=this.u.tu(s.d.iu.El);null!=t&&(this.u.Al(s.d.iu.El),this.u.kl(this.jl((new Date).valueOf(),t)))}}const R={Wh:function(t,e=!1){let i=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(s.d.C.ec,"true"),localStorage.getItem(s.d.C.ec)&&(localStorage.removeItem(s.d.C.ec),i=!0)}catch(t){if(!(t instanceof Error&&("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&localStorage.length>0))throw t;i=!0}}catch(t){a.A.info("Local Storage not supported!")}const n=R.oc(),r=new s.A.tc(t,n&&!e,i);let o;return o=i?new s.A.rc(t):new s.A.ac,new s.A(r,o)},oc:function(){return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}},P=R;var L=i("rv22"),B=i("+aDo"),M=i("J/SO"),F=i("TaGn");class U{constructor(t,e){this.yt=t,this.u=e,this.yt=t,this.u=e}getUserId(){const t=this.u.tu(s.d.iu.su);if(null==t)return null;let e=t.eu,i=(0,B.N)(e);if(i>F.A.lr){for(;i>F.A.lr;)e=e.slice(0,e.length-1),i=(0,B.N)(e);t.eu=e,this.u.uu(s.d.iu.su,t)}return e}ou(t){const e=null==this.getUserId();this.u.uu(s.d.iu.su,new d.A(t)),e&&this.u.ru(t)}setCustomUserAttribute(t,e){if(this.yt.hu(t))return a.A.info('Custom Attribute "'+t+'" is blocklisted, ignoring.'),!1;const i={};return i[t]=e,this.nu(F.A.lu,i,!0)}nu(t,e,i=!1,s=!1){const n=this.u.mu(this.getUserId(),t,e);let r="",o=t,l=e;return i&&(r=" custom","object"==typeof e&&(o=Object.keys(e)[0],l=e[o],"object"==typeof l&&(l=JSON.stringify(l,null,2)))),!s&&n&&a.A.info(`Logged${r} attribute ${o} with value ${l}`),n}Pn(t,e,i,n,o){this.nu("push_token",t,!1,!0),this.nu("custom_push_public_key",i,!1,!0),this.nu("custom_push_user_auth",n,!1,!0),this.nu("custom_push_vapid_public_key",o,!1,!0);const l=r.A.Yt.Qt,u=new r.A(l,a.A),c=new M.A(t,e,i,n,o);this.u.k(s.d.C.In,c.Y()),u.setItem(l.ss.cu,l.ie,!0)}Sn(t){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),t){const t=r.A.Yt.Qt,e=new r.A(t,a.A);this.u.k(s.d.C.In,!1),e.setItem(t.ss.cu,t.ie,!1)}}}var q=i("DEgD"),j=i("xoq4");const $={Eo:"allowCrawlerActivity",_o:"baseUrl",Io:"noCookies",So:"devicePropertyAllowlist",ka:"disablePushTokenMaintenance",Ao:"enableLogging",No:"enableSdkAuthentication",_a:"manageServiceWorkerExternally",Oo:"minimumIntervalBetweenTriggerActionsInSeconds",Ro:"sessionTimeoutInSeconds",Po:"appVersion",Lo:"appVersionNumber",wa:"serviceWorkerLocation",Ma:"safariWebsitePushId",zn:"localization",bo:"contentSecurityNonce",Do:"allowUserSuppliedJavascript",jo:"inAppMessageZIndex",ho:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",Lh:"requireExplicitInAppMessageDismissal",Mo:"doNotLoadFontAwesome",Uo:"deviceId",ya:"serviceWorkerScope",Wo:"sdkFlavor",tn:"openCardsInNewTab"},G={Eo:"allowCrawlerActivity",_o:"baseUrl",Io:"noCookies",So:"devicePropertyAllowlist",ka:"disablePushTokenMaintenance",Ao:"enableLogging",No:"enableSdkAuthentication",_a:"manageServiceWorkerExternally",Oo:"minimumIntervalBetweenTriggerActionsInSeconds",Ro:"sessionTimeoutInSeconds",Po:"appVersion",Lo:"appVersionNumber",wa:"serviceWorkerLocation",Ma:"safariWebsitePushId",zn:"localization",bo:"contentSecurityNonce",Do:"allowUserSuppliedJavascript",jo:"inAppMessageZIndex",ho:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",en:"openNewsFeedCardsInNewTab",Lh:"requireExplicitInAppMessageDismissal",Mo:"doNotLoadFontAwesome",Uo:"deviceId",ya:"serviceWorkerScope",Wo:"sdkFlavor"},J=new class{constructor(){this.rn="",this.Bo="",this.Vo=void 0,this.Ko=null,this.on=null,this.qt=null,this.zi=null,this.yt=null,this.ri=null,this.u=null,this.wt=null,this.Go="",this.isInitialized=!1,this.$o=!1,this.qo=new n.A,this.Jo=new n.A,this.options={},this.Yo=[],this.Ho=[],this._e=[],this.Bo="5.4.0"}Xo(t){this.qo.It(t)}Sh(t){this.Jo.It(t)}initialize(t,e){if(this.so())return a.A.info("Braze has already been initialized with an API key."),!0;this.options=e||{};let r=this.nn(G.Ao);const l=(0,q.y)(j.uD.Zo());if(l&&"true"===l.brazeLogging&&(r=!0),a.A.init(r),a.A.info(`Initialization Options: ${JSON.stringify(this.options,null,2)}`),null==t||""===t||"string"!=typeof t)return a.A.error("Braze requires a valid API key to be initialized."),!1;this.rn=t;let c=this.nn(G._o);if(null==c||""===c||"string"!=typeof c)return a.A.error("Braze requires a valid baseUrl to be initialized."),!1;!1===/^https?:/.test(c)&&(c=`https://${c}`);const p=c;if(c=document.createElement("a"),c.href=p,"/"===c.pathname&&(c=`${c}api/v3`),this.Go=c.toString(),u.A.Qo&&!this.nn(G.Eo))return a.A.info("Ignoring activity from crawler bot "+navigator.userAgent),this.$o=!0,!1;const f=this.nn(G.Io)||!1;if(this.u=P.Wh(t,f),f&&this.u.Vh(t),new s.A.ee(null,!0).br(s.d.se))return a.A.info("Ignoring all activity due to previous opt out"),this.$o=!0,!1;for(const t of(0,b.HP)(this.options))-1===(0,b.zu)($).indexOf(t)&&a.A.warn(`Ignoring unknown initialization option '${t}'.`);const m=["mparticle","wordpress","tealium"];if(null!=this.nn(G.Wo)){const t=this.nn(G.Wo);-1!==m.indexOf(t)?this.Vo=t:a.A.error("Invalid sdk flavor passed: "+t)}let A=this.nn($.So);if(null!=A)if((0,b.cy)(A)){const t=[];for(let e=0;e<A.length;e++)(0,b.BY)(h.A,A[e],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&t.push(A[e]);A=t}else a.A.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),A=null;const v=this.nn(G.Uo);if(v){const t=new d.A(v);this.u.uu(s.d.iu.Uo,t)}this.on=new g(this.u,A),this.yt=new D(this.u),this.wt=new U(this.yt,this.u),this.ri=new z(this.u,this.wt,this.yt,this.nn(G.Ro));const y=new n.A;return this.Ko=new o(this.u,this.nn(G.No),y),this.$t(y),this.qt=new S(this.on,this.u,this.Ko,this.wt,this.ri,this.yt,this.rn,this.Go,this.Bo,this.Vo||"",this.nn(G.Po),this.nn(G.Lo)),this.zi=new O(this.rn,this.Go,this.ri,this.on,this.wt,this.yt,this.u,(t=>{if(this.so())for(const e of this.gr())e.Ns(t)}),this.Ko,this.qt),this.zi.initialize(),f||this.u.Kh(),a.A.info(`Initialized for the Braze backend at "${this.nn(G._o)}" with API key "${this.rn}".`),L.B.o(),this.yt.ji((()=>{var t;this.isInitialized&&(null===(t=this.yt)||void 0===t?void 0:t.ci())&&Promise.resolve().then(i.bind(i,"64cp")).then((t=>{this.isInitialized&&(0,t.default)()}))})),this.zi.mr((()=>{var t;this.isInitialized&&(null===(t=this.yt)||void 0===t?void 0:t.ci())&&Promise.resolve().then(i.bind(i,"64cp")).then((t=>{this.isInitialized&&(0,t.default)(void 0,void 0,!0)}))})),this.qo.Dt(this.options),this.isInitialized=!0,window.dispatchEvent(new CustomEvent("braze.initialized")),!0}destroy(t){if(a.A.destroy(),this.so()){this.Jo.Dt(),this.Jo.removeAllSubscriptions();for(const t of this.Yo)t.destroy();this.Yo=[];for(const t of this.Ho)t.clearData(!1);this.Ho=[],this.removeAllSubscriptions(),this._e=[],null!=this.zi&&this.zi.destroy(),this.zi=null,this.Ko=null,this.on=null,this.qt=null,this.yt=null,this.ri=null,this.wt=null,this.options={},this.Vo=void 0,this.isInitialized=!1,this.$o=!1,t&&(this.u=null)}}X(){return!(this.$h()||!this.so()&&(console.warn(E.xE),1))}ba(){return this.rn}Sr(){return this.Ko}Hs(){return this.Go}te(){return this.on}nr(){return this.qt}nn(t){return this.options[t]}gr(){return this.Ho}cr(){return this.zi}ir(){return this.yt}zr(){return this.ri}l(){return this.u}pr(){if(this.wt&&this.zi)return new F.A(this.wt,this.zi)}er(){return this.wt}tr(){return!0===this.nn(G.Do)}g(t){let e=!1;for(const i of this.Yo)i===t&&(e=!0);e||this.Yo.push(t)}ar(t){let e=!1;for(const i of this.Ho)i.constructor===t.constructor&&(e=!0);t instanceof l.A&&!e&&this.Ho.push(t)}$t(t){t instanceof n.A&&this._e.push(t)}removeAllSubscriptions(){if(this.X())for(const t of this._e)t.removeAllSubscriptions()}removeSubscription(t){if(this.X())for(const e of this._e)e.removeSubscription(t)}oe(t){this.$o=t}so(){return this.isInitialized}$h(){return this.$o}Ds(){return this.Bo}}},jGgm:(t,e,i)=>{i.d(e,{A:()=>d,d:()=>h});var s=i("KuXe"),n=i("dQ1G"),r=i("azH7"),a=i("wzJC"),o=i("cqms"),l=i("TaGn"),u=i("fXrE"),c=i("LltV");const h={iu:{su:"ab.storage.userId",Uo:"ab.storage.deviceId",El:"ab.storage.sessionId"},C:{ec:"ab.test",tE:"ab.storage.events",eE:"ab.storage.attributes",sE:"ab.storage.attributes.anonymous_user",Fa:"ab.storage.device",Jh:"ab.storage.sdk_metadata",Qh:"ab.storage.session_id_for_cached_metadata",In:"ab.storage.pushToken",Ui:"ab.storage.newsFeed",ki:"ab.storage.lastNewsFeedRefresh",J:"ab.storage.cardImpressions",ul:"ab.storage.serverConfig",rE:"ab.storage.triggers",oE:"ab.storage.triggers.ts",Nl:"ab.storage.messagingSessionStart",ws:"ab.storage.cc",gs:"ab.storage.ccLastFullSync",ys:"ab.storage.ccLastCardUpdated",nE:"ab.storage.ccRateLimitCurrentTokenCount",fu:"ab.storage.globalRateLimitCurrentTokenCount",gu:"ab.storage.dynamicRateLimitCurrentTokenCount",v:"ab.storage.ccClicks",H:"ab.storage.ccImpressions",A:"ab.storage.ccDismissals",aE:"ab.storage.lastDisplayedTriggerTimesById",iE:"ab.storage.lastDisplayedTriggerTime",EE:"ab.storage.triggerFireInstancesById",wh:"ab.storage.signature",As:"ab.storage.brazeSyncRetryCount",Ss:"ab.storage.sdkVersion",gi:"ab.storage.ff",vi:"ab.storage.ffImpressions",xi:"ab.storage.ffLastRefreshAt",Di:"ab.storage.ff.sessionId",lE:"ab.storage.lastReqToEndpoint",SE:"ab.storage.requestAttempts",Nr:"ab.storage.deferredIam",Za:"ab.storage.lastSdkReq",_E:"ab.storage.alias"},se:"ab.optOut"};class d{constructor(t,e){this.uE=t,this.TE=e,this.uE=t,this.TE=e}Vh(t){const e=(0,r.HP)(h.iu),i=new d.ee(t);for(const t of e)i.remove(h.iu[t])}uu(t,e){let i=null;null!=e&&e instanceof n.A&&(i=e.Y()),this.uE.store(t,i)}cE(t){const e=this.tu(t);null!=e&&(e.Wl=(new Date).valueOf(),this.uu(t,e))}tu(t){const e=this.uE.br(t),i=(t=>{let e;try{e=JSON.parse(t)}catch(t){e=null}return e})(e);let s;if(i)s=n.A.qn(i)||null,s&&this.uu(t,s);else{const i=n.A.hE(e);s=n.A.qn(i)||null,i!==e&&s&&this.uu(t,s)}return s}Al(t){this.uE.remove(t)}Kh(){const t=(0,r.HP)(h.iu);let e;for(const i of t)e=this.tu(h.iu[i]),null!=e&&this.uu(h.iu[i],e)}zo(t){let e;if(null==t||0===t.length)return!1;e=(0,r.cy)(t)?t:[t];let i=this.TE.br(h.C.tE);null!=i&&(0,r.cy)(i)||(i=[]);for(let t=0;t<e.length;t++)i.push(e[t].Y());return this.TE.store(h.C.tE,i)}kl(t){return null!=t&&this.zo([t])}AE(){let t=this.TE.br(h.C.tE);this.TE.remove(h.C.tE),null==t&&(t=[]);const e=[];let i=!1,n=null;if((0,r.cy)(t))for(let i=0;i<t.length;i++)s.A.RE(t[i])?e.push(s.A.qn(t[i])):n=i;else i=!0;if(i||null!=n){let r="Stored events could not be deserialized as Events";i&&(r+=", was "+Object.prototype.toString.call(t)+" not an array"),null!=n&&(r+=", value at index "+n+" does not look like an event"),r+=", serialized values were of type "+typeof t+": "+JSON.stringify(t),e.push(new s.A(null,a.w.qs,(new Date).valueOf(),null,{e:r}))}return e}k(t,e){return!!(0,r.BY)(h.C,t,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.TE.store(t,e)}j(t){return!!(0,r.BY)(h.C,t,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.TE.br(t)}ti(t){return!!(0,r.BY)(h.C,t,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.TE.remove(t),!0)}clearData(){const t=(0,r.HP)(h.iu),e=(0,r.HP)(h.C);for(let e=0;e<t.length;e++){const i=t[e];this.uE.remove(h.iu[i])}for(let t=0;t<e.length;t++){const i=e[t];this.TE.remove(h.C[i])}}gE(t){return t||h.C.sE}Ea(t){let e=this.TE.br(h.C.eE);null==e&&(e={});const i=this.gE(t[l.A.Yn]),s=e[i];for(const n in t)n!==l.A.Yn&&(null==e[i]||s&&null==s[n])&&this.mu(t[l.A.Yn],n,t[n])}mu(t,e,i){let s=this.TE.br(h.C.eE);null==s&&(s={});const n=this.gE(t);let r=s[n];if(null==r&&(r={},null!=t&&(r[l.A.Yn]=t)),e===l.A.lu){null==r[e]&&(r[e]={});for(const t in i)r[e][t]=i[t]}else r[e]=i;return s[n]=r,this.TE.store(h.C.eE,s)}OE(){const t=this.TE.br(h.C.eE);this.TE.remove(h.C.eE);const e=[];for(const i in t)null!=t[i]&&e.push(t[i]);return e}ru(t){const e=this.TE.br(h.C.eE);if(null!=e){const i=this.gE(null),s=e[i];null!=s&&(e[i]=void 0,this.TE.store(h.C.eE,e),s[l.A.Yn]=t,this.Ea(s))}const i=this.tu(h.iu.El);let s=null;null!=i&&(s=i.eu);const n=this.AE();if(null!=n)for(let e=0;e<n.length;e++){const i=n[e];null==i.userId&&i.sessionId==s&&(i.userId=t),this.kl(i)}}dE(){return this.TE.fE}}d.rc=class{constructor(t){this.rn=t,this.rn=t,this.fE=u.A.IE()?3:10}bE(t){return t+"."+this.rn}store(t,e){const i={v:e};try{return localStorage.setItem(this.bE(t),JSON.stringify(i)),!0}catch(t){return o.A.info("Storage failure: "+(0,c.u)(t)),!1}}br(t){try{let e=null;const i=localStorage.getItem(this.bE(t));return null!=i&&(e=JSON.parse(i)),null==e?null:e.v}catch(t){return o.A.info("Storage retrieval failure: "+(0,c.u)(t)),null}}remove(t){try{localStorage.removeItem(this.bE(t))}catch(t){return o.A.info("Storage removal failure: "+(0,c.u)(t)),!1}}},d.ac=class{constructor(){this.mE={},this.KE=5242880,this.fE=3}store(t,e){const i={value:e},s=this.YE(e);return s>this.KE?(o.A.info("Storage failure: object is ≈"+s+" bytes which is greater than the max of "+this.KE),!1):(this.mE[t]=i,!0)}YE(t){const e=[],i=[t];let s=0;for(;i.length;){const t=i.pop();if("boolean"==typeof t)s+=4;else if("string"==typeof t)s+=2*t.length;else if("number"==typeof t)s+=8;else if("object"==typeof t&&-1===e.indexOf(t)){let s,n;e.push(t);for(const e in t)n=t,s=e,i.push(n[s])}}return s}br(t){const e=this.mE[t];return null==e?null:e.value}remove(t){this.mE[t]=null}},d.ee=class{constructor(t,e){this.rn=t,this.NE=e,this.rn=t,this.CE=this.GE(),this.DE=576e3,this.NE=!!e}bE(t){return null!=this.rn?t+"."+this.rn:t}GE(){let t=0,e=document.location.hostname;const i=e.split("."),s="ab._gd";for(;t<i.length-1&&-1===document.cookie.indexOf(s+"="+s);)t++,e="."+i.slice(-1-t).join("."),document.cookie=s+"="+s+";domain="+e+";";return document.cookie=s+"=;expires="+new Date(0).toUTCString()+";domain="+e+";",e}ne(){const t=new Date;return t.setTime(t.getTime()+60*this.DE*1e3),t.getFullYear()}ME(){const t=(0,r.zu)(h.iu),e=document.cookie.split(";");for(let i=0;i<e.length;i++){let s=e[i];for(;" "===s.charAt(0);)s=s.substring(1);let n=!1;for(let e=0;e<t.length;e++)if(0===s.indexOf(t[e])){n=!0;break}if(n){const t=s.split("=")[0];-1===t.indexOf("."+this.rn)&&this.pE(t)}}}store(t,e){this.ME();const i=new Date;i.setTime(i.getTime()+60*this.DE*1e3);const s="expires="+i.toUTCString(),n="domain="+this.CE;let r;r=this.NE?e:encodeURIComponent(e);const a=this.bE(t)+"="+r+";"+s+";"+n+";path=/";return a.length>=4093?(o.A.info("Storage failure: string is "+a.length+" chars which is too large to store as a cookie."),!1):(document.cookie=a,!0)}br(t){const e=[],i=this.bE(t)+"=",s=document.cookie.split(";");for(let n=0;n<s.length;n++){let r=s[n];for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(i))try{let t;t=this.NE?r.substring(i.length,r.length):decodeURIComponent(r.substring(i.length,r.length)),e.push(t)}catch(e){return o.A.info("Storage retrieval failure: "+(0,c.u)(e)),this.remove(t),null}}return e.length>0?e[e.length-1]:null}remove(t){this.pE(this.bE(t))}pE(t){const e=t+"=;expires="+new Date(0).toUTCString();document.cookie=e,document.cookie=e+";path=/";const i=e+";domain="+this.CE;document.cookie=i,document.cookie=i+";path=/"}},d.tc=class{constructor(t,e,i){this.rn=t,this.vE=[],e&&this.vE.push(new d.ee(t)),i&&this.vE.push(new d.rc(t)),this.vE.push(new d.ac)}store(t,e){let i=!0;for(let s=0;s<this.vE.length;s++)i=this.vE[s].store(t,e)&&i;return i}br(t){for(let e=0;e<this.vE.length;e++){const i=this.vE[e].br(t);if(null!=i)return i}return null}remove(t){new d.ee(this.rn).remove(t);for(let e=0;e<this.vE.length;e++)this.vE[e].remove(t)}}},TdiU:(t,e,i)=>{i.d(e,{A:()=>n});var s=i("HXl4");class n{constructor(){this._e={}}It(t){if("function"!=typeof t)return null;const e=s.A.W();return this._e[e]=t,e}removeSubscription(t){delete this._e[t]}removeAllSubscriptions(){this._e={}}ic(){return Object.keys(this._e).length}Dt(t){const e=[];for(const i in this._e){const s=this._e[i];e.push(s(t))}return e}}},"4j5/":(t,e,i)=>{i.d(e,{b:()=>n});var s=i("jGgm");function n(t){const e=null==t?void 0:t.j(s.d.C._E);let i;return e&&(i={label:e.l,name:e.a}),i}},QOIJ:(t,e,i)=>{i.d(e,{A:()=>s});const s={Aa:"invalid_api_key",Ba:"blacklisted",Na:"no_device_identifier",qa:"invalid_json_response",Ra:"empty_response",__:"sdk_auth_error"}},KuXe:(t,e,i)=>{i.d(e,{A:()=>o});var s=i("F7/r"),n=i("4j5/"),r=i("azH7"),a=i("7esM");class o{constructor(t,e,i,s,n){this.userId=t,this.type=e,this.time=i,this.sessionId=s,this.data=n,this.userId=t,this.type=e,this.time=(0,a.S3)(i),this.sessionId=s,this.data=n}Zi(){var t;const e={name:this.type,time:(0,a.UK)(this.time),data:this.data||{},session_id:this.sessionId};null!=this.userId&&(e.user_id=this.userId);const i=(null===(t=s.Ay.Sr())||void 0===t?void 0:t.Fh())||!1;if(!e.user_id&&!i){const t=(0,n.b)(s.Ay.l());t&&(e.alias=t)}return e}Y(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(t){return new o(t.user_id,t.name,t.time,t.session_id,t.data)}static RE(t){return null!=t&&(0,r.Gv)(t)&&null!=t.t&&""!==t.t}static qn(t){return new o(t.u,t.t,t.ts,t.s,t.d)}}},dQ1G:(t,e,i)=>{i.d(e,{A:()=>o});var s=i("HXl4"),n=i("cqms"),r=i("azH7"),a=i("LltV");class o{constructor(t,e,i){this.eu=t,null==t&&(t=s.A.W()),!i||isNaN(i)?this.Dl=(new Date).valueOf():this.Dl=i,this.eu=t,this.Wl=(new Date).valueOf(),this.Hl=e}Y(){return`g:${encodeURIComponent(this.eu)}|e:${this.Hl}|c:${this.Dl}|l:${this.Wl}`}static hE(t){if("string"!=typeof t)return null;const e=t.lastIndexOf("|e:"),i=t.substring(0,e),s=i.split("g:")[1];let n;return n=/[|:]/.test(s)?encodeURIComponent(s):s,t.replace(i,`g:${n}`)}static qn(t){let e;if("string"==typeof t)try{const i=t.split("|");if(!(0,r.cy)(i)||4!==i.length)return null;const s=t=>t.split(":")[1],n=t=>{const e=parseInt(s(t));if(!isNaN(e))return e};e=new o(decodeURIComponent(s(i[0])),n(i[1]),n(i[2])),e.Wl=n(i[3])}catch(e){n.A.info(`Unable to parse cookie string ${t}, failed with error: ${(0,a.u)(e)}`)}else{if(null==t||null==t.g)return null;e=new o(t.g,t.e,t.c),e.Wl=t.l}return e}}},"J/SO":(t,e,i)=>{i.d(e,{A:()=>n});var s=i("7esM");class n{constructor(t,e,i,s,n){this.endpoint=t,this.Vn=e,this.publicKey=i,this.Vl=s,this.cl=n,this.endpoint=t||null,this.Vn=e||null,this.publicKey=i||null,this.Vl=s||null,this.cl=n||null}Y(){return{e:this.endpoint,c:this.Vn,p:this.publicKey,u:this.Vl,v:this.cl}}static qn(t){return new n(t.e,(0,s.jU)(t.c),t.p,t.u,t.v)}}},Jdpe:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t=!1,e=[]){this.L=t,this.ge=e,this.L=t,this.ge=e}P(t){this.L=this.L&&t.L,this.ge.push(...t.ge)}}},"87bj":(t,e,i)=>{i.d(e,{A:()=>s});const s={OPEN:"open",Rr:"purchase",vr:"push_click",ue:"custom_event",Qr:"iam_click",kt:"test"}},Vqo0:(t,e,i)=>{i.d(e,{A:()=>m});var s=i("7esM"),n=i("cqms");class r{constructor(t){this.Bl=t,this.Bl=t}Jl(t){return null==this.Bl||this.Bl===t[0]}static fromJson(t){return new r(t?t.event_name:null)}Y(){return this.Bl}}var a=i("azH7");class o{constructor(t,e,i,n){this.Tl=t,this._l=e,this.comparator=i,this.Ll=n,this.Tl=t,this._l=e,this.comparator=i,this.Ll=n,this._l===o.Ol.Il&&this.comparator!==o.Ql.Ul&&this.comparator!==o.Ql.Xl&&this.comparator!==o.Ql.Fl&&this.comparator!==o.Ql.Kl&&(this.Ll=(0,s.Zo)(this.Ll))}Jl(t){let e=null;switch(null!=t&&(e=t[this.Tl]),this.comparator){case o.Ql.Pl:return null!=e&&e.valueOf()===this.Ll.valueOf();case o.Ql.Yl:return null==e||e.valueOf()!==this.Ll.valueOf();case o.Ql.Zl:return null!=e&&typeof e==typeof this.Ll&&e>this.Ll;case o.Ql.Ul:return this._l===o.Ol.Il?null!=e&&(0,a.$P)(e)&&(0,s.Jd)(e)<=this.Ll.valueOf():null!=e&&typeof e==typeof this.Ll&&e>=this.Ll;case o.Ql.$l:return null!=e&&typeof e==typeof this.Ll&&e<this.Ll;case o.Ql.Xl:return this._l===o.Ol.Il?null!=e&&(0,a.$P)(e)&&(0,s.Jd)(e)>=this.Ll.valueOf():null!=e&&typeof e==typeof this.Ll&&e<=this.Ll;case o.Ql.Hu:return null!=e&&"string"==typeof e&&typeof e==typeof this.Ll&&null!=e.match(this.Ll);case o.Ql.Qu:return null!=e;case o.Ql.Xu:return null==e;case o.Ql.Fl:return null!=e&&(0,a.$P)(e)&&(0,s.DA)(e)<this.Ll;case o.Ql.Kl:return null!=e&&(0,a.$P)(e)&&(0,s.DA)(e)>this.Ll;case o.Ql.Vu:return null==e||typeof e!=typeof this.Ll||"string"!=typeof e||null==e.match(this.Ll)}return!1}static fromJson(t){return new o(t.property_key,t.property_type,t.comparator,t.property_value)}Y(){let t=this.Ll;return(0,a.$P)(this.Ll)&&(t=(0,s.UK)(t.valueOf())),{k:this.Tl,t:this._l,c:this.comparator,v:t}}static qn(t){return new o(t.k,t.t,t.c,t.v)}}o.Ol={Yu:"boolean",Zu:"number",yE:"string",Il:"date"},o.Ql={Pl:1,Yl:2,Zl:3,Ul:4,$l:5,Xl:6,Hu:10,Qu:11,Xu:12,Fl:15,Kl:16,Vu:17};class l{constructor(t){this.filters=t,this.filters=t}Jl(t){let e=!0;for(let i=0;i<this.filters.length;i++){const s=this.filters[i];let n=!1;for(let e=0;e<s.length;e++)if(s[e].Jl(t)){n=!0;break}if(!n){e=!1;break}}return e}static fromJson(t){if(null==t||!(0,a.cy)(t))return null;const e=[];for(let i=0;i<t.length;i++){const s=[],n=t[i];for(let t=0;t<n.length;t++)s.push(o.fromJson(n[t]));e.push(s)}return new l(e)}Y(){const t=[];for(let e=0;e<this.filters.length;e++){const i=this.filters[e],s=[];for(let t=0;t<i.length;t++)s.push(i[t].Y());t.push(s)}return t}static qn(t){const e=[];for(let i=0;i<t.length;i++){const s=[],n=t[i];for(let t=0;t<n.length;t++)s.push(o.qn(n[t]));e.push(s)}return new l(e)}}class u{constructor(t,e){this.Bl=t,this.Ml=e,this.Bl=t,this.Ml=e}Jl(t){if(null==this.Bl||null==this.Ml)return!1;const e=t[0],i=t[1];return e===this.Bl&&this.Ml.Jl(i)}static fromJson(t){return new u(t?t.event_name:null,t?l.fromJson(t.property_filters):null)}Y(){return{e:this.Bl,pf:this.Ml?this.Ml.Y():null}}}class c{constructor(t,e){this.tf=t,this.if=e,this.tf=t,this.if=e}Jl(t){if(null==this.tf)return!1;const e=g.rf(t[0],this.tf);if(!e)return!1;let i=null==this.if||0===this.if.length;if(null!=this.if)for(let e=0;e<this.if.length;e++)if(this.if[e]===t[1]){i=!0;break}return e&&i}static fromJson(t){return new c(t?t.id:null,t?t.buttons:null)}Y(){return this.tf}}class h{constructor(t){this.productId=t,this.productId=t}Jl(t){return null==this.productId||t[0]===this.productId}static fromJson(t){return new h(t?t.product_id:null)}Y(){return this.productId}}class d{constructor(t,e){this.productId=t,this.Ml=e,this.productId=t,this.Ml=e}Jl(t){if(null==this.productId||null==this.Ml)return!1;const e=t[0],i=t[1];return e===this.productId&&this.Ml.Jl(i)}static fromJson(t){return new d(t?t.product_id:null,t?l.fromJson(t.property_filters):null)}Y(){return{id:this.productId,pf:this.Ml?this.Ml.Y():null}}}class p{constructor(t){this.tf=t,this.tf=t}Jl(t){return null==this.tf||g.rf(t[0],this.tf)}static fromJson(t){return new p(t?t.campaign_id:null)}Y(){return this.tf}}var b=i("87bj"),f=i("LltV");class g{constructor(t,e){this.type=t,this.data=e,this.type=t,this.data=e}sc(t,e){return g.cc[this.type]===t&&(null==this.data||this.data.Jl(e))}static rf(t,e){let i=null;try{i=window.atob(t)}catch(e){return n.A.info("Failed to unencode analytics id "+t+": "+(0,f.u)(e)),!1}return e===i.split("_")[0]}static fromJson(t){const e=t.type;let i=null;switch(e){case g.Br.OPEN:case g.Br.kt:break;case g.Br.Rr:i=h.fromJson(t.data);break;case g.Br.nc:i=d.fromJson(t.data);break;case g.Br.vr:i=p.fromJson(t.data);break;case g.Br.ue:i=r.fromJson(t.data);break;case g.Br.lc:i=u.fromJson(t.data);break;case g.Br.Qr:i=c.fromJson(t.data)}return new g(e,i)}Y(){return{t:this.type,d:this.data?this.data.Y():null}}static qn(t){let e,i=null;switch(t.t){case g.Br.OPEN:case g.Br.kt:break;case g.Br.Rr:i=new h(t.d);break;case g.Br.nc:e=t.d||{},i=new d(e.id,l.qn(e.pf||[]));break;case g.Br.vr:i=new p(t.d);break;case g.Br.ue:i=new r(t.d);break;case g.Br.lc:e=t.d||{},i=new u(e.e,l.qn(e.pf||[]));break;case g.Br.Qr:i=new c(t.d)}return new g(t.t,i)}}g.Br={OPEN:"open",Rr:"purchase",nc:"purchase_property",vr:"push_click",ue:"custom_event",lc:"custom_event_property",Qr:"iam_click",kt:"test"},g.cc={},g.cc[g.Br.OPEN]=b.A.OPEN,g.cc[g.Br.Rr]=b.A.Rr,g.cc[g.Br.nc]=b.A.Rr,g.cc[g.Br.vr]=b.A.vr,g.cc[g.Br.ue]=b.A.ue,g.cc[g.Br.lc]=b.A.ue,g.cc[g.Br.Qr]=b.A.Qr,g.cc[g.Br.kt]=b.A.kt;class m{constructor(t,e=[],i,s,n=0,r,a,o=0,l=m.td,u,c,h){this.id=t,this.sd=e,this.startTime=i,this.endTime=s,this.priority=n,this.type=r,this.data=a,this.ed=o,this.rd=l,this.Gr=u,this.hd=c,this.od=h,this.id=t,this.sd=e||[],void 0===i&&(i=null),this.startTime=i,void 0===s&&(s=null),this.endTime=s,this.priority=n||0,this.type=r,this.ed=o||0,null==u&&(u=1e3*(this.ed+30)),this.Gr=u,this.data=a,null!=l&&(this.rd=l),this.hd=c,this.od=h||null}nd(t){return null==this.od||this.rd!==m.td&&t-this.od>=1e3*this.rd}ad(t){this.od=t}ud(t){const e=t+1e3*this.ed;return Math.max(e-(new Date).valueOf(),0)}dd(t){const e=(new Date).valueOf()-t,i=null==t||isNaN(e)||null==this.Gr||e<this.Gr;return i||n.A.info(`Trigger action ${this.type} is no longer eligible for display - fired ${e}ms ago and has a timeout of ${this.Gr}ms.`),!i}static fromJson(t){const e=t.id,i=[];for(let e=0;e<t.trigger_condition.length;e++)i.push(g.fromJson(t.trigger_condition[e]));const n=(0,s.Zo)(t.start_time),r=(0,s.Zo)(t.end_time),o=t.priority,l=t.type,u=t.delay,c=t.re_eligibility,h=t.timeout,d=t.data,p=t.min_seconds_since_last_trigger;return(0,a.BY)(m.Br,l,"Could not construct Trigger from server data","Trigger.Types")?new m(e,i,n,r,o,l,d,u,c,h,p):null}Y(){const t=[];for(let e=0;e<this.sd.length;e++)t.push(this.sd[e].Y());return{i:this.id,c:t,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.ed,r:this.rd,tm:this.Gr,ss:this.hd,ld:this.od}}static qn(t){const e=[],i=t.c||[];for(let t=0;t<i.length;t++)e.push(g.qn(i[t]));return new m(t.i,e,(0,s.jU)(t.s),(0,s.jU)(t.e),t.p,t.t,t.da,t.d,t.r,t.tm,t.ss,t.ld)}}m.Br={Tr:"inapp",md:"templated_iam"},m.td=-1},rv22:(t,e,i)=>{i.d(e,{B:()=>f});var s=i("D1mP"),n=i("F7/r"),r=i("w7bV"),a=i("Rl7B"),o=i("KuXe"),l=i("azH7"),u=i("jGgm");class c{constructor(t,e,i,s,n){this.triggerId=t,this._r=e,this.Mr=i,this.Er=s,this.Gr=n,this.triggerId=t,this._r=e,this.Mr=i,this.Er=s,this.Gr=n}static fromJson(t,e,i,s,n){return null==t||null==t.trigger_id?null:new c(t.trigger_id,e,i,s,n)}}var h=i("Vqo0"),d=i("87bj"),p=i("cqms");class b extends r.A{constructor(t,e,i,s,n){super(),this.tg=t,this.Jt=e,this.u=i,this.zi=s,this.ig=n,this.tg=t,this.Jt=e,this.u=i,this.zi=s,this.ig=n,this.sg=[],this.eg=[],this.hg=null,this.ng={},this.og={},this.triggers=[],this.lg=0,this.ag(),this.gg()}fg(){if(this.u){this.hg=this.u.j(u.d.C.iE)||this.hg,this.ng=this.u.j(u.d.C.EE)||this.ng,this.og=this.u.j(u.d.C.aE)||this.og;for(let t=0;t<this.triggers.length;t++){const e=this.triggers[t];e.id&&null!=this.og[e.id]&&e.ad(this.og[e.id])}}}ag(){if(!this.u)return;this.lg=this.u.j(u.d.C.oE)||0;const t=this.u.j(u.d.C.rE)||[],e=[];for(let i=0;i<t.length;i++)e.push(h.A.qn(t[i]));this.triggers=e,this.fg()}gg(){const t=this,e=function(e,i,s,n,r){return function(){t.cg(e,i,s,n,r)}},i={};for(const t of this.triggers)t.id&&(i[t.id]=t);let s=!1;for(let t=0;t<this.triggers.length;t++){const n=this.triggers[t];if(n.id&&null!=this.ng[n.id]){const t=this.ng[n.id],r=[];for(let s=0;s<t.length;s++){const a=t[s],u=n.ud(a.Er||0);if(u>0){let t,s;r.push(a),null!=a.ug&&(t=a.ug),null!=a.dg&&o.A.RE(a.dg)&&(s=o.A.qn(a.dg));const c=[];if(a.pg&&(0,l.cy)(a.pg))for(let t=0;t<a.pg.length;t++){const e=i[a.pg[t]];null!=e&&c.push(e)}this.eg.push(window.setTimeout(e(n,a.Er||0,t,s,c),u))}}this.ng[n.id].length>r.length&&(this.ng[n.id]=r,s=!0,0===this.ng[n.id].length&&delete this.ng[n.id])}}s&&this.u&&this.u.k(u.d.C.EE,this.ng)}mg(){if(!this.u)return;const t=[];for(let e=0;e<this.triggers.length;e++)t.push(this.triggers[e].Y());this.lg=(new Date).valueOf(),this.u.k(u.d.C.rE,t),this.u.k(u.d.C.oE,this.lg)}bg(){this.u&&((this.u.j(u.d.C.oE)||0)>this.lg?this.ag():this.fg())}Ns(t){let e=!1;if(null!=t&&t.triggers){this.ig.Lr(),this.fg();const i={},s={};this.triggers=[];for(let n=0;n<t.triggers.length;n++){const r=h.A.fromJson(t.triggers[n]);if(r){r.id&&null!=this.og[r.id]&&(r.ad(this.og[r.id]),i[r.id]=this.og[r.id]),r.id&&null!=this.ng[r.id]&&(s[r.id]=this.ng[r.id]);for(let t=0;t<r.sd.length;t++)if(r.sd[t].sc(d.A.kt,null)){e=!0;break}this.triggers.push(r)}}(0,l.n4)(this.og,i)||(this.og=i,this.u&&this.u.k(u.d.C.aE,this.og)),(0,l.n4)(this.ng,s)||(this.ng=s,this.u&&this.u.k(u.d.C.EE,this.ng)),this.mg(),e&&(p.A.info("Trigger with test condition found, firing test."),this.fe(d.A.kt)),this.fe(d.A.OPEN);const n=this.sg;let r;this.sg=[];for(let t=0;t<n.length;t++)r=Array.prototype.slice.call(n[t]),this.fe(...r)}}cg(t,e,i,s,n){const r=s=>{this.fg();const n=(new Date).valueOf();t.dd(e)||(!1===navigator.onLine&&t.type===h.A.Br.Tr&&s.imageUrl?p.A.info(`Not showing ${t.type} trigger action ${t.id} due to offline state.`):t.nd(n)&&this.wg(t,n,i)?0===this.Jt.ic()?p.A.info(`Not displaying trigger ${t.id} because neither automaticallyShowInAppMessages() nor subscribeToInAppMessage() were called.`):(this.Jt.Dt([s]),this.yg(t,n)):p.A.info(`Not displaying trigger ${t.id} because display time fell outside of the acceptable time window.`))},o=()=>{this.fg();const r=n.pop();if(null!=r)if(this.Tg(r,e,i,s,n),r.dd(e)){let t=`Server aborted in-app message display, but the timeout on fallback trigger ${r.id} has already elapsed.`;n.length>0&&(t+=" Continuing to fall back."),p.A.info(t),o()}else{p.A.info(`Server aborted in-app message display. Falling back to lower priority ${r.type} trigger action ${t.id}.`);const a=1e3*r.ed-((new Date).valueOf()-e);a>0?this.eg.push(window.setTimeout((()=>{this.cg(r,e,i,s,n)}),a)):this.cg(r,e,i,s,n)}};let l,u,d;switch(t.type){case h.A.Br.Tr:if(l=(0,a.g)(t.data),null==l){p.A.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`);break}if(u=this.ig.Ki(l),u){p.A.error(u),o();break}r(l);break;case h.A.Br.md:if(d=c.fromJson(t.data,r,o,e,t.Gr||0),null==d){p.A.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`);break}this.ig.Wi(d,i,s);break;default:p.A.error(`Trigger ${t.id} was of unexpected type ${t.type}, ignoring.`)}}fe(t,e=null,i){if(!(0,l.BY)(d.A,t,"Cannot fire trigger action.","TriggerEvents"))return;if(this.zi&&this.zi.zu())return p.A.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.sg.push(arguments);this.bg();const s=(new Date).valueOf(),n=s-(this.hg||0);let r=!0,a=!0;const o=[];for(let i=0;i<this.triggers.length;i++){const n=this.triggers[i],l=s+1e3*n.ed;if(n.nd(l)&&(null==n.startTime||n.startTime.valueOf()<=s)&&(null==n.endTime||n.endTime.valueOf()>=s)){let i=!1;for(let s=0;s<n.sd.length;s++)if(n.sd[s].sc(t,e)){i=!0;break}i&&(r=!1,this.wg(n,l,t)&&(a=!1,o.push(n)))}}if(r)return void p.A.info(`Trigger event ${t} did not match any trigger conditions.`);if(a)return void p.A.info(`Ignoring ${t} trigger event because a trigger was displayed ${n/1e3}s ago.`);o.sort(((t,e)=>t.priority-e.priority));const u=o.pop();null!=u&&(p.A.info(`Firing ${u.type} trigger action ${u.id} from trigger event ${t}.`),this.Tg(u,s,t,i,o),0===u.ed?this.cg(u,s,t,i,o):this.eg.push(window.setTimeout((()=>{this.cg(u,s,t,i,o)}),1e3*u.ed)))}changeUser(t=!1){if(this.triggers=[],this.u&&this.u.ti(u.d.C.rE),!t){this.sg=[],this.hg=null,this.og={},this.ng={};for(let t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[],this.u&&(this.u.ti(u.d.C.iE),this.u.ti(u.d.C.aE),this.u.ti(u.d.C.EE))}}clearData(){this.triggers=[],this.hg=null,this.og={},this.ng={};for(let t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[]}wg(t,e,i){if(null==this.hg)return!0;if(i===d.A.kt)return p.A.info("Ignoring minimum interval between trigger because it is a test type."),!0;let s=t.hd;return null==s&&(s=this.tg),e-this.hg>=1e3*s}Tg(t,e,i,s,n){this.fg(),t.id&&(this.ng[t.id]=this.ng[t.id]||[]);const r={};let a;r.Er=e,r.ug=i,null!=s&&(a=s.Y()),r.dg=a;const o=[];for(const t of n)t.id&&o.push(t.id);r.pg=o,t.id&&this.ng[t.id].push(r),this.u&&this.u.k(u.d.C.EE,this.ng)}yg(t,e){this.fg(),t.ad(e),this.hg=e,t.id&&(this.og[t.id]=e),this.u&&(this.u.k(u.d.C.iE,e),this.u.k(u.d.C.aE,this.og))}}const f={t:!1,provider:null,rr:()=>(f.o(),f.provider||f.rg(),f.provider),rg:()=>{if(!f.provider){const t=n.Ay.nn(n.lw.Oo);f.provider=new b(null!=t?t:30,s.A.m().Ze(),n.Ay.l(),n.Ay.cr(),s.A.m()),n.Ay.ar(f.provider)}},o:()=>{f.t||(f.rg(),n.Ay.g(f),f.t=!0)},destroy:()=>{f.provider=null,f.t=!1}}},lm4s:(t,e,i)=>{i.d(e,{n:()=>n});var s=i("F7/r");function n(t,e,i){const n=t||document.querySelector("head"),r=`ab-${e}-css-definitions-${"5.4.0".replace(/\./g,"-")}`;if(!n)return;const a=n.ownerDocument||document;if(null==a.getElementById(r)){const t=a.createElement("style");t.innerHTML=i||"",t.id=r;const e=s.Ay.nn(s.lw.bo);null!=e&&t.setAttribute("nonce",e),n.appendChild(t)}}},CaYi:(t,e,i)=>{i.d(e,{s:()=>r});var s=i("lm4s"),n=i("S4Qt");function r(){(0,s.n)(undefined,"feed","body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:70px;min-height:100%}body>.ab-feed .ab-initial-spinner{float:none}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;z-index:9011;-webkit-overflow-scrolling:touch}.ab-feed :focus,.ab-feed:focus{outline:0}.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0 20px}.ab-feed.ab-effect-slide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px);-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-feed.ab-effect-slide.ab-show{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-feed.ab-effect-slide.ab-hide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff;-webkit-transition:height .4s ease-in-out,margin .4s ease-in-out;-moz-transition:height .4s ease-in-out,margin .4s ease-in-out;-o-transition:height .4s ease-in-out,margin .4s ease-in-out;transition:height .4s ease-in-out,margin .4s ease-in-out}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-effect-card.ab-hide{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-left{-webkit-transform:translateX(-450px);-moz-transform:translateX(-450px);-ms-transform:translateX(-450px);transform:translateX(-450px)}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-right{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card.ab-effect-card.ab-hide:not(.ab-swiped-left):not(.ab-swiped-right){opacity:0}.ab-feed .ab-card .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button[dir=rtl]{left:0}.ab-feed .ab-card .ab-close-button[dir=ltr]{right:0}.ab-feed .ab-card .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-feed .ab-card .ab-close-button svg.ab-chevron{display:none}.ab-feed .ab-card .ab-close-button:active{background-color:transparent}.ab-feed .ab-card .ab-close-button:focus{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover svg{fill-opacity:.8}.ab-feed .ab-card .ab-close-button:hover{opacity:1}.ab-feed .ab-card .ab-close-button:focus{opacity:1}.ab-feed .ab-card a{float:none;color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{float:none;display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{float:none;height:auto;width:100%}.ab-feed .ab-card.ab-image-only .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;padding:20px 25px 0 25px}.ab-feed .ab-card .ab-description{float:none;color:#545454;padding:15px 25px 20px 25px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-description.ab-no-title{padding-top:20px}.ab-feed .ab-card .ab-url-area{float:none;color:#1676d0;margin-top:12px;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:40px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=ltr]{padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=rtl]{padding-right:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:20px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area[dir=rtl]{padding:20px 25px 25px 0}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;max-width:100%;max-height:100%;width:auto;height:auto}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{float:none;position:relative;background-color:#282828;height:50px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{float:none;cursor:pointer;color:#fff;font-size:18px;padding:16px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{padding-top:12px;padding-right:14px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{padding-left:17px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{padding-top:13px;padding-left:14px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:600px){body>.ab-feed{width:100%}}"),(0,n.N)()}},IoO2:(t,e,i)=>{i.d(e,{B:()=>r});var s=i("lm4s"),n=i("S4Qt");function r(){(0,s.n)(undefined,"iam",".ab-pause-scrolling,body.ab-pause-scrolling,html.ab-pause-scrolling{overflow:hidden;touch-action:none}.ab-iam-root.v3{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:9011;-webkit-tap-highlight-color:transparent}.ab-iam-root.v3:focus{outline:0}.ab-iam-root.v3.ab-effect-fullscreen,.ab-iam-root.v3.ab-effect-html,.ab-iam-root.v3.ab-effect-modal{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-show,.ab-iam-root.v3.ab-effect-html.ab-show,.ab-iam-root.v3.ab-effect-modal.ab-show{opacity:1}.ab-iam-root.v3.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-html.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-modal.ab-show.ab-animate-in{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide,.ab-iam-root.v3.ab-effect-html.ab-hide,.ab-iam-root.v3.ab-effect-modal.ab-hide{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-html.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-modal.ab-hide.ab-animate-out{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-slide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-show .ab-in-app-message{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-iam-root.v3.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left{-webkit-transform:translateX(-535px);-moz-transform:translateX(-535px);-ms-transform:translateX(-535px);transform:translateX(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up{-webkit-transform:translateY(-535px);-moz-transform:translateY(-535px);-ms-transform:translateY(-535px);transform:translateY(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down{-webkit-transform:translateY(535px);-moz-transform:translateY(535px);-ms-transform:translateY(535px);transform:translateY(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3 .ab-ios-scroll-wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;pointer-events:all;touch-action:auto;-webkit-overflow-scrolling:touch}.ab-iam-root.v3 .ab-in-app-message{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:fixed;text-align:center;-webkit-box-shadow:0 0 4px rgba(0,0,0,.3);-moz-box-shadow:0 0 4px rgba(0,0,0,.3);box-shadow:0 0 4px rgba(0,0,0,.3);line-height:normal;letter-spacing:normal;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;z-index:9011;max-width:100%;overflow:hidden;display:inline-block;pointer-events:all;color:#333;color-scheme:normal}.ab-iam-root.v3 .ab-in-app-message.ab-no-shadow{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.ab-iam-root.v3 .ab-in-app-message :focus,.ab-iam-root.v3 .ab-in-app-message:focus{outline:0}.ab-iam-root.v3 .ab-in-app-message.ab-clickable{cursor:pointer}.ab-iam-root.v3 .ab-in-app-message.ab-background{background-color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message .ab-close-button[dir=rtl]{left:0}.ab-iam-root.v3 .ab-in-app-message .ab-close-button[dir=ltr]{right:0}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-text{float:none;line-height:1.5;margin:20px 25px;max-width:100%;overflow:hidden;overflow-y:auto;vertical-align:text-bottom;word-wrap:break-word;white-space:pre-wrap;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar{-webkit-appearance:none;width:14px}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb{-webkit-appearance:none;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;background-color:rgba(0,0,0,.2)}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-button{width:0;height:0;display:none}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-header{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;font-size:20px;margin-bottom:10px;line-height:1.3}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;cursor:pointer;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:14px;font-weight:700;margin:20px;margin-top:calc(constant(safe-area-inset-top,0) + 20px);margin-right:calc(constant(safe-area-inset-right,0) + 20px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 20px);margin-left:calc(constant(safe-area-inset-left,0) + 20px);margin-top:calc(env(safe-area-inset-top,0) + 20px);margin-right:calc(env(safe-area-inset-right,0) + 20px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 20px);margin-left:calc(env(safe-area-inset-left,0) + 20px);max-height:150px;padding:10px;right:0;background-color:#efefef}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text{opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 25px 5px 10px;max-width:430px;vertical-align:middle;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text[dir=rtl]{border-width:5px 10px 5px 25px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{display:block;max-height:150px;overflow:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:365px;border-top:0;border-bottom:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button[dir=rtl]{left:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button[dir=ltr]{right:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{float:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;vertical-align:top;width:60px;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area{width:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{float:none;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal{font-size:14px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{float:none;position:relative;display:block;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img{background-size:cover;background-repeat:no-repeat;background-position:50% 50%;position:absolute;top:0;right:0;bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-icon{margin-top:20px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{padding:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-text{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-buttons{bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{float:none;height:auto;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{display:block;top:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none}.ab-iam-root.v3 .ab-in-app-message.ab-modal{padding-top:20px;width:450px;max-width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone{max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text{max-height:660px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-image{max-height:524.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon{max-height:610px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons{margin-bottom:93px;max-height:587px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image{max-height:451.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon{max-height:537px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{margin-top:-20px;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area img{max-width:100%;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area{height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{width:auto;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{width:auto;max-height:720px;max-width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen{width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape{width:720px;max-height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:225px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-message-text{max-height:112px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text{max-height:247px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons{margin-bottom:93px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area{height:360px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area{height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-html-message{background-color:transparent;border:none;height:100%;overflow:auto;position:relative;touch-action:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-message-buttons{position:absolute;bottom:0;width:100%;padding:17px 25px 30px 25px;z-index:inherit;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ab-iam-root.v3 .ab-in-app-message .ab-message-button{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;cursor:pointer;display:inline-block;font-size:14px;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;height:44px;line-height:normal;letter-spacing:normal;margin:0;max-width:100%;min-width:80px;padding:0 12px;position:relative;text-transform:none;width:48%;width:calc(50% - 5px);border:1px solid #1b78cf;-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;word-wrap:normal;white-space:nowrap}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type{float:left;background-color:#fff;color:#1b78cf}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:last-of-type{float:right;background-color:#1b78cf;color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type:last-of-type{float:none;width:auto}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:hover{opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:active:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.08)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:focus:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button a{color:inherit;text-decoration:inherit}.ab-iam-root.v3 .ab-in-app-message img{float:none;display:inline-block}.ab-iam-root.v3 .ab-in-app-message .ab-icon{float:none;display:inline-block;padding:10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message .ab-icon .fa{float:none;font-size:30px;width:30px}.ab-iam-root.v3 .ab-start-hidden{visibility:hidden}.ab-iam-root.v3 .ab-centered{margin:auto;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ab-iam-root.v3{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-iam-root.v3 .ab-page-blocker{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9001;pointer-events:all;background-color:rgba(51,51,51,.75)}@media (max-width:600px){.ab-iam-root.v3 .ab-in-app-message.ab-slideup{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic),.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:480px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}}@media (max-height:750px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-height:91%;max-height:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-height:91vh;max-height:calc(100vh - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text{max-height:65vh;max-height:calc(100vh - 30px - 60px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image{max-height:45vh;max-height:calc(100vh - 30px - 155.17241379310346px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon{max-height:45vh;max-height:calc(100vh - 30px - 70px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons{max-height:50vh;max-height:calc(100vh - 30px - 93px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image{max-height:30vh;max-height:calc(100vh - 30px - 155.17241379310346px - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon{max-height:30vh;max-height:calc(100vh - 30px - 70px - 93px - 20px)}}@media (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area img{max-height:100%;max-width:100%}}@media (max-height:750px) and (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important;width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-height:480px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:750px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}"),(0,n.N)()}},S4Qt:(t,e,i)=>{i.d(e,{N:()=>n});var s=i("F7/r");function n(){if(s.Ay.nn(s.lw.Mo))return;const t="https://use.fontawesome.com/7f85a56ba4.css";if(null===document.querySelector('link[rel=stylesheet][href="'+t+'"]')){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(e)}}},l6Yh:(t,e,i)=>{i.d(e,{$6:()=>u,V:()=>o,dy:()=>p,jj:()=>c,mY:()=>l,qj:()=>d});var s=i("cqms"),n=i("LltV"),r=i("+aDo"),a=i("TnFm");const o={types:{ro:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",no:"openLink",ao:"openLinkInWebView"},properties:{type:"type",oo:"steps",eo:"args"}},l={Li:"unknownBrazeAction",Vi:"noPushPrompt"},u=(t,e)=>{switch(t){case l.Li:return`${e} contains an unknown braze action type and will not be displayed.`;case l.Vi:return`${e} contains a push prompt braze action, but is not eligible for a push prompt. Ignoring.`;default:return""}};function c(t){try{const e=t.match(a.nx),i=e?e[0].length:null,n=i?t.substring(i):null;if(null==i||i>t.length-1||!n)return void s.A.error(`Did not find base64 encoded brazeAction in url to process : ${t}`);const o=(0,r.u)(n);return o?JSON.parse(o):void s.A.error(`Failed to decode base64 encoded brazeAction: ${n}`)}catch(e){return void s.A.error(`Failed to process brazeAction URL ${t} : ${(0,n.u)(e)}`)}}function h(t,e){let i=!1;if(e)for(const s of e)if(i=i||t(s),i)return!0;return!1}function d(t){const e=o.properties.type,i=o.properties.oo;try{if(null==t)return!0;const s=t[e];return s===o.types.ro?h(d,t[i]):!(0,a.To)(s)}catch(t){return!0}}function p(t){if(!t||!(0,a.xs)(t))return!1;const e=o.properties.type,i=o.properties.oo,s=t[e];return s===o.types.ro?h(p,t[i]):s===o.types.requestPushPermission}},fXrE:(t,e,i)=>{i.d(e,{A:()=>u});var s=i("azH7");class n{constructor(){}ef(){}sf(){}Da(t){}static ff(t,e){if(t&&e)if(t=t.toLowerCase(),(0,s.cy)(e.nf)){for(let i=0;i<e.nf.length;i++)if(-1!==t.indexOf(e.nf[i].toLowerCase()))return e.identity}else if(-1!==t.indexOf(e.nf.toLowerCase()))return e.identity}}var r=i("b8BB");class a extends n{constructor(){if(super(),this.userAgentData=navigator.userAgentData,this.browser=null,this.version=null,this.userAgentData){const t=this.hc();this.browser=t.browser||"Unknown Browser",this.version=t.version||"Unknown Version"}this.OS=null}ef(){return this.browser}sf(){return this.version}Da(t){if(this.OS)return Promise.resolve(this.OS);const e=e=>{for(let i=0;i<t.length;i++){const s=a.ff(e,t[i]);if(s)return this.OS=s,this.OS}return e};return this.userAgentData.platform?Promise.resolve(e(this.userAgentData.platform)):this.getHighEntropyValues().then((t=>t.platform?e(t.platform):navigator.platform)).catch((()=>navigator.platform))}hc(){const t={},e=this.userAgentData.brands;if(e&&e.length)for(const i of e){const e=this.uc(r.c),s=i.brand.match(e);if(s&&s.length>0){t.browser=s[0],t.version=i.version;break}}return t}uc(t){const e=[];for(const i in t){const s=i;e.push(t[s])}return new RegExp("("+e.join("|")+")","i")}getHighEntropyValues(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}}class o extends n{constructor(){super(),this.fd=o.hc(navigator.userAgent||"")}ef(){return this.fd[0]||"Unknown Browser"}sf(){return this.fd[1]||"Unknown Version"}Da(t){for(let e=0;e<t.length;e++){const i=t[e].string;let s=o.ff(i,t[e]);if(s)return s===r.u.Pg&&navigator.maxTouchPoints>1&&(s=r.u.io),Promise.resolve(s)}return Promise.resolve(navigator.platform)}static hc(t){let e,i=t.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(-1!==t.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==t.indexOf("CrKey"))return["Chromecast",null];if(-1!==t.indexOf("BRAVIA")||-1!==t.indexOf("SonyCEBrowser")||-1!==t.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==t.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(t.match(/\b(Roku)\b/))return["Roku",null];if(t.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(i[1]===r.c.rO&&(e=t.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("OPR",r.c.oO),e[0]=e[0].replace("EdgA",r.c.eO),"Edg"===e[0]&&(e[0]=r.c.eO),[e[0],e[1]];if(i[1]===r.c.Bg&&(e=t.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("EdgiOS",r.c.eO),[e[0],e[1]];if(i=i[2]?[i[1],i[2]]:[null,null],i[0]===r.c.Bg&&null!=(e=t.match(/version\/(\.?\d+(\.\d+)*)/i))&&i.splice(1,1,e[1]),null!=(e=t.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&i.splice(1,1,e[2]),i[0]===r.c.oO&&null!=(e=t.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",e[1]||""];if(i[0]){const t=i[0].toLowerCase();"crios"===t&&(i[0]=r.c.rO),"tizen"===t&&(i[0]="Samsung Smart TV",i[1]=null),"samsungbrowser"===t&&(i[0]="Samsung Browser")}return i}}class l{constructor(){const t=navigator.userAgentData?a:o;this.Sg=new t,this.userAgent=navigator.userAgent,this.browser=this.Sg.ef(),this.version=this.Sg.sf(),this.OS=null,this.Da().then((t=>this.OS=t));const e=navigator;this.language=(e.userLanguage||e.language||e.browserLanguage||e.systemLanguage||"").toLowerCase(),this.Qo=l.vg(this.userAgent)}IE(){return this.browser===r.c.Bg}Ca(){return this.OS||null}Da(){return this.OS?Promise.resolve(this.OS):this.Sg.Da(l.kg).then((t=>(this.OS=t,t)))}static vg(t){t=t.toLowerCase();const e=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma","taiko"];for(let i=0;i<e.length;i++)if(-1!==t.indexOf(e[i]))return!0;return!1}}l.kg=[{string:navigator.platform,nf:"Win",identity:r.u.Og},{string:navigator.platform,nf:"Mac",identity:r.u.Pg},{string:navigator.platform,nf:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,nf:"FreeBSD",identity:"FreeBSD"},{string:navigator.platform,nf:"OpenBSD",identity:"OpenBSD"},{string:navigator.platform,nf:"Nintendo",identity:"Nintendo"},{string:navigator.platform,nf:"SunOS",identity:"SunOS"},{string:navigator.platform,nf:"PlayStation",identity:"PlayStation"},{string:navigator.platform,nf:"X11",identity:"X11"},{string:navigator.userAgent,nf:["iPhone","iPad","iPod"],identity:r.u.io},{string:navigator.platform,nf:"Pike v",identity:r.u.io},{string:navigator.userAgent,nf:["Web0S"],identity:"WebOS"},{string:navigator.platform,nf:["Linux armv7l","Android"],identity:r.u.xg},{string:navigator.userAgent,nf:["Android"],identity:r.u.xg},{string:navigator.platform,nf:"Linux",identity:"Linux"}];const u=new l},azH7:(t,e,i)=>{i.d(e,{$P:()=>o,BY:()=>r,E$:()=>u,Gv:()=>l,HP:()=>c,cy:()=>a,n4:()=>h,zu:()=>n});var s=i("cqms");function n(t){const e=[];let i;for(const s in t)i=s,Object.prototype.hasOwnProperty.call(t,i)&&void 0!==t[i]&&e.push(t[i]);return e}function r(t,e,i,r){const a=n(t);return-1!==a.indexOf(e)||(s.A.error(`${i} Valid values from ${r} are "${a.join('"/"')}".`),!1)}function a(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"[object Date]"===Object.prototype.toString.call(t)}function l(t){return"[object Object]"===Object.prototype.toString.call(t)}function u(t,...e){null==t&&(t=[]);const i=[],s=arguments.length;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(-1!==i.indexOf(n))continue;let r=1;for(r=1;r<s&&-1!==arguments[r].indexOf(n);r++);r===s&&i.push(n)}return i}function c(t){const e=[];for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}function h(t,e){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;const i=t.toString();if(i!==e.toString())return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}const s="[object Array]"===i;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;const i=t.constructor,s=e.constructor;if(i!==s&&!("function"==typeof i&&i instanceof i&&"function"==typeof s&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}const n=[],r=[];let a=n.length;for(;a--;)if(n[a]===t)return r[a]===e;if(n.push(t),r.push(e),s){if(a=t.length,a!==e.length)return!1;for(;a--;)if(!h(t[a],e[a]))return!1}else{const i=c(t);let s;if(a=i.length,c(e).length!==a)return!1;for(;a--;)if(s=i[a],!Object.prototype.hasOwnProperty.call(e,s)||!h(t[s],e[s]))return!1}return n.pop(),r.pop(),!0}},L0Yc:(t,e,i)=>{i.d(e,{p:()=>r});var s=i("zxwP"),n=i("KiAB");function r(t,e,i,r="ltr"){const a=document.createElement("button");a.setAttribute("aria-label",t),a.setAttribute("tabindex","0"),a.setAttribute("role","button"),a.dir=r,(0,s.P4)(a,"touchstart"),a.className="ab-close-button";const o=(0,s.RJ)("0 0 15 15","M15 1.5L13.5 0l-6 6-6-6L0 1.5l6 6-6 6L1.5 15l6-6 6 6 1.5-1.5-6-6 6-6z",e);return a.appendChild(o),a.addEventListener("keydown",(t=>{t.keyCode!==n.c.Fo&&t.keyCode!==n.c.To||(i(),t.stopPropagation())})),a.onclick=t=>{i(),t.stopPropagation()},a}},"7esM":(t,e,i)=>{i.d(e,{DA:()=>h,EQ:()=>o,Jd:()=>c,S3:()=>u,UK:()=>n,YX:()=>r,Zo:()=>a,jU:()=>l});var s=i("azH7");function n(t,e=!1){let i=t/1e3;return e&&(i=Math.floor(i)),i}function r(t){return 1e3*t}function a(t){if(null==t)return null;const e=parseInt(t.toString());return isNaN(e)?null:new Date(1e3*e)}function o(t){return null!=t&&(0,s.$P)(t)?t.toISOString().replace(/\.[0-9]{3}Z$/,""):t}function l(t){return null==t||""===t?null:new Date(t)}function u(t){return null==t||""===t?(new Date).valueOf():t}function c(t){return((new Date).valueOf()-t.valueOf())/1e3}function h(t){return(t.valueOf()-(new Date).valueOf())/1e3}},b8BB:(t,e,i)=>{i.d(e,{c:()=>s,u:()=>n});const s={rO:"Chrome",eO:"Edge",oO:"Opera",Bg:"Safari",OO:"Firefox"},n={xg:"Android",io:"iOS",Pg:"Mac",Og:"Windows"}},zxwP:(t,e,i)=>{i.d(e,{CF:()=>o,K:()=>c,Kz:()=>u,P4:()=>l,RJ:()=>p,X:()=>a,e0:()=>r,jp:()=>h,sr:()=>d});var s=i("cqms"),n=i("LltV");const r={dc:null,po:function(t,e=!1,i=!1,s=!1){if(null==t)return!1;e=e||!1,i=i||!1;const n=t.getBoundingClientRect();return null!=n&&(n.top>=0&&n.top<=(window.innerHeight||document.documentElement.clientHeight)||!e)&&(n.left>=0||!s)&&(n.bottom>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!i)&&(n.right<=(window.innerWidth||document.documentElement.clientWidth)||!s)}},a={Oe:"up",Qe:"down",U:"left",V:"right"};function o(){if(null==r.dc){r.dc=!1;try{const t=Object.defineProperty({},"passive",{get:()=>{r.dc=!0}});window.addEventListener("testPassive",(()=>{}),t),window.removeEventListener("testPassive",(()=>{}),t)}catch(t){s.A.error((0,n.u)(t))}}return r.dc}function l(t,e,i=(()=>{})){t.addEventListener(e,i,!!o()&&{passive:!0})}function u(t){return r.po(t,!0,!1,!1)}function c(t){return r.po(t,!1,!0,!1)}function h(t){if(t.onclick){const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.onclick.apply(t,[e])}}function d(t,e,i){let s=null,n=null;l(t,"touchstart",(t=>{s=t.touches[0].clientX,n=t.touches[0].clientY})),l(t,"touchmove",(r=>{if(null==s||null==n)return;const o=s-r.touches[0].clientX,l=n-r.touches[0].clientY;Math.abs(o)>Math.abs(l)&&Math.abs(o)>=25?((o>0&&e===a.U||o<0&&e===a.V)&&i(r),s=null,n=null):Math.abs(l)>=25&&((l>0&&e===a.Oe&&t.scrollTop===t.scrollHeight-t.offsetHeight||l<0&&e===a.Qe&&0===t.scrollTop)&&i(r),s=null,n=null)}))}function p(t,e,i){const s="http://www.w3.org/2000/svg",n=document.createElementNS(s,"svg");n.setAttribute("viewBox",t),n.setAttribute("xmlns",s);const r=document.createElementNS(s,"path");return r.setAttribute("d",e),null!=i&&r.setAttribute("fill",i),n.appendChild(r),n}},LltV:(t,e,i)=>{i.d(e,{u:()=>s});const s=t=>t instanceof Error?t.message:String(t)},KiAB:(t,e,i)=>{i.d(e,{c:()=>s});const s={Fo:32,lo:9,To:13,mh:27}},L0v4:(t,e,i)=>{i.d(e,{C:()=>s});const s=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t)},CgXj:(t,e,i)=>{i.d(e,{A:()=>o,s:()=>a});var s=i("cqms"),n=i("QOIJ"),r=i("LltV");const a=t=>{const e={},i=t.toString().split("\r\n");if(!i)return e;let s,n;for(const t of i)t&&(s=t.slice(0,t.indexOf(":")).toLowerCase().trim(),n=t.slice(t.indexOf(":")+1).trim(),e[s]=n);return e},o={Gs:t=>{let e,i;try{const r=()=>{s.A.error("This browser does not have any supported ajax options!")};let a=!1;if(window.XMLHttpRequest&&(a=!0),!a)return void r();e=new XMLHttpRequest;const o=()=>{"function"==typeof t.error&&t.error(e.status),"function"==typeof t.Ws&&t.Ws(!1)};e.onload=()=>{let i=!1;if(4===e.readyState)if(i=e.status>=200&&e.status<300||304===e.status,i){if("function"==typeof t.L){let s,r;try{s=JSON.parse(e.responseText),r=e.getAllResponseHeaders()}catch(i){const s={error:""===e.responseText?n.A.Ra:n.A.qa,response:e.responseText};(0,t.L)(s,r)}s&&t.L(s,r)}"function"==typeof t.Ws&&t.Ws(!0)}else o()},e.onerror=()=>{o()},e.ontimeout=()=>{o()},i=JSON.stringify(t.data),e.open("POST",t.url,!0),e.setRequestHeader("Content-type","application/json"),e.setRequestHeader("X-Requested-With","XMLHttpRequest");const l=t.headers||[];for(const t of l)e.setRequestHeader(t[0],t[1]);e.send(i)}catch(t){s.A.error(`Network request error: ${(0,r.u)(t)}`)}}}},"J++8":(t,e,i)=>{i.d(e,{A:()=>a});var s=i("FggB"),n=i("jGgm");const r={Ps:{La:"data",Bs:"content_cards/sync",bi:"feature_flags/sync",Ir:"template"},Du:t=>null==t?void 0:t.j(n.d.C.lE),sm:t=>null==t?void 0:t.j(n.d.C.SE),nm:(t,e)=>{null==t||t.k(n.d.C.lE,e)},um:(t,e)=>{null==t||t.k(n.d.C.SE,e)},Ua:(t,e)=>{if(!t||!e)return-1;const i=r.Du(t);if(null==i)return-1;const s=i[e];return null==s||isNaN(s)?-1:s},Ha:(t,e)=>{let i=s.et;if(!t||!e)return i;const n=r.sm(t);return null==n?i:(i=n[e],null==i||isNaN(i)?s.et:i)},_s:(t,e,i)=>{if(!t||!e)return;let s=r.Du(t);null==s&&(s={}),s[e]=i,r.nm(t,s)},Qs:(t,e,i)=>{if(!t||!e)return;let s=r.sm(t);null==s&&(s={}),s[e]=i,r.um(t,s)},Ys:(t,e)=>{if(!t||!e)return;const i=r.Ha(t,e);r.Qs(t,e,i+1)}},a=r},"+aDo":(t,e,i)=>{i.d(e,{N:()=>n,u:()=>r});var s=i("cqms");function n(t){let e=t.length;for(let i=t.length-1;i>=0;i--){const s=t.charCodeAt(i);s>127&&s<=2047?e++:s>2047&&s<=65535&&(e+=2),s>=56320&&s<=57343&&i--}return e}function r(t){try{t=t.replace(/-/g,"+").replace(/_/g,"/");const e=window.atob(t),i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);const s=new Uint16Array(i.buffer);return String.fromCharCode(...s)}catch(t){return s.A.error("Unable to decode Base64: "+t),null}}},DEgD:(t,e,i)=>{function s(t){null==t&&(t="");const e=t.split("?").slice(1).join("?"),i={};if(null!=e){const t=e.split("&");for(let e=0;e<t.length;e++){const s=t[e].split("=");""!==s[0]&&(i[s[0]]=s[1])}}return i}function n(t){return!(!t||0!==(t=t.toString().toLowerCase()).lastIndexOf("javascript:",0)&&0!==t.lastIndexOf("data:",0))}i.d(e,{P:()=>n,y:()=>s})},TnFm:(t,e,i)=>{i.d(e,{B9:()=>x,Dz:()=>b,To:()=>k,Z2:()=>w,ZJ:()=>f,fB:()=>y,nx:()=>p,rK:()=>v,uZ:()=>g,xs:()=>E});var s=i("azH7"),n=i("+aDo"),r=i("cqms"),a=i("7esM"),o=i("l6Yh"),l=i("FggB");const u=/^[^\x00-\x1F\x22]+$/,c=/[$.]/,h=["$add","$update","$remove","$identifier_key","$identifier_value","$new_object","$time","$google_ad_personalization","$google_ad_user_data"],d=new RegExp(/^.+@.+\..+$/),p=/^brazeActions:\/\/v\d+\//;function b(t,e,i){const s=null!=t&&"string"==typeof t&&(""===t||null!=t.match(u));return s||r.A.error(`Cannot ${e} because ${i} "${t}" is invalid.`),s}function f(t){return null!=t&&t.match(c)&&-1===h.indexOf(t)&&r.A.warn("Custom attribute keys cannot contain '$' or '.'"),b(t,"set custom user attribute","the given key")}function g(t){const e=typeof t;return null==t||"number"===e||"boolean"===e||(0,s.$P)(t)||"string"===e}function m(t,e,i){const n=-1!==i;if(n&&i>50)return r.A.error("Nested attributes cannot be more than 50 levels deep."),!1;const o=n?i+1:-1;if((0,s.cy)(t)&&(0,s.cy)(e)){for(let i=0;i<t.length&&i<e.length;i++)if((0,s.$P)(t[i])&&(e[i]=(0,a.EQ)(t[i])),!m(t[i],e[i],o))return!1}else{if(!(0,s.Gv)(t))return g(t);for(const i of(0,s.HP)(t)){const r=t[i];if(n&&!f(i))return!1;if((0,s.$P)(r)&&(e[i]=(0,a.EQ)(r)),!m(r,e[i],o))return!1}}return!0}function A(t,e,i,n,a){let o;return o=(0,s.Gv)(t)||(0,s.cy)(t)?m(t,e,a?1:-1):g(t),o||r.A.error(`Cannot ${i} because ${n} "${t}" is invalid.`),o}function v(t,e,i,s=!1){const n="string"==typeof t||null===t&&s;return n||r.A.error(`Cannot ${e} because ${i} "${t}" is invalid.`),n}function y(t,e,i,o,u){if(null==t&&(t={}),"object"!=typeof t||(0,s.cy)(t))return r.A.error(`${e} requires that ${i} be an object. Ignoring ${u}.`),[!1,null];let c,h;e===l.KG?(c=76800,h="75KB"):(c=51200,h="50KB");const d=JSON.stringify(t);if((0,n.N)(d)>c)return r.A.error(`Could not ${o} because ${i} was greater than the max size of ${h}.`),[!1,null];let p;try{p=JSON.parse(d)}catch(t){return r.A.error(`Could not ${o} because ${i} did not contain valid JSON.`),[!1,null]}for(const i in t){if(e===l.KG&&!f(i))return[!1,null];if(!b(i,o,`the ${u} property name`))return[!1,null];const n=t[i];if(e===l.KG||null!=n){if((0,s.$P)(n)&&(p[i]=(0,a.EQ)(n)),!A(n,p[i],o,`the ${u} property "${i}"`,e===l.KG))return[!1,null]}else delete t[i],delete p[i]}return[!0,p]}function w(t,e){let i=!1,n=!1;const a=()=>{r.A.error("Custom attribute arrays must be either string arrays or object arrays.")};for(const r of e)if("string"==typeof r){if(n)return a(),[!1,!1];if(!b(r,`set custom user attribute "${t}"`,"the element in the given array"))return[!1,!1];i=!0}else{if(!(0,s.Gv)(r))return a(),[!1,!1];if(i)return a(),[!1,!1];if(!y(r,l.KG,"attribute value",`set custom user attribute "${t}"`,"custom user attribute"))return[!1,!1];n=!0}return[i,n]}function x(t){return"string"==typeof t&&null!=t.toLowerCase().match(d)}function E(t){if(!(o.V.properties.type in t))return!1;switch(t[o.V.properties.type]){case o.V.types.ro:if(o.V.properties.oo in t)return!0;break;case o.V.types.logCustomEvent:case o.V.types.setEmailNotificationSubscriptionType:case o.V.types.setPushNotificationSubscriptionType:case o.V.types.setCustomUserAttribute:case o.V.types.addToSubscriptionGroup:case o.V.types.removeFromSubscriptionGroup:case o.V.types.addToCustomAttributeArray:case o.V.types.removeFromCustomAttributeArray:case o.V.types.no:case o.V.types.ao:if(o.V.properties.eo in t)return!0;break;case o.V.types.requestPushPermission:return!0;default:return!1}return!1}function k(t){let e=!1;return Object.keys(o.V.types).forEach((i=>{o.V.types[i]!==t.toString()||(e=!0)})),e}},xoq4:(t,e,i)=>{i.d(e,{j3:()=>s,uD:()=>n});const s={PORTRAIT:0,LANDSCAPE:1},n={openUri:function(t,e,i){t&&(e||null!=i&&i.metaKey?window.open(t):window.location=t)},fo:function(){return screen.width<=600},co:function(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?s.LANDSCAPE:s.PORTRAIT;const t=window;if("screen"in t){let e=t.screen.orientation||screen.mozOrientation||screen.msOrientation;return null!=e&&"object"==typeof e&&(e=e.type),"landscape-primary"===e||"landscape-secondary"===e?s.LANDSCAPE:s.PORTRAIT}return s.PORTRAIT},Zo:function(){return window.location.href}}}}]);